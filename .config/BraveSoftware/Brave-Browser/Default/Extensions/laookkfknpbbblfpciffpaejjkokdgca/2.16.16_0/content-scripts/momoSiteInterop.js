!function(){"use strict";!function(){if(chrome&&chrome.runtime){let e=function(e,n){let t=document.createElement("input");t.type="hidden",t.id=e,t.value=n,document.body.appendChild(t)},n=chrome.runtime.getURL(""),t=n.startsWith("chrome-extension:")?"chrome-extension":n.startsWith("moz-extension:")?"moz-extension":n.startsWith("safari-web-extension:")?"safari-web-extension":null;if(chrome.extension.inIncognitoContext&&"safari-web-extension"!==t)return;t&&e("momentumPlatform",t);let o=chrome.runtime.getManifest();o&&e("momentumVersion",o.version),window.addEventListener("message",(function(e){if(e.source===window&&e.data.type){let n=e.data.type;if("momentum:oneTimeLogin"===n){let n=!!e.data.updateSenderTab;chrome.runtime.sendMessage({type:"oneTimeLogin",payload:e.data.payload,legacy:e.data.legacy,updateSenderTab:n},(function(e){window.postMessage({type:"momentum:callback:oneTimeLogin",payload:e},window.origin)}))}else"momentum:authState"===n?chrome.runtime.sendMessage(e.data):"momentum:checkUserId"===n?chrome.runtime.sendMessage({type:"momentum:checkUserId",payload:e.data.payload},(function(e){window.postMessage({type:"momentum:callback:checkUserId",payload:e},window.origin)})):"momentum:openNew"===n&&chrome.runtime.sendMessage(e.data,(function(e){let n=e||{success:!1,error:chrome.runtime.lastError};window.postMessage({type:"momentum:callback:openNew",payload:n},window.origin)}))}}),!1)}}()}();