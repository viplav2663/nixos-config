import{V as e,r as t}from"./icon-alert--q0yLTMi.js";import{g as i,d as n}from"./onboardingStepCollection-BKBgZU5n.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./VueBase-W7f1OYgs.js";import"./index-DQvfDEB6.js";import"./migrateLegacyUserMessageHandler-DMvEmYM4.js";import"./main-FH8FpKq2.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-SV1wohGy.js";import"./itemModelMixin-B7XBtNZL.js";import"./reactiveCustomization-DqGARD3C.js";import"./namesMixin-DfNb5KMg.js";import"./itemDataServiceMixins-DPsPiv13.js";import"./icon-asana-Csd73e1k.js";import"./focusModeHelpers-CiIJnkuY.js";import"./scenes-D8jpYIdj.js";import"./ocean-bubbles-GcKjBI5B.js";import"./PomodoroTimers-BWkB-14p.js";import"./SubscriptionSummary-eTeXKiGw.js";import"./constants-CALDQiUE.js";import"./authService-CGVTYYkM.js";import"./loginHelpers-BZASe8UD.js";import"./icon-confetti-Dz2LojDe.js";import"./siteBlockerGroups-E8GFJ9Dm.js";import"./constants-BT5o8PmI.js";import"./compareObjects-BF7sSNEf.js";const s=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:i(),definitions:n,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:i,experimentId:n,variantId:s}={}){let p;if(n){const t=this.experimentMap[n],i=t&&t.variants[s];p=i&&i.steps[e]}else p=this.definitions[e];p&&(this.toggleStepPinned(p,{stepId:e,subStepIndex:i,experimentId:n,variantId:s}),t.appsReady?this.setStepActive(p,i):m.once("appsReady",(()=>{this.setStepActive(p,i)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:n,variantId:s}={}){const p=localStorage.getObject("devPanel:pinnedStep");p?this.objectsMatch(p,{stepId:t,subStepIndex:i,experimentId:n,variantId:s})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(p),{stepId:t,experimentId:n,variantId:s})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:n,variantId:s}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{s as default};