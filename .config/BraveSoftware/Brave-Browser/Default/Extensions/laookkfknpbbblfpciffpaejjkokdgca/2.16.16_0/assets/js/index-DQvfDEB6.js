const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/onboardingStepCollection-BKBgZU5n.js","assets/js/VueBase-W7f1OYgs.js","assets/js/icon-alert--q0yLTMi.js","assets/js/localStorage-4iHdj-SC.js","assets/js/preload-helper-DmNsytk6.js","assets/js/string-GDe0WbEj.js","assets/js/index-CJJH83pl.js","assets/js/portal-vue.esm-SV1wohGy.js","assets/js/itemModelMixin-B7XBtNZL.js","assets/js/reactiveCustomization-DqGARD3C.js","assets/js/namesMixin-DfNb5KMg.js","assets/js/itemDataServiceMixins-DPsPiv13.js","assets/js/icon-asana-Csd73e1k.js","assets/js/focusModeHelpers-CiIJnkuY.js","assets/js/scenes-D8jpYIdj.js","assets/js/ocean-bubbles-GcKjBI5B.js","assets/js/PomodoroTimers-BWkB-14p.js","assets/js/SubscriptionSummary-eTeXKiGw.js","assets/js/migrateLegacyUserMessageHandler-DMvEmYM4.js","assets/js/main-FH8FpKq2.js","assets/js/constants-CALDQiUE.js","assets/js/authService-CGVTYYkM.js","assets/js/loginHelpers-BZASe8UD.js","assets/js/icon-confetti-Dz2LojDe.js","assets/js/siteBlockerGroups-E8GFJ9Dm.js","assets/js/constants-BT5o8PmI.js","assets/js/compareObjects-BF7sSNEf.js","assets/js/notes-CabcPby9.js","assets/js/notesViewState-BRr9-GZ3.js","assets/js/ViewState-_YxhE_TX.js","assets/js/BaseDropdown-DBvV1Fy2.js","assets/js/BaseDropdownContent-BSCj37As.js","assets/js/index-D7SyL4qE.js","assets/css/BaseDropdownContent-BzU7S1Vc.css","assets/js/icon-ellipsis-D3jS4u3x.js","assets/css/BaseDropdown-DOOXxvW0.css","assets/css/notes-GL6TFL9M.css","assets/js/links-hR2TwzXn.js","assets/js/pomodoroCompleted-DWEcdQPX.js","assets/js/customization-fX3KDebH.js","assets/js/main-BwjnDu7m.js","assets/js/AddMetric-BOlVHt78.js","assets/js/allComponentsMounted-C3UsG_cA.js","assets/js/internalDataMetrics-DdXJLkC7.js","assets/js/appToggleMixin-IV4cErk-.js","assets/js/focusModeInsightsViewState-Cglfh_kk.js","assets/js/showAnyway-d_ZUKj8O.js","assets/js/add-COIuonao.js","assets/js/icon-hide-NFfBhfBx.js","assets/css/AddMetric-DG6MzYj9.css","assets/js/metricMetadata-D4pZaGht.js","assets/js/clocks-DjzskNOU.js","assets/js/main-BDds93VO.js","assets/js/AppContainer-DnRychOY.js","assets/css/AppContainer-Okwrv5EP.css","assets/js/AppDash-CAm0VyUo.js","assets/js/BaseIcon-B5UifJH3.js","assets/js/arrow-Be8MuPJi.js","assets/js/icon-weather-reset-C06kxk3l.js","assets/js/icon-settings-Bycjf8-G.js","assets/js/icon-back-arrow-CiRQJ6G-.js","assets/js/icon-back-D_TFrgyJ.js","assets/js/icon-trash-BQ1O-AfY.js","assets/js/icon-close-BUGl_M7j.js","assets/js/icon-cog-BFr_Pva7.js","assets/js/icon-skip-BOkC5L0N.js","assets/js/icon-down-BiHbKN-t.js","assets/js/icon-edit-CixeXNYx.js","assets/js/icon-error-state-BKQhfBCj.js","assets/js/icon-heart-v5O7C6eS.js","assets/js/icon-key-BPNRipb3.js","assets/js/icon-next-B4hjdiAA.js","assets/js/icon-photo-BrwqV1T0.js","assets/js/icon-pin-BHeOuzvO.js","assets/js/icon-plus-D4YOesIc.js","assets/js/icon-profile-B_XWyuTb.js","assets/js/icon-x-qUCmf2CW.js","assets/js/icon-skip-intro-BUi8b3Ak.js","assets/js/icon-tooltip-CN09iXOB.js","assets/js/icon-visible-on-CM3kpcFN.js","assets/js/icon-x-caret-half-CZtcH_PM.js","assets/js/tasks-completed-Dg2z75km.js","assets/js/google-DKPAcOmk.js","assets/js/arrow-up-1QPpu78M.js","assets/js/square-check-DwLT60gj.js","assets/js/close-Bj_A2br_.js","assets/js/search-DCqlmJx6.js","assets/js/folder-CwWTWsnJ.js","assets/js/switch-EuBTQVVE.js","assets/js/focus-mode-09pIyYAW.js","assets/js/storage-YYEO5TB5.js","assets/js/sparks-CAw9b6ob.js","assets/js/secure-B8YP-AML.js","assets/js/icon-percent-schedule-CA5EI9b7.js","assets/js/icon-trello-DhCq-Fsi.js","assets/js/icon-clean-rFsPxTtp.js","assets/js/icon-more-lists-Cl9oRGK2.js","assets/js/icon-more-fonts-CcfOY0t4.js","assets/js/icon-focus-stats-keERwXFt.js","assets/js/icon-top-of-mind-B6EhbCcK.js","assets/js/icon-flow-5QqmGIWX.js","assets/js/icon-integrations-D9o58ob4.js","assets/js/icon-weather-extra-ufLpT_SX.js","assets/js/icon-spiral-gh4hwZDD.js","assets/js/icon-happy-place-D1z6CJgM.js","assets/js/icon-time-sensitive-CP2L3maw.js","assets/js/icon-hourly-CdMmiQZT.js","assets/js/icon-infinity-D4yMRoAd.js","assets/js/icon-personalize-photos-D2M4lLlt.js","assets/js/icon-skip-2bGCAGKt.js","assets/js/icon-photo-match-C2EChNEK.js","assets/js/icon-random-375DbcwF.js","assets/js/icon-timezones-DGZoTtaT.js","assets/js/icon-simplify-BRUtLJYp.js","assets/js/icon-sync-DIH26Y9h.js","assets/css/BaseIcon-BlT7Qz-y.css","assets/css/AppDash-Drg1dTh1.css","assets/css/main-C53hZ5NM.css","assets/js/main-JN7KJedz.js","assets/js/BaseDropdownOption-umPWLVqy.js","assets/css/BaseDropdownOption-DAuhx1rJ.css","assets/js/BaseDropdownDivider-z6WJAu5K.js","assets/css/BaseDropdownDivider-D_a21TP7.css","assets/css/main-DOXtIPt9.css","assets/js/main-B9i8ZWj7.js","assets/js/Background-CuAXj306.js","assets/js/focusModeViewState-BpbRF0A0.js","assets/js/oneTimeLoginService-ebAeDnd9.js","assets/css/Background-CbU7NVGw.css","assets/js/main-MrKaHy0J.js","assets/js/clockCollection-DnrQ1vUl.js","assets/js/captureMixin-D0enqjOF.js","assets/js/countdownCollection-Bk1rYuSE.js","assets/js/metricCollection-JKwIPpBA.js","assets/js/ViewManager-3CiDAToO.js","assets/js/globalKeyEventManager-Bi-yHy9P.js","assets/css/main-SF6HEM12.css","assets/js/main-DBN6T0An.js","assets/js/bookmarkUtils-XhqyAlJr.js","assets/css/main-CaM-zWCN.css","assets/js/main-BAQw00uU.js","assets/js/SmoothReflow-Du5fECCq.js","assets/css/SmoothReflow-DiGQ1RDg.css","assets/css/main-BGbKmRro.css","assets/js/main-BIz3EK2d.js","assets/css/main-DJlpX0UF.css","assets/js/main-Tcv4HC2-.js","assets/css/main-BxfSuN1U.css","assets/js/main-DNm3OZm_.js","assets/css/main-Cwruen15.css","assets/js/main-CdnYxh7d.js","assets/js/main-C41vPxX9.js","assets/js/FlashMessage-DPJrdJ6u.js","assets/css/FlashMessage-nc7yvAAd.css","assets/js/main-Dkjwuksw.js","assets/css/main-DxoEhWPw.css","assets/js/main-Dw4p2kjH.js","assets/css/main-Dgcll6ws.css","assets/js/main-BuwYNULa.js","assets/js/linksViewState-M45gi0JR.js","assets/js/constants-BpVlFj04.js","assets/css/main-BuBcKDdi.css","assets/js/main-CYO4hPzG.js","assets/css/main-cyhyJkBN.css","assets/js/main-DG8H7BSj.js","assets/js/Popup-ByBvHAFZ.js","assets/css/Popup-DtFWmS8y.css","assets/js/v-style-BjkA8kde.js","assets/css/main-CjXBBiq5.css","assets/js/main-B29CenTk.js","assets/js/hideEventsMixin-C3v17jdv.js","assets/css/main-Cr-dLBRg.css","assets/js/main-BfQqaEIG.js","assets/js/AppHeaderControl-FZTURLhY.js","assets/css/AppHeaderControl-C6b_K81h.css","assets/css/main-D25gxvlF.css","assets/js/main-BRlabB1z.js","assets/css/main-Dh30-YBF.css","assets/js/main-CJQVFAuA.js","assets/js/main-BclVZKEy.js","assets/css/main-CT07Rq9s.css","assets/js/main-DO9zUItW.js","assets/js/SearchInput-CR1JHKIX.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/BaseDropdownText-CrjTnGhF.js","assets/css/BaseDropdownText-dp_QAGZ8.css","assets/css/SearchInput-DPCY_ekq.css","assets/js/AppPopup-CAECMUMV.js","assets/css/AppPopup-GUOHU7lV.css","assets/css/main-BemOlYFd.css","assets/js/main-C0pp867X.js","assets/js/siteBlockerSession-DPf8kIYl.js","assets/css/main-CizsVKd_.css","assets/js/main-CYmRensV.js","assets/js/soundscapesState-BbS4i45E.js","assets/css/main-ChvS26Ab.css","assets/js/main-CZmBqxIp.js","assets/js/tabsViewState-BvLr9Xin.js","assets/css/main-CV_TJIl3.css","assets/js/main-CKnucNdN.js","assets/js/style-TaIEnhS-.js","assets/css/style-CebYLhf0.css","assets/css/main-BVaj092H.css","assets/js/main-BfHq4FBN.js","assets/js/Dropdown-OXqSLuGU.js","assets/css/Dropdown-BcLAxJWG.css","assets/js/DropdownOption-Doji5Bwd.js","assets/js/ToastMenuLegacy-FWR1i4hA.js","assets/css/ToastMenuLegacy-DzMwE8K6.css","assets/css/main-DI87XtNu.css","assets/js/main-BZJA4BrZ.js","assets/js/main-BzLP8dnj.js","assets/css/main-Dy4opysj.css","assets/js/main-1HvsuqSt.js","assets/css/main-CiP0nail.css","assets/js/addin-F82kL3BM.js","assets/js/handlebarLoader-xbtIzd6B.js","assets/css/addin-d63gIpXH.css","assets/js/addin-BMNVKKCF.js","assets/css/addin-kSXa-Dzr.css","assets/js/addin-DvWoD2ka.js","assets/css/addin-D68qkMKk.css","assets/js/addin-DSgIwLAj.js","assets/js/addin-BmxJucc6.js","assets/css/addin-DEtkFpup.css","assets/js/addin-0imEgh2s.js","assets/css/addin-BJ9J9xKJ.css","assets/js/addin-CMpBsJ7o.js","assets/js/addin-1aephv_m.js","assets/js/addin-i3SvN_uB.js","assets/js/addin-lIDOedQH.js","assets/js/addin-NtwRtZUJ.js","assets/js/addin-C7-jqnL5.js","assets/css/addin-BOWvhLRF.css","assets/js/addin-BpqcBRD9.js","assets/css/addin-B7YvehCO.css","assets/js/addin-B002B2X1.js","assets/js/addin-d8CNU_f0.js","assets/css/addin-DrJAH3cJ.css","assets/js/addin-Sp-9s1WK.js"])))=>i.map(i=>d[i]);
var e,t,n;import{_ as i,g as o}from"./preload-helper-DmNsytk6.js";import{T as s,a2 as r,aM as a,f as l,V as c,aE as u,z as d,a1 as h,M as g,k as p,w as f,d as v,m as y,aJ as b,j as S,r as w,aN as k,e as C,c as x,u as E,g as I,R as T,K as M,n as A,A as O,N as P,p as L,aH as R,b as N,X as D,aO as F,ac as B,aP as j,_ as z}from"./icon-alert--q0yLTMi.js";import{g as V,m as U}from"./localStorage-4iHdj-SC.js";import{L as H,a as W,b as q,c as G,d as K,m as J,M as Y,e as X}from"./migrateLegacyUserMessageHandler-DMvEmYM4.js";import{a as Q}from"./main-FH8FpKq2.js";import"./string-GDe0WbEj.js";var Z="1.13.6",ee="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},te=Array.prototype,ne=Object.prototype,ie="undefined"!=typeof Symbol?Symbol.prototype:null,oe=te.push,se=te.slice,re=ne.toString,ae=ne.hasOwnProperty,le="undefined"!=typeof ArrayBuffer,ce="undefined"!=typeof DataView,ue=Array.isArray,de=Object.keys,he=Object.create,me=le&&ArrayBuffer.isView,ge=isNaN,pe=isFinite,fe=!{toString:null}.propertyIsEnumerable("toString"),ve=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ye=Math.pow(2,53)-1;function be(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var s=Array(t+1);for(o=0;o<t;o++)s[o]=arguments[o];return s[t]=i,e.apply(this,s)}}function Se(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function we(e){return null===e}function _e(e){return void 0===e}function ke(e){return!0===e||!1===e||"[object Boolean]"===re.call(e)}function Ce(e){return!(!e||1!==e.nodeType)}function xe(e){var t="[object "+e+"]";return function(e){return re.call(e)===t}}const Ee=xe("String"),Ie=xe("Number"),Te=xe("Date"),Me=xe("RegExp"),Ae=xe("Error"),Oe=xe("Symbol"),Pe=xe("ArrayBuffer");var Le=xe("Function"),Re=ee.document&&ee.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Re&&(Le=function(e){return"function"==typeof e||!1});const Ne=Le,De=xe("Object");var Fe=ce&&De(new DataView(new ArrayBuffer(8))),Be="undefined"!=typeof Map&&De(new Map),je=xe("DataView");const ze=Fe?function(e){return null!=e&&Ne(e.getInt8)&&Pe(e.buffer)}:je,Ve=ue||xe("Array");function $e(e,t){return null!=e&&ae.call(e,t)}var Ue=xe("Arguments");!function(){Ue(arguments)||(Ue=function(e){return $e(e,"callee")})}();const He=Ue;function We(e){return!Oe(e)&&pe(e)&&!isNaN(parseFloat(e))}function qe(e){return Ie(e)&&ge(e)}function Ge(e){return function(){return e}}function Ke(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=ye}}function Je(e){return function(t){return null==t?void 0:t[e]}}const Ye=Je("byteLength"),Xe=Ke(Ye);var Qe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Ze=le?function(e){return me?me(e)&&!ze(e):Xe(e)&&Qe.test(re.call(e))}:Ge(!1),et=Je("length");function tt(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=ve.length,i=e.constructor,o=Ne(i)&&i.prototype||ne,s="constructor";for($e(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=ve[n])in e&&e[s]!==o[s]&&!t.contains(s)&&t.push(s)}function nt(e){if(!Se(e))return[];if(de)return de(e);var t=[];for(var n in e)$e(e,n)&&t.push(n);return fe&&tt(e,t),t}function it(e){if(null==e)return!0;var t=et(e);return"number"==typeof t&&(Ve(e)||Ee(e)||He(e))?0===t:0===et(nt(e))}function ot(e,t){var n=nt(t),i=n.length;if(null==e)return!i;for(var o=Object(e),s=0;s<i;s++){var r=n[s];if(t[r]!==o[r]||!(r in o))return!1}return!0}function st(e){return e instanceof st?e:this instanceof st?void(this._wrapped=e):new st(e)}function rt(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Ye(e))}st.VERSION=Z,st.prototype.value=function(){return this._wrapped},st.prototype.valueOf=st.prototype.toJSON=st.prototype.value,st.prototype.toString=function(){return String(this._wrapped)};var at="[object DataView]";function lt(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&ct(e,t,n,i)}function ct(e,t,n,i){e instanceof st&&(e=e._wrapped),t instanceof st&&(t=t._wrapped);var o=re.call(e);if(o!==re.call(t))return!1;if(Fe&&"[object Object]"==o&&ze(e)){if(!ze(t))return!1;o=at}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return ie.valueOf.call(e)===ie.valueOf.call(t);case"[object ArrayBuffer]":case at:return ct(rt(e),rt(t),n,i)}var s="[object Array]"===o;if(!s&&Ze(e)){if(Ye(e)!==Ye(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,a=t.constructor;if(r!==a&&!(Ne(r)&&r instanceof r&&Ne(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!lt(e[l],t[l],n,i))return!1}else{var c,u=nt(e);if(l=u.length,nt(t).length!==l)return!1;for(;l--;)if(!$e(t,c=u[l])||!lt(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0}function ut(e,t){return lt(e,t)}function dt(e){if(!Se(e))return[];var t=[];for(var n in e)t.push(n);return fe&&tt(e,t),t}function ht(e){var t=et(e);return function(n){if(null==n)return!1;var i=dt(n);if(et(i))return!1;for(var o=0;o<t;o++)if(!Ne(n[e[o]]))return!1;return e!==vt||!Ne(n[mt])}}var mt="forEach",gt=["clear","delete"],pt=["get","has","set"],ft=gt.concat(mt,pt),vt=gt.concat(pt),yt=["add"].concat(gt,mt,"has");const bt=Be?ht(ft):xe("Map"),St=Be?ht(vt):xe("WeakMap"),wt=Be?ht(yt):xe("Set"),_t=xe("WeakSet");function kt(e){for(var t=nt(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i}function Ct(e){for(var t=nt(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i}function xt(e){for(var t={},n=nt(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t}function Et(e){var t=[];for(var n in e)Ne(e[n])&&t.push(n);return t.sort()}function It(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var s=arguments[o],r=e(s),a=r.length,l=0;l<a;l++){var c=r[l];t&&void 0!==n[c]||(n[c]=s[c])}return n}}const Tt=It(dt),Mt=It(nt),At=It(dt,!0);function Ot(e){if(!Se(e))return{};if(he)return he(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Pt(e,t){var n=Ot(e);return t&&Mt(n,t),n}function Lt(e){return Se(e)?Ve(e)?e.slice():Tt({},e):e}function Rt(e,t){return t(e),e}function Nt(e){return Ve(e)?e:[e]}function Dt(e){return st.toPath(e)}function Ft(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function Bt(e,t,n){var i=Ft(e,Dt(t));return _e(i)?n:i}function jt(e,t){for(var n=(t=Dt(t)).length,i=0;i<n;i++){var o=t[i];if(!$e(e,o))return!1;e=e[o]}return!!n}function zt(e){return e}function Vt(e){return e=Mt({},e),function(t){return ot(t,e)}}function $t(e){return e=Dt(e),function(t){return Ft(t,e)}}function Ut(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,s){return e.call(t,n,i,o,s)}}return function(){return e.apply(t,arguments)}}function Ht(e,t,n){return null==e?zt:Ne(e)?Ut(e,t,n):Se(e)&&!Ve(e)?Vt(e):$t(e)}function Wt(e,t){return Ht(e,t,1/0)}function qt(e,t,n){return st.iteratee!==Wt?st.iteratee(e,t):Ht(e,t,n)}function Gt(e,t,n){t=qt(t,n);for(var i=nt(e),o=i.length,s={},r=0;r<o;r++){var a=i[r];s[a]=t(e[a],a,e)}return s}function Kt(){}function Jt(e){return null==e?Kt:function(t){return Bt(e,t)}}function Yt(e,t,n){var i=Array(Math.max(0,e));t=Ut(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i}function Xt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}st.toPath=Nt,st.iteratee=Wt;const Qt=Date.now||function(){return(new Date).getTime()};function Zt(e){var t=function(t){return e[t]},n="(?:"+nt(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}}const en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},tn=Zt(en),nn=Zt(xt(en)),on=st.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var sn=/(.)^/,rn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},an=/\\|'|\r|\n|\u2028|\u2029/g;function ln(e){return"\\"+rn[e]}var cn=/^\s*(\w|\$)+\s*$/;function un(e,t,n){!t&&n&&(t=n),t=At({},t,st.templateSettings);var i=RegExp([(t.escape||sn).source,(t.interpolate||sn).source,(t.evaluate||sn).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,(function(t,n,i,r,a){return s+=e.slice(o,a).replace(an,ln),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t})),s+="';\n";var r,a=t.variable;if(a){if(!cn.test(a))throw new Error("variable is not a bare identifier: "+a)}else s="with(obj||{}){\n"+s+"}\n",a="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(a,"_",s)}catch(c){throw c.source=s,c}var l=function(e){return r.call(this,e,st)};return l.source="function("+a+"){\n"+s+"}",l}function dn(e,t,n){var i=(t=Dt(t)).length;if(!i)return Ne(n)?n.call(e):n;for(var o=0;o<i;o++){var s=null==e?void 0:e[t[o]];void 0===s&&(s=n,o=i),e=Ne(s)?s.call(e):s}return e}var hn=0;function mn(e){var t=++hn+"";return e?e+t:t}function gn(e){var t=st(e);return t._chain=!0,t}function pn(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var s=Ot(e.prototype),r=e.apply(s,o);return Se(r)?r:s}var fn=be((function(e,t){var n=fn.placeholder,i=function(){for(var o=0,s=t.length,r=Array(s),a=0;a<s;a++)r[a]=t[a]===n?arguments[o++]:t[a];for(;o<arguments.length;)r.push(arguments[o++]);return pn(e,i,this,this,r)};return i}));fn.placeholder=st;const vn=be((function(e,t,n){if(!Ne(e))throw new TypeError("Bind must be called on a function");var i=be((function(o){return pn(e,i,t,this,n.concat(o))}));return i})),yn=Ke(et);function bn(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var o=i.length,s=0,r=et(e);s<r;s++){var a=e[s];if(yn(a)&&(Ve(a)||He(a)))if(t>1)bn(a,t-1,n,i),o=i.length;else for(var l=0,c=a.length;l<c;)i[o++]=a[l++];else n||(i[o++]=a)}return i}const Sn=be((function(e,t){var n=(t=bn(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=vn(e[i],e)}return e}));function wn(e,t){var n=function(i){var o=n.cache,s=""+(t?t.apply(this,arguments):i);return $e(o,s)||(o[s]=e.apply(this,arguments)),o[s]};return n.cache={},n}const _n=be((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),kn=fn(_n,st,1);function Cn(e,t,n){var i,o,s,r,a=0;n||(n={});var l=function(){a=!1===n.leading?0:Qt(),i=null,r=e.apply(o,s),i||(o=s=null)},c=function(){var c=Qt();a||!1!==n.leading||(a=c);var u=t-(c-a);return o=this,s=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),a=c,r=e.apply(o,s),i||(o=s=null)):i||!1===n.trailing||(i=setTimeout(l,u)),r};return c.cancel=function(){clearTimeout(i),a=0,i=o=s=null},c}function xn(e,t,n){var i,o,s,r,a,l=function(){var c=Qt()-o;t>c?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(a,s)),i||(s=a=null))},c=be((function(c){return a=this,s=c,o=Qt(),i||(i=setTimeout(l,t),n&&(r=e.apply(a,s))),r}));return c.cancel=function(){clearTimeout(i),i=s=a=null},c}function En(e,t){return fn(t,e)}function In(e){return function(){return!e.apply(this,arguments)}}function Tn(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function Mn(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function An(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const On=fn(An,2);function Pn(e,t,n){t=qt(t,n);for(var i,o=nt(e),s=0,r=o.length;s<r;s++)if(t(e[i=o[s]],i,e))return i}function Ln(e){return function(t,n,i){n=qt(n,i);for(var o=et(t),s=e>0?0:o-1;s>=0&&s<o;s+=e)if(n(t[s],s,t))return s;return-1}}const Rn=Ln(1),Nn=Ln(-1);function Dn(e,t,n,i){for(var o=(n=qt(n,i,1))(t),s=0,r=et(e);s<r;){var a=Math.floor((s+r)/2);n(e[a])<o?s=a+1:r=a}return s}function Fn(e,t,n){return function(i,o,s){var r=0,a=et(i);if("number"==typeof s)e>0?r=s>=0?s:Math.max(s+a,r):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return i[s=n(i,o)]===o?s:-1;if(o!=o)return(s=t(se.call(i,r,a),qe))>=0?s+r:-1;for(s=e>0?r:a-1;s>=0&&s<a;s+=e)if(i[s]===o)return s;return-1}}const Bn=Fn(1,Rn,Dn),jn=Fn(-1,Nn);function zn(e,t,n){var i=(yn(e)?Rn:Pn)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Vn(e,t){return zn(e,Vt(t))}function $n(e,t,n){var i,o;if(t=Ut(t,n),yn(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var s=nt(e);for(i=0,o=s.length;i<o;i++)t(e[s[i]],s[i],e)}return e}function Un(e,t,n){t=qt(t,n);for(var i=!yn(e)&&nt(e),o=(i||e).length,s=Array(o),r=0;r<o;r++){var a=i?i[r]:r;s[r]=t(e[a],a,e)}return s}function Hn(e){return function(t,n,i,o){var s=arguments.length>=3;return function(t,n,i,o){var s=!yn(t)&&nt(t),r=(s||t).length,a=e>0?0:r-1;for(o||(i=t[s?s[a]:a],a+=e);a>=0&&a<r;a+=e){var l=s?s[a]:a;i=n(i,t[l],l,t)}return i}(t,Ut(n,o,4),i,s)}}const Wn=Hn(1),qn=Hn(-1);function Gn(e,t,n){var i=[];return t=qt(t,n),$n(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i}function Kn(e,t,n){return Gn(e,In(qt(t)),n)}function Jn(e,t,n){t=qt(t,n);for(var i=!yn(e)&&nt(e),o=(i||e).length,s=0;s<o;s++){var r=i?i[s]:s;if(!t(e[r],r,e))return!1}return!0}function Yn(e,t,n){t=qt(t,n);for(var i=!yn(e)&&nt(e),o=(i||e).length,s=0;s<o;s++){var r=i?i[s]:s;if(t(e[r],r,e))return!0}return!1}function Xn(e,t,n,i){return yn(e)||(e=kt(e)),("number"!=typeof n||i)&&(n=0),Bn(e,t,n)>=0}const Qn=be((function(e,t,n){var i,o;return Ne(t)?o=t:(t=Dt(t),i=t.slice(0,-1),t=t[t.length-1]),Un(e,(function(e){var s=o;if(!s){if(i&&i.length&&(e=Ft(e,i)),null==e)return;s=e[t]}return null==s?s:s.apply(e,n)}))}));function Zn(e,t){return Un(e,$t(t))}function ei(e,t){return Gn(e,Vt(t))}function ti(e,t,n){var i,o,s=-1/0,r=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=yn(e)?e:kt(e)).length;a<l;a++)null!=(i=e[a])&&i>s&&(s=i);else t=qt(t,n),$n(e,(function(e,n,i){((o=t(e,n,i))>r||o===-1/0&&s===-1/0)&&(s=e,r=o)}));return s}function ni(e,t,n){var i,o,s=1/0,r=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=yn(e)?e:kt(e)).length;a<l;a++)null!=(i=e[a])&&i<s&&(s=i);else t=qt(t,n),$n(e,(function(e,n,i){((o=t(e,n,i))<r||o===1/0&&s===1/0)&&(s=e,r=o)}));return s}var ii=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function oi(e){return e?Ve(e)?se.call(e):Ee(e)?e.match(ii):yn(e)?Un(e,zt):kt(e):[]}function si(e,t,n){if(null==t||n)return yn(e)||(e=kt(e)),e[Xt(e.length-1)];var i=oi(e),o=et(i);t=Math.max(Math.min(t,o),0);for(var s=o-1,r=0;r<t;r++){var a=Xt(r,s),l=i[r];i[r]=i[a],i[a]=l}return i.slice(0,t)}function ri(e){return si(e,1/0)}function ai(e,t,n){var i=0;return t=qt(t,n),Zn(Un(e,(function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")}function li(e,t){return function(n,i,o){var s=t?[[],[]]:{};return i=qt(i,o),$n(n,(function(t,o){var r=i(t,o,n);e(s,t,r)})),s}}const ci=li((function(e,t,n){$e(e,n)?e[n].push(t):e[n]=[t]})),ui=li((function(e,t,n){e[n]=t})),di=li((function(e,t,n){$e(e,n)?e[n]++:e[n]=1})),hi=li((function(e,t,n){e[n?0:1].push(t)}),!0);function mi(e){return null==e?0:yn(e)?e.length:nt(e).length}function gi(e,t,n){return t in n}const pi=be((function(e,t){var n={},i=t[0];if(null==e)return n;Ne(i)?(t.length>1&&(i=Ut(i,t[1])),t=dt(e)):(i=gi,t=bn(t,!1,!1),e=Object(e));for(var o=0,s=t.length;o<s;o++){var r=t[o],a=e[r];i(a,r,e)&&(n[r]=a)}return n})),fi=be((function(e,t){var n,i=t[0];return Ne(i)?(i=In(i),t.length>1&&(n=t[1])):(t=Un(bn(t,!1,!1),String),i=function(e,n){return!Xn(t,n)}),pi(e,i,n)}));function vi(e,t,n){return se.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function yi(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:vi(e,e.length-t)}function bi(e,t,n){return se.call(e,null==t||n?1:t)}function Si(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:bi(e,Math.max(0,e.length-t))}function wi(e){return Gn(e,Boolean)}function _i(e,t){return bn(e,t,!1)}const ki=be((function(e,t){return t=bn(t,!0,!0),Gn(e,(function(e){return!Xn(t,e)}))})),Ci=be((function(e,t){return ki(e,t)}));function xi(e,t,n,i){ke(t)||(i=n,n=t,t=!1),null!=n&&(n=qt(n,i));for(var o=[],s=[],r=0,a=et(e);r<a;r++){var l=e[r],c=n?n(l,r,e):l;t&&!n?(r&&s===c||o.push(l),s=c):n?Xn(s,c)||(s.push(c),o.push(l)):Xn(o,l)||o.push(l)}return o}const Ei=be((function(e){return xi(bn(e,!0,!0))}));function Ii(e){for(var t=[],n=arguments.length,i=0,o=et(e);i<o;i++){var s=e[i];if(!Xn(t,s)){var r;for(r=1;r<n&&Xn(arguments[r],s);r++);r===n&&t.push(s)}}return t}function Ti(e){for(var t=e&&ti(e,et).length||0,n=Array(t),i=0;i<t;i++)n[i]=Zn(e,i);return n}const Mi=be(Ti);function Ai(e,t){for(var n={},i=0,o=et(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function Oi(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),s=0;s<i;s++,e+=n)o[s]=e;return o}function Pi(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(se.call(e,i,i+=t));return n}function Li(e,t){return e._chain?st(t).chain():t}function Ri(e){return $n(Et(e),(function(t){var n=st[t]=e[t];st.prototype[t]=function(){var e=[this._wrapped];return oe.apply(e,arguments),Li(this,n.apply(st,e))}})),st}$n(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=te[e];st.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Li(this,n)}})),$n(["concat","join","slice"],(function(e){var t=te[e];st.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Li(this,e)}}));var Ni=Ri(Object.freeze(Object.defineProperty({__proto__:null,VERSION:Z,after:Mn,all:Jn,allKeys:dt,any:Yn,assign:Mt,before:An,bind:vn,bindAll:Sn,chain:gn,chunk:Pi,clone:Lt,collect:Un,compact:wi,compose:Tn,constant:Ge,contains:Xn,countBy:di,create:Pt,debounce:xn,default:st,defaults:At,defer:kn,delay:_n,detect:zn,difference:ki,drop:bi,each:$n,escape:tn,every:Jn,extend:Tt,extendOwn:Mt,filter:Gn,find:zn,findIndex:Rn,findKey:Pn,findLastIndex:Nn,findWhere:Vn,first:yi,flatten:_i,foldl:Wn,foldr:qn,forEach:$n,functions:Et,get:Bt,groupBy:ci,has:jt,head:yi,identity:zt,include:Xn,includes:Xn,indexBy:ui,indexOf:Bn,initial:vi,inject:Wn,intersection:Ii,invert:xt,invoke:Qn,isArguments:He,isArray:Ve,isArrayBuffer:Pe,isBoolean:ke,isDataView:ze,isDate:Te,isElement:Ce,isEmpty:it,isEqual:ut,isError:Ae,isFinite:We,isFunction:Ne,isMap:bt,isMatch:ot,isNaN:qe,isNull:we,isNumber:Ie,isObject:Se,isRegExp:Me,isSet:wt,isString:Ee,isSymbol:Oe,isTypedArray:Ze,isUndefined:_e,isWeakMap:St,isWeakSet:_t,iteratee:Wt,keys:nt,last:Si,lastIndexOf:jn,map:Un,mapObject:Gt,matcher:Vt,matches:Vt,max:ti,memoize:wn,methods:Et,min:ni,mixin:Ri,negate:In,noop:Kt,now:Qt,object:Ai,omit:fi,once:On,pairs:Ct,partial:fn,partition:hi,pick:pi,pluck:Zn,property:$t,propertyOf:Jt,random:Xt,range:Oi,reduce:Wn,reduceRight:qn,reject:Kn,rest:bi,restArguments:be,result:dn,sample:si,select:Gn,shuffle:ri,size:mi,some:Yn,sortBy:ai,sortedIndex:Dn,tail:bi,take:yi,tap:Rt,template:un,templateSettings:on,throttle:Cn,times:Yt,toArray:oi,toPath:Nt,transpose:Ti,unescape:nn,union:Ei,uniq:xi,unique:xi,uniqueId:mn,unzip:Ti,values:kt,where:ei,without:Ci,wrap:En,zip:Mi},Symbol.toStringTag,{value:"Module"})));Ni._=Ni;const Di=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Z,after:Mn,all:Jn,allKeys:dt,any:Yn,assign:Mt,before:An,bind:vn,bindAll:Sn,chain:gn,chunk:Pi,clone:Lt,collect:Un,compact:wi,compose:Tn,constant:Ge,contains:Xn,countBy:di,create:Pt,debounce:xn,default:Ni,defaults:At,defer:kn,delay:_n,detect:zn,difference:ki,drop:bi,each:$n,escape:tn,every:Jn,extend:Tt,extendOwn:Mt,filter:Gn,find:zn,findIndex:Rn,findKey:Pn,findLastIndex:Nn,findWhere:Vn,first:yi,flatten:_i,foldl:Wn,foldr:qn,forEach:$n,functions:Et,get:Bt,groupBy:ci,has:jt,head:yi,identity:zt,include:Xn,includes:Xn,indexBy:ui,indexOf:Bn,initial:vi,inject:Wn,intersection:Ii,invert:xt,invoke:Qn,isArguments:He,isArray:Ve,isArrayBuffer:Pe,isBoolean:ke,isDataView:ze,isDate:Te,isElement:Ce,isEmpty:it,isEqual:ut,isError:Ae,isFinite:We,isFunction:Ne,isMap:bt,isMatch:ot,isNaN:qe,isNull:we,isNumber:Ie,isObject:Se,isRegExp:Me,isSet:wt,isString:Ee,isSymbol:Oe,isTypedArray:Ze,isUndefined:_e,isWeakMap:St,isWeakSet:_t,iteratee:Wt,keys:nt,last:Si,lastIndexOf:jn,map:Un,mapObject:Gt,matcher:Vt,matches:Vt,max:ti,memoize:wn,methods:Et,min:ni,mixin:Ri,negate:In,noop:Kt,now:Qt,object:Ai,omit:fi,once:On,pairs:Ct,partial:fn,partition:hi,pick:pi,pluck:Zn,property:$t,propertyOf:Jt,random:Xt,range:Oi,reduce:Wn,reduceRight:qn,reject:Kn,rest:bi,restArguments:be,result:dn,sample:si,select:Gn,shuffle:ri,size:mi,some:Yn,sortBy:ai,sortedIndex:Dn,tail:bi,take:yi,tap:Rt,template:un,templateSettings:on,throttle:Cn,times:Yt,toArray:oi,toPath:Nt,transpose:Ti,unescape:nn,union:Ei,uniq:xi,unique:xi,uniqueId:mn,unzip:Ti,values:kt,where:ei,without:Ci,wrap:En,zip:Mi},Symbol.toStringTag,{value:"Module"}));var Fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Bi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ji(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var zi={};const Vi=ji(Di);var $i;function Ui(){return $i||($i=1,e=zi,function(t){var n,i="object"==typeof self&&self.self==self&&self||"object"==typeof Fi&&Fi.global==Fi&&Fi,o=Vi;try{n=require("jquery")}catch(s){}!function(e,t,n,i){var o=e.Backbone,s=[].slice;t.VERSION="1.2.1",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,o){return n[t](this[i],e,o)};case 4:return function(e,o,s){return n[t](this[i],e,o,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},a=function(e,t,i){n.each(t,(function(t,o){n[o]&&(e.prototype[o]=r(t,o,i))}))},l=t.Events={},c=/\s+/,u=function(e,t,i,o,s){var r,a=0;if(i&&"object"==typeof i){void 0!==o&&"context"in s&&void 0===s.context&&(s.context=o);for(r=n.keys(i);a<r.length;a++)t=e(t,r[a],i[r[a]],s)}else if(i&&c.test(i))for(r=i.split(c);a<r.length;a++)t=e(t,r[a],o,s);else t=e(t,i,o,s);return t};l.on=function(e,t,n){return d(this,e,t,n)};var d=function(e,t,n,i,o){return e._events=u(h,e._events||{},t,n,{context:i,ctx:e,listening:o}),o&&((e._listeners||(e._listeners={}))[o.id]=o),e};l.listenTo=function(e,t,i){if(!e)return this;var o=e._listenId||(e._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),r=s[o];if(!r){var a=this._listenId||(this._listenId=n.uniqueId("l"));r=s[o]={obj:e,objId:o,id:a,listeningTo:s,count:0}}return d(e,t,i,this,r),this};var h=function(e,t,n,i){if(n){var o=e[t]||(e[t]=[]),s=i.context,r=i.ctx,a=i.listening;a&&a.count++,o.push({callback:n,context:s,ctx:s||r,listening:a})}return e};l.off=function(e,t,n){return this._events?(this._events=u(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,i){var o=this._listeningTo;if(!o)return this;for(var s=e?[e._listenId]:n.keys(o),r=0;r<s.length;r++){var a=o[s[r]];if(!a)break;a.obj.off(t,i,this)}return n.isEmpty(o)&&(this._listeningTo=void 0),this};var m=function(e,t,i,o){if(e){var s,r=0,a=o.context,l=o.listeners;if(t||i||a){for(var c=t?[t]:n.keys(e);r<c.length;r++){var u=e[t=c[r]];if(!u)break;for(var d=[],h=0;h<u.length;h++){var m=u[h];i&&i!==m.callback&&i!==m.callback._callback||a&&a!==m.context?d.push(m):(s=m.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}d.length?e[t]=d:delete e[t]}return n.size(e)?e:void 0}for(var g=n.keys(l);r<g.length;r++)delete l[(s=l[g[r]]).id],delete s.listeningTo[s.objId]}};l.once=function(e,t,i){var o=u(g,{},e,t,n.bind(this.off,this));return this.on(o,void 0,i)},l.listenToOnce=function(e,t,i){var o=u(g,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,o)};var g=function(e,t,i,o){if(i){var s=e[t]=n.once((function(){o(t,s),i.apply(this,arguments)}));s._callback=i}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return u(p,this._events,e,void 0,n),this};var p=function(e,t,n,i){if(e){var o=e[t],s=e.all;o&&s&&(s=s.slice()),o&&f(o,i),s&&f(s,[t].concat(i))}return e},f=function(e,t){var n,i=-1,o=e.length,s=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s,r);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s,r,a);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var v=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var o;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;var s=i.unset,r=i.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[h],n.isEqual(c[h],t)||a.push(h),n.isEqual(d[h],t)?delete u[h]:u[h]=t,s?delete c[h]:c[h]=t;if(!r){a.length&&(this._pending=i);for(var m=0;m<a.length;m++)this.trigger("change:"+a[m],this,c[a[m]],i)}if(l)return this;if(!r)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var o in e){var s=e[o];n.isEqual(t[o],s)||(i[o]=s)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var o=e.parse?t.parse(n,e):n;if(!t.set(o,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,i){var o;null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t;var s=(i=n.extend({validate:!0,parse:!0},i)).wait;if(o&&!s){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var r=this,a=i.success,l=this.attributes;i.success=function(e){r.attributes=l;var t=i.parse?r.parse(e,i):e;if(s&&(t=n.extend({},o,t)),t&&!r.set(t,i))return!1;a&&a.call(i.context,r,e,i),r.trigger("sync",r,e,i)},F(this,i),o&&s&&(this.attributes=n.extend({},l,o));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=o);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){o&&s(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var r=!1;return this.isNew()?n.defer(e.success):(F(this,e),r=this.sync("delete",this,e)),o||s(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||D();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}}),a(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1};n.extend(y.prototype,l,{model:v,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,S))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:n.clone(e);var o=this._removeModels(e,t);return!t.silent&&o&&this.trigger("update",this,t),i?o[0]:o},set:function(e,t){(t=n.defaults({},t,b)).parse&&!this._isModel(e)&&(e=this.parse(e,t));var i,o,s,r,a,l=!n.isArray(e);e=l?e?[e]:[]:e.slice();var c=t.at;null!=c&&(c=+c),c<0&&(c+=this.length+1);for(var u=this.comparator&&null==c&&!1!==t.sort,d=n.isString(this.comparator)?this.comparator:null,h=[],m=[],g={},p=t.add,f=t.merge,v=t.remove,y=!(u||!p||!v)&&[],S=!1,w=0;w<e.length;w++){if(s=e[w],r=this.get(s))v&&(g[r.cid]=!0),f&&s!==r&&(s=this._isModel(s)?s.attributes:s,t.parse&&(s=r.parse(s,t)),r.set(s,t),u&&!a&&r.hasChanged(d)&&(a=!0)),e[w]=r;else if(p){if(!(o=e[w]=this._prepareModel(s,t)))continue;h.push(o),this._addReference(o,t)}(o=r||o)&&(i=this.modelId(o.attributes),!y||!o.isNew()&&g[i]||(y.push(o),S=S||!this.models[w]||o.cid!==this.models[w].cid),g[i]=!0)}if(v){for(w=0;w<this.length;w++)g[(o=this.models[w]).cid]||m.push(o);m.length&&this._removeModels(m,t)}if(h.length||S)if(u&&(a=!0),this.length+=h.length,null!=c)for(w=0;w<h.length;w++)this.models.splice(c+w,0,h[w]);else{y&&(this.models.length=0);var _=y||h;for(w=0;w<_.length;w++)this.models.push(_[w])}if(a&&this.sort({silent:!0}),!t.silent){var k=null!=c?n.clone(t):t;for(w=0;w<h.length;w++)null!=c&&(k.index=c+w),(o=h[w]).trigger("add",o,this,k);(a||S)&&this.trigger("sort",this,t),(h.length||m.length)&&this.trigger("update",this,t)}return l?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){var i=n.matches(e);return this[t?"find":"filter"]((function(e){return i(e.attributes)}))},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){var i=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var o=this,s=t.success;return t.success=function(e,t,n){i&&o.add(e,n),s&&s.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var o=this.get(e[i]);if(o){var s=this.indexOf(o);this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),n.push(o),this._removeReference(o,t)}}return!!n.length&&n},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,i),"change"===e){var o=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);o!==s&&(null!=o&&delete this._byId[o],null!=s&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}}}),a(y,{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3},"models");var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,(function(e){n[e]&&(y.prototype[e]=function(t,i){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,i)})}));var _=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,C)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var o=t.match(k);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,o){var s=x[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=n.result(i,"url")||D()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===r.type||o.emulateJSON||(r.processData=!1);var l=o.error;o.error=function(e,t,n){o.textStatus=t,o.errorThrown=n,l&&l.call(o.context,e,t,n)};var c=o.xhr=t.ajax(n.extend(r,o));return i.trigger("request",i,c,o),c};var x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},I=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,M=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,l,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var s=this;return t.history.route(e,(function(n){var r=s._extractParameters(e,n);!1!==s.execute(o,r,i)&&(s.trigger.apply(s,["route:"+i].concat(r)),s.trigger("route",i,r),t.history.trigger("route",s,i,r))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(I,"(?:$1)?").replace(T,(function(e,t){return t?e:"([^/?]+)"})).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var O=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,R=/#.*$/;O.started=!1,n.extend(O.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(P,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");if(O.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.any(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!O.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(R,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new O;var N=function(e,t){var i,o=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t);var s=function(){this.constructor=i};return s.prototype=o.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=o.prototype,i};v.extend=y.extend=E.extend=_.extend=O.extend=N;var D=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}}}(i,e,o,n)}()),zi;var e}const Hi=Bi(Ui());var Wi,qi,Gi={exports:{}};Wi||(Wi=1,qi=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function n(e,t){if(null!=e){var n=e[t];return"function"==typeof n?e[t]():n}}return e.LocalStorage=window.Store=function(e,t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=e,this.serializer=t||{serialize:function(e){return function(e){return e===Object(e)}(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}};var n=this.localStorage().getItem(this.name);this.records=n&&n.split(",")||[]},function(e,t){for(var n in t)e[n]=t[n]}(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||0===e.id||(e.id=t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(e){this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e));var t=e.id.toString();return function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(this.records,t)||(this.records.push(t),this.save()),this.find(e)},find:function(e){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(e.id)))},findAll:function(){for(var e,t,n=[],i=0;i<this.records.length;i++)e=this.records[i],null!=(t=this.serializer.deserialize(this.localStorage().getItem(this._itemName(e))))&&n.push(t);return n},destroy:function(e){this.localStorage().removeItem(this._itemName(e.id));for(var t=e.id.toString(),n=0;n<this.records.length;n++)this.records[n]===t&&this.records.splice(n,1);return this.save(),e},localStorage:function(){return localStorage},_clear:function(){var e=this.localStorage(),t=new RegExp("^"+this.name+"-");for(var n in e.removeItem(this.name),e)t.test(n)&&e.removeItem(n);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(e){return this.name+"-"+e}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,i,o){var s,r,a=n(i,"localStorage")||n(i.collection,"localStorage"),l=e.$?e.$.Deferred&&e.$.Deferred():e.Deferred&&e.Deferred();try{switch(t){case"read":s=null!=i.id?a.find(i):a.findAll();break;case"create":s=a.create(i);break;case"update":s=a.update(i);break;case"delete":s=a.destroy(i)}}catch(c){r=22===c.code&&0===a._storageSize()?"Private browsing is unsupported":c.message}return s?(o&&o.success&&("0.9.10"===e.VERSION?o.success(i,s,o):o.success(s)),l&&l.resolve(s)):(r=r||"Record Not Found",o&&o.error&&("0.9.10"===e.VERSION?o.error(i,r,o):o.error(r)),l&&l.reject(r)),o&&o.complete&&o.complete(s),l&&l.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t,i){return i&&i.ajaxSync||!n(t,"localStorage")&&!n(t.collection,"localStorage")?e.ajaxSync:e.localSync},e.sync=function(t,n,i){return e.getSyncMethod(n,i).apply(this,[t,n,i])},e.LocalStorage},Gi.exports=qi(Ui()));var Ki,Ji={exports:{}},Yi={exports:{}},Xi={},Qi={};function Zi(){if(Ki)return Qi;Ki=1,Qi.__esModule=!0,Qi.extend=o,Qi.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Qi.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!n.test(e))return e;return e.replace(t,i)},Qi.isEmpty=function(e){return!e&&0!==e||!(!a(e)||0!==e.length)},Qi.createFrame=function(e){var t=o({},e);return t._parent=e,t},Qi.blockParams=function(e,t){return e.path=t,e},Qi.appendContextPath=function(e,t){return(e?e+".":"")+t};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},t=/[&<>"'`=]/g,n=/[&<>"'`=]/;function i(t){return e[t]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;Qi.toString=s;var r=function(e){return"function"==typeof e};r(/x/)&&(Qi.isFunction=r=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),Qi.isFunction=r;var a=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};return Qi.isArray=a,Qi}var eo,to={exports:{}};function no(){return eo||(eo=1,function(e,t){t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(e,t){var o=t&&t.loc,s=void 0,r=void 0,a=void 0,l=void 0;o&&(s=o.start.line,r=o.end.line,a=o.start.column,l=o.end.column,e+=" - "+s+":"+a);for(var c=Error.prototype.constructor.call(this,e),u=0;u<n.length;u++)this[n[u]]=c[n[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{o&&(this.lineNumber=s,this.endLineNumber=r,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=a,this.endColumn=l))}catch(d){}}i.prototype=new Error,t.default=i,e.exports=t.default}(to,to.exports)),to.exports}var io,oo={},so={exports:{}};var ro,ao={exports:{}};var lo,co={exports:{}};var uo,ho={exports:{}};var mo,go={exports:{}};var po,fo={exports:{}};var vo,yo,bo={exports:{}};function So(){if(yo)return oo;function e(e){return e&&e.__esModule?e:{default:e}}yo=1,oo.__esModule=!0,oo.registerDefaultHelpers=function(e){o.default(e),r.default(e),l.default(e),u.default(e),h.default(e),g.default(e),f.default(e)},oo.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var t,n,i=(io||(io=1,function(e,t){t.__esModule=!0;var n=Zi();t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,i){var o=i.inverse,s=i.fn;if(!0===t)return s(this);if(!1===t||null==t)return o(this);if(n.isArray(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):o(this);if(i.data&&i.ids){var r=n.createFrame(i.data);r.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:r}}return s(t,i)}))},e.exports=t.default}(so,so.exports)),so.exports),o=e(i),s=(ro||(ro=1,function(e,t){t.__esModule=!0;var n,i=Zi(),o=(n=no())&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var n,s=t.fn,r=t.inverse,a=0,l="",c=void 0,u=void 0;function d(t,n,o){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!o,u&&(c.contextPath=u+t)),l+=s(e[t],{data:c,blockParams:i.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(c=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;a<h;a++)a in e&&d(a,a,a===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var m=[],g=e[Symbol.iterator](),p=g.next();!p.done;p=g.next())m.push(p.value);for(h=(e=m).length;a<h;a++)d(a,a,a===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&d(n,a-1),n=e,a++})),void 0!==n&&d(n,a-1,!0);return 0===a&&(l=r(this)),l}))},e.exports=t.default}(ao,ao.exports)),ao.exports),r=e(s),a=(lo||(lo=1,function(e,t){t.__esModule=!0;var n,i=(n=no())&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default}(co,co.exports)),co.exports),l=e(a),c=(uo||(uo=1,function(e,t){t.__esModule=!0;var n,i=Zi(),o=(n=no())&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default}(ho,ho.exports)),ho.exports),u=e(c),d=(mo||(mo=1,t=go,(n=go.exports).__esModule=!0,n.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)}))},t.exports=n.default),go.exports),h=e(d),m=function(){return po||(po=1,e=fo,(t=fo.exports).__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default),fo.exports;var e,t}(),g=e(m),p=(vo||(vo=1,function(e,t){t.__esModule=!0;var n,i=Zi(),o=(n=no())&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var s=t.data;return t.data&&t.ids&&((s=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:s,blockParams:i.blockParams([e],[s&&s.contextPath])})}))},e.exports=t.default}(bo,bo.exports)),bo.exports),f=e(p);return oo}var wo,_o,ko={},Co={exports:{}};function xo(){if(_o)return ko;_o=1,ko.__esModule=!0,ko.registerDefaultDecorators=function(e){n.default(e)};var e,t=(wo||(wo=1,function(e,t){t.__esModule=!0;var n=Zi();t.default=function(e){e.registerDecorator("inline",(function(e,t,i,o){var s=e;return t.partials||(t.partials={},s=function(o,s){var r=i.partials;i.partials=n.extend({},r,t.partials);var a=e(o,s);return i.partials=r,a}),t.partials[o.args[0]]=o.fn,s}))},e.exports=t.default}(Co,Co.exports)),Co.exports),n=(e=t)&&e.__esModule?e:{default:e};return ko}var Eo,Io={exports:{}};function To(){return Eo||(Eo=1,function(e,t){t.__esModule=!0;var n=Zi(),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];console[t].apply(console,o)}}};t.default=i,e.exports=t.default}(Io,Io.exports)),Io.exports}var Mo,Ao,Oo,Po={},Lo={};function Ro(){if(Ao)return Po;Ao=1,Po.__esModule=!0,Po.createProtoAccessControl=function(e){var n=Object.create(null);n.constructor=!1,n.__defineGetter__=!1,n.__defineSetter__=!1,n.__lookupGetter__=!1;var i=Object.create(null);return i.__proto__=!1,{properties:{whitelist:t.createNewLookupObject(i,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:t.createNewLookupObject(n,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},Po.resultIsAllowed=function(e,t,n){return s("function"==typeof e?t.methods:t.properties,n)},Po.resetLoggedProperties=function(){Object.keys(o).forEach((function(e){delete o[e]}))};var e,t=function(){if(Mo)return Lo;Mo=1,Lo.__esModule=!0,Lo.createNewLookupObject=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.extend.apply(void 0,[Object.create(null)].concat(n))};var e=Zi();return Lo}(),n=To(),i=(e=n)&&e.__esModule?e:{default:e},o=Object.create(null);function s(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==o[e]&&(o[e]=!0,i.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}return Po}function No(){if(Oo)return Xi;function e(e){return e&&e.__esModule?e:{default:e}}Oo=1,Xi.__esModule=!0,Xi.HandlebarsEnvironment=l;var t=Zi(),n=e(no()),i=So(),o=xo(),s=e(To()),r=Ro();Xi.VERSION="4.7.8";Xi.COMPILER_REVISION=8;Xi.LAST_COMPATIBLE_COMPILER_REVISION=7;Xi.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var a="[object Object]";function l(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},i.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}l.prototype={constructor:l,logger:s.default,log:s.default.log,registerHelper:function(e,i){if(t.toString.call(e)===a){if(i)throw new n.default("Arg not supported with multiple helpers");t.extend(this.helpers,e)}else this.helpers[e]=i},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,i){if(t.toString.call(e)===a)t.extend(this.partials,e);else{if(void 0===i)throw new n.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=i}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,i){if(t.toString.call(e)===a){if(i)throw new n.default("Arg not supported with multiple decorators");t.extend(this.decorators,e)}else this.decorators[e]=i},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){r.resetLoggedProperties()}};var c=s.default.log;return Xi.log=c,Xi.createFrame=t.createFrame,Xi.logger=s.default,Xi}var Do,Fo={exports:{}};var Bo,jo,zo={},Vo={};function $o(){if(jo)return zo;jo=1,zo.__esModule=!0,zo.checkRevision=function(e){var t=e&&e[0]||1,n=o.COMPILER_REVISION;if(t>=o.LAST_COMPATIBLE_COMPILER_REVISION&&t<=o.COMPILER_REVISION)return;if(t<o.LAST_COMPATIBLE_COMPILER_REVISION){var s=o.REVISION_CHANGES[n],r=o.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+r+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},zo.template=function(e,n){if(!n)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,n.VM.checkRevision(e.compiler);var c=e.compiler&&7===e.compiler[0];var d={strict:function(e,t,n){if(!e||!(t in e))throw new i.default('"'+t+'" not defined in '+e,{loc:n});return d.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||a.resultIsAllowed(n,d.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&d.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:t.escapeExpression,invokePartial:function(o,s,r){r.hash&&(s=t.extend({},s,r.hash),r.ids&&(r.ids[0]=!0)),o=n.VM.resolvePartial.call(this,o,s,r);var a=t.extend({},r,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=n.VM.invokePartial.call(this,o,s,a);if(null==l&&n.compile&&(r.partials[r.name]=n.compile(o,e.compilerOptions,n),l=r.partials[r.name](s,a)),null!=l){if(r.indent){for(var c=l.split("\n"),u=0,d=c.length;u<d&&(c[u]||u+1!==d);u++)c[u]=r.indent+c[u];l=c.join("\n")}return l}throw new i.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,o){var s=this.programs[e],r=this.fn(e);return t||o||i||n?s=l(this,e,r,t,n,i,o):s||(s=this.programs[e]=l(this,e,r)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,n){var i=e||n;return e&&n&&e!==n&&(i=t.extend({},n,e)),i},nullContext:Object.seal({}),noop:n.VM.noop,compilerInfo:e.compiler};function h(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;h._setup(n),!n.partial&&e.useData&&(i=function(e,t){t&&"root"in t||((t=t?o.createFrame(t):{}).root=e);return t}(t,i));var s=void 0,r=e.useBlockParams?[]:void 0;function a(t){return""+e.main(d,t,d.helpers,d.partials,i,r,s)}return e.useDepths&&(s=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(a=u(e.main,a,d,n.depths||[],i,r))(t,n)}return h.isTop=!0,h._setup=function(i){if(i.partial)d.protoAccessControl=i.protoAccessControl,d.helpers=i.helpers,d.partials=i.partials,d.decorators=i.decorators,d.hooks=i.hooks;else{var o=t.extend({},n.helpers,i.helpers);!function(e,n){Object.keys(e).forEach((function(i){var o=e[i];e[i]=function(e,n){var i=n.lookupProperty;return r.wrapHelper(e,(function(e){return t.extend({lookupProperty:i},e)}))}(o,n)}))}(o,d),d.helpers=o,e.usePartial&&(d.partials=d.mergeIfNeeded(i.partials,n.partials)),(e.usePartial||e.useDecorators)&&(d.decorators=t.extend({},n.decorators,i.decorators)),d.hooks={},d.protoAccessControl=a.createProtoAccessControl(i);var l=i.allowCallsToHelperMissing||c;s.moveHelperToHooks(d,"helperMissing",l),s.moveHelperToHooks(d,"blockHelperMissing",l)}},h._child=function(t,n,o,s){if(e.useBlockParams&&!o)throw new i.default("must pass block params");if(e.useDepths&&!s)throw new i.default("must pass parent depths");return l(d,t,e[t],n,0,o,s)},h},zo.wrapProgram=l,zo.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},zo.invokePartial=function(e,n,s){var r=s.data&&s.data["partial-block"];s.partial=!0,s.ids&&(s.data.contextPath=s.ids[0]||s.data.contextPath);var a=void 0;s.fn&&s.fn!==c&&function(){s.data=o.createFrame(s.data);var e=s.fn;a=s.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=o.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(s.partials=t.extend({},s.partials,e.partials))}();void 0===e&&a&&(e=a);if(void 0===e)throw new i.default("The partial "+s.name+" could not be found");if(e instanceof Function)return e(n,s)},zo.noop=c;var e,t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(Zi()),n=no(),i=(e=n)&&e.__esModule?e:{default:e},o=No(),s=So(),r=(Bo||(Bo=1,Vo.__esModule=!0,Vo.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}),Vo),a=Ro();function l(e,t,n,i,o,s,r){function a(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r;return!r||t==r[0]||t===e.nullContext&&null===r[0]||(a=[t].concat(r)),n(e,t,e.helpers,e.partials,o.data||i,s&&[o.blockParams].concat(s),a)}return(a=u(n,a,e,r,i,s)).program=t,a.depth=r?r.length:0,a.blockParams=o||0,a}function c(){return""}function u(e,n,i,o,s,r){if(e.decorator){var a={};n=e.decorator(n,a,i,o&&o[0],s,r,o),t.extend(n,a)}return n}return zo}var Uo,Ho,Wo={exports:{}};function qo(){return Uo||(Uo=1,e=Wo,(t=Wo.exports).__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default),Wo.exports;var e,t}function Go(){return Ho||(Ho=1,function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o=i(No()),s=(Do||(Do=1,function(e,t){function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default}(Fo,Fo.exports)),Fo.exports),r=n(s),a=n(no()),l=i(Zi()),c=i($o()),u=n(qo());function d(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=r.default,e.Exception=a.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var h=d();h.create=d,u.default(h),h.default=h,t.default=h,e.exports=t.default}(Yi,Yi.exports)),Yi.exports}var Ko,Jo={exports:{}};function Yo(){return Ko||(Ko=1,function(e,t){t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default}(Jo,Jo.exports)),Jo.exports}var Xo,Qo={},Zo={exports:{}};var es,ts,ns={exports:{}},is={exports:{}};function os(){return es||(es=1,function(e,t){t.__esModule=!0;var n,i=no(),o=(n=i)&&n.__esModule?n:{default:n};function s(){this.parents=[]}function r(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){r.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function l(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}s.prototype={constructor:s,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!s.prototype[n.type])throw new o.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new o.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:r,Decorator:r,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(e){l.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=s,e.exports=t.default}(is,is.exports)),is.exports}var ss,rs,as={};function ls(){if(rs)return Qo;function e(e){return e&&e.__esModule?e:{default:e}}rs=1,Qo.__esModule=!0,Qo.parseWithoutProcessing=l,Qo.parse=function(e,t){var n=l(e,t);return new o.default(t).accept(n)};var t=(Xo||(Xo=1,function(e,t){t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,i,o,s,r){var a=s.length-1;switch(o){case 1:return s[a-1];case 2:this.$=i.prepareProgram(s[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(s[a]),strip:i.stripFlags(s[a],s[a]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 16:case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:i.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var l=i.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),c=i.prepareProgram([l],s[a-1].loc);c.chained=!0,this.$={strip:s[a-2].strip,program:c,chain:!0};break;case 21:this.$={path:s[a-1],strip:i.stripFlags(s[a-2],s[a])};break;case 22:case 23:this.$=i.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],i.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:i.stripFlags(s[a-4],s[a]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:i.stripFlags(s[a-4],s[a])};break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(s[a-2]),value:s[a],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(s[a-1]);break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 42:this.$=i.preparePath(!0,s[a],this._$);break;case 43:this.$=i.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:i.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:i.id(s[a]),original:s[a]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:s[a-1].push(s[a]);break;case 98:case 100:this.$=[s[a]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],o=[],s=this.table,r="",a=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;o.push(c);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,h,m,g,p,f,v,y,b,S={};;){if(h=n[n.length-1],this.defaultActions[h]?m=this.defaultActions[h]:(null==d&&(b=void 0,"number"!=typeof(b=t.lexer.lex()||1)&&(b=t.symbols_[b]||b),d=b),m=s[h]&&s[h][d]),void 0===m||!m.length||!m[0]){var w="";for(p in y=[],s[h])this.terminals_[p]&&p>2&&y.push("'"+this.terminals_[p]+"'");w=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:c,expected:y})}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+h+", token: "+d);switch(m[0]){case 1:n.push(d),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),d=null,l=this.lexer.yyleng,r=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc;break;case 2:if(f=this.productions_[m[1]][1],S.$=i[i.length-f],S._$={first_line:o[o.length-(f||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(f||1)].first_column,last_column:o[o.length-1].last_column},u&&(S._$.range=[o[o.length-(f||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(S,r,l,a,this.yy,m[1],i,o)))return g;f&&(n=n.slice(0,-1*f*2),i=i.slice(0,-1*f),o=o.slice(0,-1*f)),n.push(this.productions_[m[1]][0]),i.push(S.$),o.push(S._$),v=s[n[n.length-2]][n[n.length-1]],n.push(v);break;case 3:return!0}}return!0}},t={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,i,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(!(n=this._input.match(this.rules[s[r]]))||t&&!(n[0].length>t[0].length)||(t=n,i=r,this.options.flex));r++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,i){function o(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=n,e.exports=t.default}(Zo,Zo.exports)),Zo.exports),n=e(t),i=(ts||(ts=1,function(e,t){t.__esModule=!0;var n,i=(n=os())&&n.__esModule?n:{default:n};function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],o=e[t-2];return i?"ContentStatement"===i.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function r(e,t,n){void 0===t&&(t=-1);var i=e[t+1],o=e[t+2];return i?"ContentStatement"===i.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function a(e,t,n){var i=e[null==t?0:t+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var o=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==o}}function l(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var o=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==o,i.leftStripped}}o.prototype=new i.default,o.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=e.body,o=0,c=i.length;o<c;o++){var u=i[o],d=this.accept(u);if(d){var h=s(i,o,n),m=r(i,o,n),g=d.openStandalone&&h,p=d.closeStandalone&&m,f=d.inlineStandalone&&h&&m;d.close&&a(i,o,!0),d.open&&l(i,o,!0),t&&f&&(a(i,o),l(i,o)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(i[o-1].original)[1])),t&&g&&(a((u.program||u.inverse).body),l(i,o)),t&&p&&(a(i,o),l((u.inverse||u.program).body))}}return e},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,i=n,o=n;if(n&&n.chained)for(i=n.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:r(t.body),closeStandalone:s((i||t).body)};if(e.openStrip.close&&a(t.body,null,!0),n){var u=e.inverseStrip;u.open&&l(t.body,null,!0),u.close&&a(i.body,null,!0),e.closeStrip.open&&l(o.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&r(i.body)&&(l(t.body),a(i.body))}else e.closeStrip.open&&l(t.body,null,!0);return c},o.prototype.Decorator=o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=o,e.exports=t.default}(ns,ns.exports)),ns.exports),o=e(i),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(function(){if(ss)return as;ss=1,as.__esModule=!0,as.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},as.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},as.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},as.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},as.preparePath=function(e,t,i){i=this.locInfo(i);for(var o=e?"@":"",s=[],r=0,a=0,l=t.length;a<l;a++){var c=t[a].part,u=t[a].original!==c;if(o+=(t[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)s.push(c);else{if(s.length>0)throw new n.default("Invalid path: "+o,{loc:i});".."===c&&r++}}return{type:"PathExpression",data:e,depth:r,parts:s,original:o,loc:i}},as.prepareMustache=function(e,t,n,i,o,s){var r=i.charAt(3)||i.charAt(2),a="{"!==r&&"&"!==r;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:a,strip:o,loc:this.locInfo(s)}},as.prepareRawBlock=function(e,t,n,o){i(e,n);var s={type:"Program",body:t,strip:{},loc:o=this.locInfo(o)};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:s,openStrip:{},inverseStrip:{},closeStrip:{},loc:o}},as.prepareBlock=function(e,t,o,s,r,a){s&&s.path&&i(e,s);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var c=void 0,u=void 0;if(o){if(l)throw new n.default("Unexpected inverse block on decorator",o);o.chain&&(o.program.body[0].closeStrip=s.strip),u=o.strip,c=o.program}return r&&(r=c,c=t,t=r),{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:c,openStrip:e.strip,inverseStrip:u,closeStrip:s&&s.strip,loc:this.locInfo(a)}},as.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,i=e[e.length-1].loc;n&&i&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},as.preparePartialBlock=function(e,t,n,o){return i(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(o)}};var e,t=no(),n=(e=t)&&e.__esModule?e:{default:e};function i(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var i={loc:e.path.loc};throw new n.default(e.path.original+" doesn't match "+t,i)}}return as}()),r=Zi();Qo.parser=n.default;var a={};function l(e,t){return"Program"===e.type?e:(n.default.yy=a,a.locInfo=function(e){return new a.SourceLocation(t&&t.srcName,e)},n.default.parse(e))}return r.extend(a,s),Qo}var cs,us={};var ds,hs,ms={exports:{}},gs={exports:{}},ps={},fs={},vs={},ys={};function bs(){if(hs)return vs;hs=1;var e=function(){if(ds)return ys;ds=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return ys.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},ys.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1},ys}();return vs.encode=function(t){var n,i="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{n=31&o,(o>>>=5)>0&&(n|=32),i+=e.encode(n)}while(o>0);return i},vs.decode=function(t,n,i){var o,s,r,a,l=t.length,c=0,u=0;do{if(n>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=e.decode(t.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+t.charAt(n-1));o=!!(32&s),c+=(s&=31)<<u,u+=5}while(o);i.value=(a=(r=c)>>1,1&~r?a:-a),i.rest=n},vs}var Ss,ws={};function _s(){return Ss||(Ss=1,function(e){e.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(e){var n=e.match(t);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(t){var n=t,s=i(t);if(s){if(!s.path)return t;n=s.path}for(var r,a=e.isAbsolute(n),l=n.split(/\/+/),c=0,u=l.length-1;u>=0;u--)"."===(r=l[u])?l.splice(u,1):".."===r?c++:c>0&&(""===r?(l.splice(u+1,c),c=0):(l.splice(u,2),c--));return""===(n=l.join("/"))&&(n=a?"/":"."),s?(s.path=n,o(s)):n}function r(e,t){""===e&&(e="."),""===t&&(t=".");var r=i(t),a=i(e);if(a&&(e=a.path||"/"),r&&!r.scheme)return a&&(r.scheme=a.scheme),o(r);if(r||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var l="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=l,o(a)):l}e.urlParse=i,e.urlGenerate=o,e.normalize=s,e.join=r,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function u(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=a?l:function(e){return c(e)?"$"+e:e},e.fromSetString=a?l:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,n){var i=u(e.source,t.source);return 0!==i||0!==(i=e.originalLine-t.originalLine)||0!==(i=e.originalColumn-t.originalColumn)||n||0!==(i=e.generatedColumn-t.generatedColumn)||0!==(i=e.generatedLine-t.generatedLine)?i:u(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,n){var i=e.generatedLine-t.generatedLine;return 0!==i||0!==(i=e.generatedColumn-t.generatedColumn)||n||0!==(i=u(e.source,t.source))||0!==(i=e.originalLine-t.originalLine)||0!==(i=e.originalColumn-t.originalColumn)?i:u(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=u(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:u(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var a=i(n);if(!a)throw new Error("sourceMapURL could not be parsed");if(a.path){var l=a.path.lastIndexOf("/");l>=0&&(a.path=a.path.substring(0,l+1))}t=r(o(a),t)}return s(t)}}(ws)),ws}var ks,Cs={};function xs(){if(ks)return Cs;ks=1;var e=_s(),t=Object.prototype.hasOwnProperty,n="undefined"!=typeof Map;function i(){this._array=[],this._set=n?new Map:Object.create(null)}return i.fromArray=function(e,t){for(var n=new i,o=0,s=e.length;o<s;o++)n.add(e[o],t);return n},i.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(i,o){var s=n?i:e.toSetString(i),r=n?this.has(i):t.call(this._set,s),a=this._array.length;r&&!o||this._array.push(i),r||(n?this._set.set(i,a):this._set[s]=a)},i.prototype.has=function(i){if(n)return this._set.has(i);var o=e.toSetString(i);return t.call(this._set,o)},i.prototype.indexOf=function(i){if(n){var o=this._set.get(i);if(o>=0)return o}else{var s=e.toSetString(i);if(t.call(this._set,s))return this._set[s]}throw new Error('"'+i+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},Cs.ArraySet=i,Cs}var Es,Is,Ts={};function Ms(){if(Es)return Ts;Es=1;var e=_s();function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},t.prototype.add=function(t){var n,i,o,s,r,a;n=this._last,i=t,o=n.generatedLine,s=i.generatedLine,r=n.generatedColumn,a=i.generatedColumn,s>o||s==o&&a>=r||e.compareByGeneratedPositionsInflated(n,i)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Ts.MappingList=t,Ts}function As(){if(Is)return fs;Is=1;var e=bs(),t=_s(),n=xs().ArraySet,i=Ms().MappingList;function o(e){e||(e={}),this._file=t.getArg(e,"file",null),this._sourceRoot=t.getArg(e,"sourceRoot",null),this._skipValidation=t.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new i,this._sourcesContents=null}return o.prototype._version=3,o.fromSourceMap=function(e){var n=e.sourceRoot,i=new o({file:e.file,sourceRoot:n});return e.eachMapping((function(e){var o={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(o.source=e.source,null!=n&&(o.source=t.relative(n,o.source)),o.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(o.name=e.name)),i.addMapping(o)})),e.sources.forEach((function(o){var s=o;null!==n&&(s=t.relative(n,o)),i._sources.has(s)||i._sources.add(s);var r=e.sourceContentFor(o);null!=r&&i.setSourceContent(o,r)})),i},o.prototype.addMapping=function(e){var n=t.getArg(e,"generated"),i=t.getArg(e,"original",null),o=t.getArg(e,"source",null),s=t.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,i,o,s),null!=o&&(o=String(o),this._sources.has(o)||this._sources.add(o)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:null!=i&&i.line,originalColumn:null!=i&&i.column,source:o,name:s})},o.prototype.setSourceContent=function(e,n){var i=e;null!=this._sourceRoot&&(i=t.relative(this._sourceRoot,i)),null!=n?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(i)]=n):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(i)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},o.prototype.applySourceMap=function(e,i,o){var s=i;if(null==i){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');s=e.file}var r=this._sourceRoot;null!=r&&(s=t.relative(r,s));var a=new n,l=new n;this._mappings.unsortedForEach((function(n){if(n.source===s&&null!=n.originalLine){var i=e.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=i.source&&(n.source=i.source,null!=o&&(n.source=t.join(o,n.source)),null!=r&&(n.source=t.relative(r,n.source)),n.originalLine=i.line,n.originalColumn=i.column,null!=i.name&&(n.name=i.name))}var c=n.source;null==c||a.has(c)||a.add(c);var u=n.name;null==u||l.has(u)||l.add(u)}),this),this._sources=a,this._names=l,e.sources.forEach((function(n){var i=e.sourceContentFor(n);null!=i&&(null!=o&&(n=t.join(o,n)),null!=r&&(n=t.relative(r,n)),this.setSourceContent(n,i))}),this)},o.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},o.prototype._serializeMappings=function(){for(var n,i,o,s,r=0,a=1,l=0,c=0,u=0,d=0,h="",m=this._mappings.toArray(),g=0,p=m.length;g<p;g++){if(n="",(i=m[g]).generatedLine!==a)for(r=0;i.generatedLine!==a;)n+=";",a++;else if(g>0){if(!t.compareByGeneratedPositionsInflated(i,m[g-1]))continue;n+=","}n+=e.encode(i.generatedColumn-r),r=i.generatedColumn,null!=i.source&&(s=this._sources.indexOf(i.source),n+=e.encode(s-d),d=s,n+=e.encode(i.originalLine-1-c),c=i.originalLine-1,n+=e.encode(i.originalColumn-l),l=i.originalColumn,null!=i.name&&(o=this._names.indexOf(i.name),n+=e.encode(o-u),u=o)),h+=n}return h},o.prototype._generateSourcesContent=function(e,n){return e.map((function(e){if(!this._sourcesContents)return null;null!=n&&(e=t.relative(n,e));var i=t.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null}),this)},o.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},o.prototype.toString=function(){return JSON.stringify(this.toJSON())},fs.SourceMapGenerator=o,fs}var Os,Ps={},Ls={};function Rs(){return Os||(Os=1,function(e){function t(n,i,o,s,r,a){var l=Math.floor((i-n)/2)+n,c=r(o,s[l],!0);return 0===c?l:c>0?i-l>1?t(l,i,o,s,r,a):a==e.LEAST_UPPER_BOUND?i<s.length?i:-1:l:l-n>1?t(n,l,o,s,r,a):a==e.LEAST_UPPER_BOUND?l:n<0?-1:n}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(n,i,o,s){if(0===i.length)return-1;var r=t(-1,i.length,n,i,o,s||e.GREATEST_LOWER_BOUND);if(r<0)return-1;for(;r-1>=0&&0===o(i[r],i[r-1],!0);)--r;return r}}(Ls)),Ls}var Ns,Ds,Fs={};function Bs(){if(Ns)return Fs;function e(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function t(n,i,o,s){if(o<s){var r=o-1;e(n,(u=o,d=s,Math.round(u+Math.random()*(d-u))),s);for(var a=n[s],l=o;l<s;l++)i(n[l],a)<=0&&e(n,r+=1,l);e(n,r+1,l);var c=r+1;t(n,i,o,c-1),t(n,i,c+1,s)}var u,d}return Ns=1,Fs.quickSort=function(e,n){t(e,n,0,e.length-1)},Fs}var js,zs,Vs,$s,Us,Hs={};function Ws(){return zs||(zs=1,ps.SourceMapGenerator=As().SourceMapGenerator,ps.SourceMapConsumer=function(){if(Ds)return Ps;Ds=1;var e=_s(),t=Rs(),n=xs().ArraySet,i=bs(),o=Bs().quickSort;function s(t,n){var i=t;return"string"==typeof t&&(i=e.parseSourceMapInput(t)),null!=i.sections?new l(i,n):new r(i,n)}function r(t,i){var o=t;"string"==typeof t&&(o=e.parseSourceMapInput(t));var s=e.getArg(o,"version"),r=e.getArg(o,"sources"),a=e.getArg(o,"names",[]),l=e.getArg(o,"sourceRoot",null),c=e.getArg(o,"sourcesContent",null),u=e.getArg(o,"mappings"),d=e.getArg(o,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);l&&(l=e.normalize(l)),r=r.map(String).map(e.normalize).map((function(t){return l&&e.isAbsolute(l)&&e.isAbsolute(t)?e.relative(l,t):t})),this._names=n.fromArray(a.map(String),!0),this._sources=n.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map((function(t){return e.computeSourceURL(l,t,i)})),this.sourceRoot=l,this.sourcesContent=c,this._mappings=u,this._sourceMapURL=i,this.file=d}function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function l(t,i){var o=t;"string"==typeof t&&(o=e.parseSourceMapInput(t));var r=e.getArg(o,"version"),a=e.getArg(o,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new n,this._names=new n;var l={line:-1,column:0};this._sections=a.map((function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=e.getArg(t,"offset"),o=e.getArg(n,"line"),r=e.getArg(n,"column");if(o<l.line||o===l.line&&r<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=n,{generatedOffset:{generatedLine:o+1,generatedColumn:r+1},consumer:new s(e.getArg(t,"map"),i)}}))}return s.fromSourceMap=function(e,t){return r.fromSourceMap(e,t)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},s.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(t,n,i){var o,r=n||null;switch(i||s.GENERATED_ORDER){case s.GENERATED_ORDER:o=this._generatedMappings;break;case s.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map((function(t){var n=null===t.source?null:this._sources.at(t.source);return{source:n=e.computeSourceURL(a,n,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}}),this).forEach(t,r)},s.prototype.allGeneratedPositionsFor=function(n){var i=e.getArg(n,"line"),o={source:e.getArg(n,"source"),originalLine:i,originalColumn:e.getArg(n,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var s=[],r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(r>=0){var a=this._originalMappings[r];if(void 0===n.column)for(var l=a.originalLine;a&&a.originalLine===l;)s.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++r];else for(var c=a.originalColumn;a&&a.originalLine===i&&a.originalColumn==c;)s.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++r]}return s},Ps.SourceMapConsumer=s,r.prototype=Object.create(s.prototype),r.prototype.consumer=s,r.prototype._findSourceIndex=function(t){var n,i=t;if(null!=this.sourceRoot&&(i=e.relative(this.sourceRoot,i)),this._sources.has(i))return this._sources.indexOf(i);for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1},r.fromSourceMap=function(t,i){var s=Object.create(r.prototype),l=s._names=n.fromArray(t._names.toArray(),!0),c=s._sources=n.fromArray(t._sources.toArray(),!0);s.sourceRoot=t._sourceRoot,s.sourcesContent=t._generateSourcesContent(s._sources.toArray(),s.sourceRoot),s.file=t._file,s._sourceMapURL=i,s._absoluteSources=s._sources.toArray().map((function(t){return e.computeSourceURL(s.sourceRoot,t,i)}));for(var u=t._mappings.toArray().slice(),d=s.__generatedMappings=[],h=s.__originalMappings=[],m=0,g=u.length;m<g;m++){var p=u[m],f=new a;f.generatedLine=p.generatedLine,f.generatedColumn=p.generatedColumn,p.source&&(f.source=c.indexOf(p.source),f.originalLine=p.originalLine,f.originalColumn=p.originalColumn,p.name&&(f.name=l.indexOf(p.name)),h.push(f)),d.push(f)}return o(s.__originalMappings,e.compareByOriginalPositions),s},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),r.prototype._parseMappings=function(t,n){for(var s,r,l,c,u,d=1,h=0,m=0,g=0,p=0,f=0,v=t.length,y=0,b={},S={},w=[],_=[];y<v;)if(";"===t.charAt(y))d++,y++,h=0;else if(","===t.charAt(y))y++;else{for((s=new a).generatedLine=d,c=y;c<v&&!this._charIsMappingSeparator(t,c);c++);if(l=b[r=t.slice(y,c)])y+=r.length;else{for(l=[];y<c;)i.decode(t,y,S),u=S.value,y=S.rest,l.push(u);if(2===l.length)throw new Error("Found a source, but no line and column");if(3===l.length)throw new Error("Found a source and line, but no column");b[r]=l}s.generatedColumn=h+l[0],h=s.generatedColumn,l.length>1&&(s.source=p+l[1],p+=l[1],s.originalLine=m+l[2],m=s.originalLine,s.originalLine+=1,s.originalColumn=g+l[3],g=s.originalColumn,l.length>4&&(s.name=f+l[4],f+=l[4])),_.push(s),"number"==typeof s.originalLine&&w.push(s)}o(_,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=_,o(w,e.compareByOriginalPositions),this.__originalMappings=w},r.prototype._findMapping=function(e,n,i,o,s,r){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return t.search(e,n,s,r)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(t){var n={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},i=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(i>=0){var o=this._generatedMappings[i];if(o.generatedLine===n.generatedLine){var r=e.getArg(o,"source",null);null!==r&&(r=this._sources.at(r),r=e.computeSourceURL(this.sourceRoot,r,this._sourceMapURL));var a=e.getArg(o,"name",null);return null!==a&&(a=this._names.at(a)),{source:r,line:e.getArg(o,"originalLine",null),column:e.getArg(o,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},r.prototype.sourceContentFor=function(t,n){if(!this.sourcesContent)return null;var i=this._findSourceIndex(t);if(i>=0)return this.sourcesContent[i];var o,s=t;if(null!=this.sourceRoot&&(s=e.relative(this.sourceRoot,s)),null!=this.sourceRoot&&(o=e.urlParse(this.sourceRoot))){var r=s.replace(/^file:\/\//,"");if("file"==o.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!o.path||"/"==o.path)&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(n)return null;throw new Error('"'+s+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(t){var n=e.getArg(t,"source");if((n=this._findSourceIndex(n))<0)return{line:null,column:null,lastColumn:null};var i={source:n,originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},o=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(o>=0){var r=this._originalMappings[o];if(r.source===i.source)return{line:e.getArg(r,"generatedLine",null),column:e.getArg(r,"generatedColumn",null),lastColumn:e.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Ps.BasicSourceMapConsumer=r,l.prototype=Object.create(s.prototype),l.prototype.constructor=s,l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),l.prototype.originalPositionFor=function(n){var i={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},o=t.search(i,this._sections,(function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn})),s=this._sections[o];return s?s.consumer.originalPositionFor({line:i.generatedLine-(s.generatedOffset.generatedLine-1),column:i.generatedColumn-(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:n.bias}):{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},l.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n];if(-1!==i.consumer._findSourceIndex(e.getArg(t,"source"))){var o=i.consumer.generatedPositionFor(t);if(o)return{line:o.line+(i.generatedOffset.generatedLine-1),column:o.column+(i.generatedOffset.generatedLine===o.line?i.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},l.prototype._parseMappings=function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var s=this._sections[i],r=s.consumer._generatedMappings,a=0;a<r.length;a++){var l=r[a],c=s.consumer._sources.at(l.source);c=e.computeSourceURL(s.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=s.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(s.generatedOffset.generatedLine===l.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}o(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),o(this.__originalMappings,e.compareByOriginalPositions)},Ps.IndexedSourceMapConsumer=l,Ps}().SourceMapConsumer,ps.SourceNode=function(){if(js)return Hs;js=1;var e=As().SourceMapGenerator,t=_s(),n=/(\r?\n)/,i="$$$isSourceNode$$$";function o(e,t,n,o,s){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==s?null:s,this[i]=!0,null!=o&&this.add(o)}return o.fromStringWithSourceMap=function(e,i,s){var r=new o,a=e.split(n),l=0,c=function(){return e()+(e()||"");function e(){return l<a.length?a[l++]:void 0}},u=1,d=0,h=null;return i.eachMapping((function(e){if(null!==h){if(!(u<e.generatedLine)){var t=(n=a[l]||"").substr(0,e.generatedColumn-d);return a[l]=n.substr(e.generatedColumn-d),d=e.generatedColumn,m(h,t),void(h=e)}m(h,c()),u++,d=0}for(;u<e.generatedLine;)r.add(c()),u++;if(d<e.generatedColumn){var n=a[l]||"";r.add(n.substr(0,e.generatedColumn)),a[l]=n.substr(e.generatedColumn),d=e.generatedColumn}h=e}),this),l<a.length&&(h&&m(h,c()),r.add(a.splice(l).join(""))),i.sources.forEach((function(e){var n=i.sourceContentFor(e);null!=n&&(null!=s&&(e=t.join(s,e)),r.setSourceContent(e,n))})),r;function m(e,n){if(null===e||void 0===e.source)r.add(n);else{var i=s?t.join(s,e.source):e.source;r.add(new o(e.originalLine,e.originalColumn,i,n,e.name))}}},o.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},o.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},o.prototype.walk=function(e){for(var t,n=0,o=this.children.length;n<o;n++)(t=this.children[n])[i]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},o.prototype.join=function(e){var t,n,i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},o.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[i]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},o.prototype.setSourceContent=function(e,n){this.sourceContents[t.toSetString(e)]=n},o.prototype.walkSourceContents=function(e){for(var n=0,o=this.children.length;n<o;n++)this.children[n][i]&&this.children[n].walkSourceContents(e);var s=Object.keys(this.sourceContents);for(n=0,o=s.length;n<o;n++)e(t.fromSetString(s[n]),this.sourceContents[s[n]])},o.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},o.prototype.toStringWithSourceMap=function(t){var n={code:"",line:1,column:0},i=new e(t),o=!1,s=null,r=null,a=null,l=null;return this.walk((function(e,t){n.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&r===t.line&&a===t.column&&l===t.name||i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name}),s=t.source,r=t.line,a=t.column,l=t.name,o=!0):o&&(i.addMapping({generated:{line:n.line,column:n.column}}),s=null,o=!1);for(var c=0,u=e.length;c<u;c++)10===e.charCodeAt(c)?(n.line++,n.column=0,c+1===u?(s=null,o=!1):o&&i.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name})):n.column++})),this.walkSourceContents((function(e,t){i.setSourceContent(e,t)})),{code:n.code,map:i}},Hs.SourceNode=o,Hs}().SourceNode),ps}function qs(){return $s||($s=1,function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=No(),o=n(no()),s=Zi(),r=(Vs||(Vs=1,function(e,t){t.__esModule=!0;var n=Zi(),i=void 0;try{var o=Ws();i=o.SourceNode}catch(a){}function s(e,t,i){if(n.isArray(e)){for(var o=[],s=0,r=e.length;s<r;s++)o.push(t.wrap(e[s],i));return o}return"boolean"==typeof e||"number"==typeof e?e+"":e}function r(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,i){this.src="",i&&this.add(i)}).prototype={add:function(e){n.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){n.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=s(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach((function(i){var o=s(e[i],t);"undefined"!==o&&n.push([t.quotedString(i),":",o])}));var i=this.generateList(n);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var t=this.empty(),n=0,i=e.length;n<i;n++)n&&t.add(","),t.add(s(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=r,e.exports=t.default}(gs,gs.exports)),gs.exports),a=n(r);function l(e){this.value=e}function c(){}c.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var s=e.opcodes,r=void 0,a=void 0,l=void 0,c=void 0;for(l=0,c=s.length;l<c;l++)r=s[l],this.source.currentLocation=r.loc,a=a||r.loc,this[r.opcode].apply(this,r.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(i);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var h=this.context,m=h.programs,g=h.decorators;for(l=0,c=m.length;l<c;l++)m[l]&&(d[l]=m[l],g[l]&&(d[l+"_d"]=g[l],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),i?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",i=this.stackVars.concat(this.registers.list);i.length>0&&(n+=", "+i.join(", "));var o=0;Object.keys(this.aliases).forEach((function(e){var i=t.aliases[e];i.children&&i.referenceCount>1&&(n+=", alias"+ ++o+"="+e,i.children[0]="alias"+o)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var r=this.mergeSource(n);return e?(s.push(r),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",r,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,i=void 0,o=void 0,s=void 0,r=void 0;return this.source.each((function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,r=e):(s&&(o?s.prepend("buffer += "):i=!0,r.add(";"),s=r=void 0),o=!0,t||(n=!1))})),n?s?(s.prepend("return "),r.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),r.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,i){var o=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,i,o){var s=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,i,o){var s=t.popStack(),r=n.length;e&&r--;for(;i<r;i++)s=t.nameLookup(s,n[i],o);return e?[t.aliasable("container.strict"),"(",s,", ",t.quotedString(n[i]),", ",JSON.stringify(t.source.currentLocation)," )"]:s}(this.options.strict&&o,this,t,n,e));else for(var r=t.length;n<r;n++)this.replaceStack((function(o){var r=s.nameLookup(o,t[n],e);return i?[" && ",r]:[" != null ? ",r," : ",o]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),i=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,t,n){var i=this.popStack(),o=this.setupHelper(e,t),s=[];n&&s.push(o.name),s.push(i),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var r=["(",this.itemsSeparatedBy(s,"||"),")"],a=this.source.functionCall(r,"call",o.callParams);this.push(a)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var i=1;i<e.length;i++)n.push(t,e[i]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,t,n){var i=[],o=this.setupParams(t,1,i);e&&(t=this.popStack(),delete o.name),n&&(o.indent=JSON.stringify(n)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?i.unshift(t):i.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),i.push(o),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var t=this.popStack(),n=void 0,i=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[e]=n),i&&(s.types[e]=i),o&&(s.ids[e]=o),s.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:c,compileChildren:function(e,t){for(var n=e.children,i=void 0,o=void 0,s=0,r=n.length;s<r;s++){i=n[s],o=new this.compiler;var a=this.matchExistingProgram(i);if(null==a){this.context.programs.push("");var l=this.context.programs.length;i.index=l,i.name="program"+l,this.context.programs[l]=o.compile(i,t,this.context,!this.precompile),this.context.decorators[l]=o.decorators,this.context.environments[l]=i,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=a.index,i.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e))return i}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,i=void 0,s=void 0;if(!this.isInline())throw new o.default("replaceStack on non-inline");var r=this.popStack(!0);if(r instanceof l)t=["(",n=[r.value]],s=!0;else{i=!0;var a=this.incrStack();t=["((",this.push(a)," = ",r,")"],n=this.topStack()}var c=e.call(this,n);s||this.popStack(),i&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i instanceof l)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof l)return n.value;if(!t){if(!this.stackSlot)throw new o.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(t,e,i,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(e,t,n){var i={},o=[],s=[],r=[],a=!n,l=void 0;a&&(n=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(i.fn=u||"container.noop",i.inverse=c||"container.noop");for(var d=t;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(r[d]=this.popStack()),this.stringParams&&(s[d]=this.popStack(),o[d]=this.popStack());return a&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(r)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(o)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,t,n,i){var o=this.setupParams(e,t,n);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),i?(this.useRegister("options"),n.push("options"),["options=",o]):n?(n.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=c.RESERVED_WORDS={},n=0,i=e.length;n<i;n++)t[e[n]]=!0}(),c.isValidJavaScriptVariableName=function(e){return!c.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=c,e.exports=t.default}(ms,ms.exports)),ms.exports}var Gs=(Us||(Us=1,function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(Go()),o=n(Yo()),s=ls(),r=function(){if(cs)return us;function e(e){return e&&e.__esModule?e:{default:e}}cs=1,us.__esModule=!0,us.Compiler=s,us.precompile=function(e,n,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new t.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(n=n||{})||(n.data=!0),n.compat&&(n.useDepths=!0);var o=i.parse(e,n),s=(new i.Compiler).compile(o,n);return(new i.JavaScriptCompiler).compile(s,n)},us.compile=function(e,i,o){if(void 0===i&&(i={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new t.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(i=n.extend({},i))||(i.data=!0),i.compat&&(i.useDepths=!0);var s=void 0;function r(){var t=o.parse(e,i),n=(new o.Compiler).compile(t,i),s=(new o.JavaScriptCompiler).compile(n,i,void 0,!0);return o.template(s)}function a(e,t){return s||(s=r()),s.call(this,e,t)}return a._setup=function(e){return s||(s=r()),s._setup(e)},a._child=function(e,t,n,i){return s||(s=r()),s._child(e,t,n,i)},a};var t=e(no()),n=Zi(),i=e(Yo()),o=[].slice;function s(){}function r(e,t){if(e===t)return!0;if(n.isArray(e)&&n.isArray(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}}function a(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}return s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var i=this.opcodes[n],o=e.opcodes[n];if(i.opcode!==o.opcode||!r(i.args,o.args))return!1}for(t=this.children.length,n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=n.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new t.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var n=this[e.type](e);return this.sourceNode.shift(),n},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,i=0;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){a(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var i=this.classifySexpr(e);"helper"===i?this.helperSexpr(e,t,n):"simple"===i?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var n=e.program;n&&(n=this.compileProgram(e.program));var i=e.params;if(i.length>1)throw new t.default("Unsupported number of partial arguments: "+i.length,e);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var o=e.name.original,s="SubExpression"===e.name.type;s&&this.accept(e.name),this.setupFullMustacheParams(e,n,void 0,!0);var r=e.indent||"";this.options.preventIndent&&r&&(this.opcode("appendContent",r),r=""),this.opcode("invokePartial",s,o,r),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){a(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var i=e.path,o=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,n,o){var s=this.setupFullMustacheParams(e,n,o),r=e.path,a=r.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",s.length,a);else{if(this.options.knownHelpersOnly)throw new t.default("You specified knownHelpersOnly, but used the unknown helper "+a,e);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",s.length,r.original,i.default.helpers.simpleId(r))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=i.default.helpers.scopedId(e),o=!e.depth&&!n&&this.blockParamIndex(t);o?this.opcode("lookupBlockParam",o,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,i=t.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=i.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),o=!n&&i.default.helpers.helperExpression(e),s=!n&&(o||t);if(s&&!o){var r=e.path.parts[0],a=this.options;a.knownHelpers[r]?o=!0:a.knownHelpersOnly&&(s=!1)}return o?"helper":s?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||i.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var o=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,o)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,i){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),o},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var o=this.options.blockParams[t],s=o&&n.indexOf(o,e);if(o&&s>=0)return[t,s]}}},us}(),a=n(qs()),l=n(os()),c=n(qo()),u=i.default.create;function d(){var e=u();return e.compile=function(t,n){return r.compile(t,n,e)},e.precompile=function(t,n){return r.precompile(t,n,e)},e.AST=o.default,e.Compiler=r.Compiler,e.JavaScriptCompiler=a.default,e.Parser=s.parser,e.parse=s.parse,e.parseWithoutProcessing=s.parseWithoutProcessing,e}var h=d();h.create=d,c.default(h),h.Visitor=l.default,h.default=h,t.default=h,e.exports=t.default}(Ji,Ji.exports)),Ji.exports);const Ks=Bi(Gs);var Js,Ys={exports:{}};var Xs,Qs=(Js||(Js=1,Xs=Ys,function(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,i,o,s,r){return t((a=t(t(n,e),t(o,r)))<<(l=s)|a>>>32-l,i);var a,l}function i(e,t,i,o,s,r,a){return n(t&i|~t&o,e,t,s,r,a)}function o(e,t,i,o,s,r,a){return n(t&o|i&~o,e,t,s,r,a)}function s(e,t,i,o,s,r,a){return n(t^i^o,e,t,s,r,a)}function r(e,t,i,o,s,r,a){return n(i^(t|~o),e,t,s,r,a)}function a(e,n){var a,l,c,u,d;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var h=1732584193,m=-271733879,g=-1732584194,p=271733878;for(a=0;a<e.length;a+=16)l=h,c=m,u=g,d=p,h=i(h,m,g,p,e[a],7,-680876936),p=i(p,h,m,g,e[a+1],12,-389564586),g=i(g,p,h,m,e[a+2],17,606105819),m=i(m,g,p,h,e[a+3],22,-1044525330),h=i(h,m,g,p,e[a+4],7,-176418897),p=i(p,h,m,g,e[a+5],12,1200080426),g=i(g,p,h,m,e[a+6],17,-1473231341),m=i(m,g,p,h,e[a+7],22,-45705983),h=i(h,m,g,p,e[a+8],7,1770035416),p=i(p,h,m,g,e[a+9],12,-1958414417),g=i(g,p,h,m,e[a+10],17,-42063),m=i(m,g,p,h,e[a+11],22,-1990404162),h=i(h,m,g,p,e[a+12],7,1804603682),p=i(p,h,m,g,e[a+13],12,-40341101),g=i(g,p,h,m,e[a+14],17,-1502002290),h=o(h,m=i(m,g,p,h,e[a+15],22,1236535329),g,p,e[a+1],5,-165796510),p=o(p,h,m,g,e[a+6],9,-1069501632),g=o(g,p,h,m,e[a+11],14,643717713),m=o(m,g,p,h,e[a],20,-373897302),h=o(h,m,g,p,e[a+5],5,-701558691),p=o(p,h,m,g,e[a+10],9,38016083),g=o(g,p,h,m,e[a+15],14,-660478335),m=o(m,g,p,h,e[a+4],20,-405537848),h=o(h,m,g,p,e[a+9],5,568446438),p=o(p,h,m,g,e[a+14],9,-1019803690),g=o(g,p,h,m,e[a+3],14,-187363961),m=o(m,g,p,h,e[a+8],20,1163531501),h=o(h,m,g,p,e[a+13],5,-1444681467),p=o(p,h,m,g,e[a+2],9,-51403784),g=o(g,p,h,m,e[a+7],14,1735328473),h=s(h,m=o(m,g,p,h,e[a+12],20,-1926607734),g,p,e[a+5],4,-378558),p=s(p,h,m,g,e[a+8],11,-2022574463),g=s(g,p,h,m,e[a+11],16,1839030562),m=s(m,g,p,h,e[a+14],23,-35309556),h=s(h,m,g,p,e[a+1],4,-1530992060),p=s(p,h,m,g,e[a+4],11,1272893353),g=s(g,p,h,m,e[a+7],16,-155497632),m=s(m,g,p,h,e[a+10],23,-1094730640),h=s(h,m,g,p,e[a+13],4,681279174),p=s(p,h,m,g,e[a],11,-358537222),g=s(g,p,h,m,e[a+3],16,-722521979),m=s(m,g,p,h,e[a+6],23,76029189),h=s(h,m,g,p,e[a+9],4,-640364487),p=s(p,h,m,g,e[a+12],11,-421815835),g=s(g,p,h,m,e[a+15],16,530742520),h=r(h,m=s(m,g,p,h,e[a+2],23,-995338651),g,p,e[a],6,-198630844),p=r(p,h,m,g,e[a+7],10,1126891415),g=r(g,p,h,m,e[a+14],15,-1416354905),m=r(m,g,p,h,e[a+5],21,-57434055),h=r(h,m,g,p,e[a+12],6,1700485571),p=r(p,h,m,g,e[a+3],10,-1894986606),g=r(g,p,h,m,e[a+10],15,-1051523),m=r(m,g,p,h,e[a+1],21,-2054922799),h=r(h,m,g,p,e[a+8],6,1873313359),p=r(p,h,m,g,e[a+15],10,-30611744),g=r(g,p,h,m,e[a+6],15,-1560198380),m=r(m,g,p,h,e[a+13],21,1309151649),h=r(h,m,g,p,e[a+4],6,-145523070),p=r(p,h,m,g,e[a+11],10,-1120210379),g=r(g,p,h,m,e[a+2],15,718787259),m=r(m,g,p,h,e[a+9],21,-343485551),h=t(h,l),m=t(m,c),g=t(g,u),p=t(p,d);return[h,m,g,p]}function l(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function u(e){var t,n,i="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=i.charAt(t>>>4&15)+i.charAt(15&t);return o}function d(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return l(a(c(e),8*e.length))}(d(e))}function m(e,t){return function(e,t){var n,i,o=c(e),s=[],r=[];for(s[15]=r[15]=void 0,o.length>16&&(o=a(o,8*e.length)),n=0;n<16;n+=1)s[n]=909522486^o[n],r[n]=1549556828^o[n];return i=a(s.concat(c(t)),512+8*t.length),l(a(r.concat(i),640))}(d(e),d(t))}function g(e,t,n){return t?n?m(t,e):u(m(t,e)):n?h(e):u(h(e))}Xs.exports?Xs.exports=g:e.md5=g}(Fi)),Ys.exports);const Zs=Bi(Qs),er=(()=>{if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)};function n(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,s=e.length;if(i)for(;o<s;o++)t(e[o]);else t(e)}function i(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function o(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var s=function(e,r){function a(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(i){for(e=0,t=n.length;e<t;e++)n[e].call(this,i)},this.remove=function(i){var o=[];for(e=0,t=n.length;e<t;e++)n[e]!==i&&o.push(n[e]);n=o},this.length=function(){return n.length}}function l(e,n){if(e)if(e.resizedAttached)e.resizedAttached.add(n);else{e.resizedAttached=new a,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var s={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},r={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(e.resizeSensor,s);var l=document.createElement("div");l.className="resize-sensor-expand",o(l,s);var c=document.createElement("div");o(c,r),l.appendChild(c);var u=document.createElement("div");u.className="resize-sensor-shrink",o(u,s);var d=document.createElement("div");o(d,r),o(d,{width:"200%",height:"200%"}),u.appendChild(d),e.resizeSensor.appendChild(l),e.resizeSensor.appendChild(u),e.appendChild(e.resizeSensor);var h,m,g=window.getComputedStyle(e),p=g?g.getPropertyValue("position"):null;"absolute"!==p&&"relative"!==p&&"fixed"!==p&&(e.style.position="relative");var f=i(e),v=0,y=0,b=!0,S=0,w=function(){if(b){if(0===e.offsetWidth&&0===e.offsetHeight)return void(S||(S=t((function(){S=0,w()}))));b=!1}var n,i;n=e.offsetWidth,i=e.offsetHeight,c.style.width=n+10+"px",c.style.height=i+10+"px",l.scrollLeft=n+10,l.scrollTop=i+10,u.scrollLeft=n+10,u.scrollTop=i+10};e.resizeSensor.resetSensor=w;var _=function(){m=0,h&&(v=f.width,y=f.height,e.resizedAttached&&e.resizedAttached.call(f))},k=function(){f=i(e),(h=f.width!==v||f.height!==y)&&!m&&(m=t(_)),w()},C=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};C(l,"scroll",k),C(u,"scroll",k),t(w)}}n(e,(function(e){l(e,r)})),this.detach=function(t){s.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(s.reset=function(e){n(e,(function(e){e.resizeSensor.resetSensor()}))},s.detach=function(e,t){n(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var r=new MutationObserver((function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))for(var n=e[t].addedNodes,i=0;i<n.length;i++)n[i].resizeSensor&&s.reset(n[i])}));document.addEventListener("DOMContentLoaded",(function(){r.observe(document.body,{childList:!0,subtree:!0})}))}return s})();var tr;Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),s=this.offsetTop-t.offsetTop<t.scrollTop,r=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-o>t.scrollLeft+t.clientWidth,c=s&&!r;(s||r)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-o+this.clientWidth/2),(s||r||a||l)&&!e&&this.scrollIntoView(c)}),(tr=window).Colors=function(e,t){var n={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},i=e.Math,o=i.round,s={},r={},a={r:.298954,g:.586434,b:.114612},l={r:.2126,g:.7152,b:.0722},c=function(e){this.colors={RND:{}},this.options={color:"rgba(204, 82, 37, 0.8)",grey:a,luminance:l,valueRanges:n},u(this,e||{})},u=function(e,n){var i,o=e.options;for(var s in d(e),n)n[s]!==t&&(o[s]=n[s]);i=o.customBG,o.customBG="string"==typeof i?p.txt2color(i).rgb:i,r=h(e.colors,o.color,t,!0)},d=function(e){s!==e&&(s=e,r=e.colors)};function h(e,i,o,s,a){if("string"==typeof i)o=(i=p.txt2color(i)).type,r[o]=i[o],a=a!==t?a:i.alpha;else if(i)for(var l in i)e[o][l]=w(i[l]/n[o][l][1],0,1);return a!==t&&(e.alpha=w(+a,0,1)),g(o,s?e:t)}function m(e,t,n){var i=s.options.grey,r={};return r.RGB={r:e.r,g:e.g,b:e.b},r.rgb={r:t.r,g:t.g,b:t.b},r.alpha=n,r.equivalentGrey=o(i.r*e.r+i.g*e.g+i.b*e.b),r.rgbaMixBlack=b(t,{r:0,g:0,b:0},n,1),r.rgbaMixWhite=b(t,{r:1,g:1,b:1},n,1),r.rgbaMixBlack.luminance=y(r.rgbaMixBlack,!0),r.rgbaMixWhite.luminance=y(r.rgbaMixWhite,!0),s.options.customBG&&(r.rgbaMixCustom=b(t,s.options.customBG,n,1),r.rgbaMixCustom.luminance=y(r.rgbaMixCustom,!0),s.options.customBG.luminance=y(s.options.customBG,!0)),r}function g(e,t){var a,l,c,u=t||r,d=p,h=s.options,g=n,w=u.RND,_="",k="",C={hsl:"hsv",rgb:e},x=w.rgb;if("alpha"!==e){for(var E in g)if(!g[E][E])for(_ in e!==E&&(k=C[E]||"rgb",u[E]=d[k+"2"+E](u[k])),w[E]||(w[E]={}),a=u[E])w[E][_]=o(a[_]*g[E][_][1]);x=w.rgb,u.HEX=d.RGB2HEX(x),u.equivalentGrey=h.grey.r*u.rgb.r+h.grey.g*u.rgb.g+h.grey.b*u.rgb.b,u.webSave=l=f(x,51),u.webSmart=c=f(x,17),u.saveColor=x.r===l.r&&x.g===l.g&&x.b===l.b?"web save":x.r===c.r&&x.g===c.g&&x.b===c.b?"web smart":"",u.hueRGB=p.hue2RGB(u.hsv.h),t&&(u.background=m(x,u.rgb,u.alpha))}var I,T,M,A=u.rgb,O=u.alpha,P="luminance",L=u.background;return(I=b(A,{r:0,g:0,b:0},O,1))[P]=y(I,!0),u.rgbaMixBlack=I,(T=b(A,{r:1,g:1,b:1},O,1))[P]=y(T,!0),u.rgbaMixWhite=T,h.customBG&&((M=b(A,L.rgbaMixCustom,O,1))[P]=y(M,!0),M.WCAG2Ratio=S(M[P],L.rgbaMixCustom[P]),u.rgbaMixBGMixCustom=M,M.luminanceDelta=i.abs(M[P]-L.rgbaMixCustom[P]),M.hueDelta=v(L.rgbaMixCustom,M)),u.RGBLuminance=y(x),u.HUELuminance=y(u.hueRGB),h.convertCallback&&h.convertCallback(u,e),u}c.prototype.setColor=function(e,n,i){return d(this),e?h(this.colors,e,n,t,i):(i!==t&&(this.colors.alpha=w(i,0,1)),g(n))},c.prototype.setCustomBackground=function(e){return d(this),this.options.customBG="string"==typeof e?p.txt2color(e).rgb:e,h(this.colors,t,"rgb")},c.prototype.saveAsBackground=function(){return d(this),h(this.colors,t,"rgb",!0)},c.prototype.toString=function(e,t){return p.color2text((e||"rgb").toLowerCase(),this.colors,t)};var p={txt2color:function(e){var t={},i=e.replace(/(?:#|\)|%)/g,"").split("("),o=(i[1]||"").split(/,\s*/),s=i[1]?i[0].substr(0,3):"rgb",r="";if(t.type=s,t[s]={},i[1])for(var a=3;a--;)r=s[a]||s.charAt(a),t[s][r]=+o[a]/n[s][r][1];else t.rgb=p.HEX2rgb(i[0]);return t.alpha=o[3]?+o[3]:1,t},color2text:function(e,t,n){var i=!1!==n&&o(100*t.alpha)/100,s="number"==typeof i&&!1!==n&&(n||1!==i),r=t.RND.rgb,a=t.RND.hsl,l="hex"===e&&s,c="hex"===e&&!l,u="rgb"===e||l?r.r+", "+r.g+", "+r.b:c?"#"+t.HEX:a.h+", "+a.s+"%, "+a.l+"%";return c?u:(l?"rgb":e)+(s?"a":"")+"("+u+(s?", "+i:"")+")"},RGB2HEX:function(e){return((e.r<16?"0":"")+e.r.toString(16)+(e.g<16?"0":"")+e.g.toString(16)+(e.b<16?"0":"")+e.b.toString(16)).toUpperCase()},HEX2rgb:function(e){return{r:+("0x"+(e=e.split(""))[0]+e[e[3]?1:0])/255,g:+("0x"+e[e[3]?2:1]+(e[3]||e[1]))/255,b:+("0x"+(e[4]||e[2])+(e[5]||e[2]))/255}},hue2RGB:function(e){var t=6*e,n=~~t%6,i=6===t?0:t-n;return{r:o(255*[1,1-i,0,0,i,1][n]),g:o(255*[i,1,1,1-i,0,0][n]),b:o(255*[0,0,i,1,1,1-i][n])}},rgb2hsv:function(e){var t,n,o=e.r,s=e.g,a=e.b,l=0;return s<a&&(s=a+(a=s,0),l=-1),n=a,o<s&&(o=s+(s=o,0),l=-2/6-l,n=i.min(s,a)),t=o-n,{h:(o?t/o:0)<1e-15?r&&r.hsl&&r.hsl.h||0:t?i.abs(l+(s-a)/(6*t)):0,s:o?t/o:r&&r.hsv&&r.hsv.s||0,v:o}},hsv2rgb:function(e){var t=6*e.h,n=e.s,i=e.v,o=~~t,s=t-o,r=i*(1-n),a=i*(1-s*n),l=i*(1-(1-s)*n),c=o%6;return{r:[i,a,r,r,l,i][c],g:[l,i,i,a,r,r][c],b:[r,r,l,i,i,a][c]}},hsv2hsl:function(e){var t=(2-e.s)*e.v,n=e.s*e.v;return n=e.s?t<1?t?n/t:0:n/(2-t):0,{h:e.h,s:e.v||n?n:r&&r.hsl&&r.hsl.s||0,l:t/2}},rgb2hsl:function(e,t){var n=p.rgb2hsv(e);return p.hsv2hsl(t?n:r.hsv=n)},hsl2rgb:function(e){var t=6*e.h,n=e.s,i=e.l,o=i<.5?i*(1+n):i+n-n*i,s=i+i-o,r=~~t,a=o*(o?(o-s)/o:0)*(t-r),l=s+a,c=o-a,u=r%6;return{r:[o,c,s,s,l,o][u],g:[l,o,o,c,s,s][u],b:[s,s,l,o,o,c][u]}}};function f(e,t){var n={},i=0,o=t/2;for(var s in e)i=e[s]%t,n[s]=e[s]+(i>o?t-i:-i);return n}function v(e,t,n){return 255*(i.max(e.r-t.r,t.r-e.r)+i.max(e.g-t.g,t.g-e.g)+i.max(e.b-t.b,t.b-e.b))/765}function y(e,t){for(var n=t?1:255,o=[e.r/n,e.g/n,e.b/n],r=s.options.luminance,a=o.length;a--;)o[a]=o[a]<=.03928?o[a]/12.92:i.pow((o[a]+.055)/1.055,2.4);return r.r*o[0]+r.g*o[1]+r.b*o[2]}function b(e,n,i,o){var s={},r=i!==t?i:1,a=o!==t?o:1,l=r+a*(1-r);for(var c in e)s[c]=(e[c]*r+n[c]*a*(1-r))/l;return s.a=l,s}function S(e,t){return o(100*(e>=t?(e+.05)/(t+.05):(t+.05)/(e+.05)))/100}function w(e,t,n){return e>n?n:e<t?t:e}return c}(tr),window._=Ni,window.Backbone=Hi,window.Handlebars=Ks,window.md5=Zs,window.ResizeSensor=er;const nr=new s("tab.unhandledException");function ir(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function or(e,t){return t&&":visible"===t?ir(e):t&&":hidden"===t?!ir(e):e.matches(t)}function sr(e,t,n){if("string"==typeof e&&n)this.each((function(){this.insertAdjacentHTML(n,e)}));else{let n;"string"==typeof e?n=Object.values($(e)):e instanceof HTMLElement||e instanceof SVGElement?n=[e]:e&&e.jquery?n=e.toArray():e instanceof $?n=Object.values(e):Array.isArray(e)?n=e:console.error("addNodes() passed value other than string, element, mQuery/jQuery Object, or array"),this.each((function(e){n.forEach(((n,i,o)=>{t.call(this,n,i,o,e)}))}))}return this}function rr(e,t,n,i){if(1===n)return e;const o=t<n-1?e.cloneNode(!0):e;return i&&i.push(o),o}function ar(e){return isNaN(1*e)?e:e+"px"}window.addEventListener("error",(e=>{nr.error("Unhandled Exception",e)}));const lr=/<\/?[a-z][\s\S]*>/;function cr(e,t){const n=document.createElement("div");n.innerHTML=e;const i=n.firstChild;return t&&Object.keys(t).forEach((e=>{"text"===e?i.innerHtml=t[e]:i.setAttribute(e,t[e])})),i}let ur=function(){ur.prototype.done=e=>(this.doneCallback=e,this),ur.prototype.fail=e=>(this.failCallback=e,this),ur.prototype.always=e=>(this.alwaysCallback=e,this)};const dr=r.create({timeout:1e5});function hr(e,t={}){return t.addToPrototype?this:new mr(e,t)}function mr(e,t){const n=(e=[])=>{e=Array.from(e).filter(((e,t)=>{if(e)return this[t]=e,e})),Object.defineProperty(this,"length",{value:e.length})};if("string"==typeof e)0===e.indexOf("<")&&(i=e,lr.test(i))?n([cr(e,t)]):n("window"===e?[window]:"document"===e?[document]:document.querySelectorAll(e));else{if(e instanceof hr)return e;e&&e.jquery?e.length?n(e.toArray()):n():Array.isArray(e)?n(e):e instanceof HTMLElement||"object"==typeof e?n([e]):null==e&&n()}var i}dr.interceptors.request.use((async function(e){return e.allowDeferral&&await V("allowRequestDeferral")&&await a.deferRequestsPromise,e})),hr.contains=function(e,t){return e.contains(t)},hr.extend=function(){return Object.assign.apply(null,arguments)},hr.ajax=function(e={}){const{type:t="get",url:n="",data:i,success:o,error:s,cancelToken:r,complete:a,modifyHeaders:c=(e=>e),allowDeferral:u}="string"==typeof e?{url:e}:{...e,type:e.type&&e.type.toLowerCase()},d=new ur;d.doneCallback=o,d.failCallback=s,d.alwaysCallback=a;const h={method:t,url:n,cancelToken:r,allowDeferral:u};return function(e){return e&&[m.globals.urlRoot,m.globals.urlRootApi,m.globals.urlRootStats,m.globals.urlRootLogin,m.globals.urlRootIntegration].some((t=>e.startsWith(t)))}(n)&&(h.headers=c(function(){const e={"X-Momentum-Version":m.globals.version,"X-Momentum-ClientDate":m.utils.getLocalDateTimeString(),"X-Momentum-TabId":l},t=localStorage.getItem("token"),n=localStorage.getItem("client_uuid"),i=localStorage.getItem("activeTags");if(t&&(e.Authorization="Bearer "+t),n&&(e["X-Momentum-ClientId"]=n),i&&(e["X-Momentum-Tags"]=i),m.conditionalFeatures.featureEnabled("allowoptions")){const t=localStorage.getItem("X-Momentum-Options");t&&(e["X-Momentum-Options"]=t)}return e}())),i&&("get"===t?h.params=i:h.data=i),dr(h).then((e=>{d.doneCallback&&d.doneCallback(e.data,"success")})).catch((e=>{console.error(e),d.failCallback&&(e.response&&(e.status=e.response.status,e.response.data&&(e.responseJSON={message:e.response.data,msg:e.response.data})),d.failCallback(e))})).finally((()=>{d.alwaysCallback&&d.alwaysCallback()})),d},mr.prototype=new hr(null,{addToPrototype:!0}),function(e){e.prototype.each=function(e){return Object.values(this).forEach(((t,n)=>e.call(t,n,t))),this},e.prototype.addClass=function(e){return e&&this.each((function(){e.trim().split(" ").forEach((e=>e&&this.classList.add(e)))})),this},e.prototype.removeClass=function(e){return e&&this.each((function(){e.split(" ").forEach((e=>this.classList.remove(e)))})),this},e.prototype.toggleClass=function(e,t){const n=e.split(" ");return this.each((function(){n.forEach((e=>{!this.classList.contains(e)&&!1!==t||!0===t?this.classList.add(e):this.classList.remove(e)}))})),this},e.prototype.hasClass=function(e){return!(!e||!this.length)&&Object.values(this).some((t=>e.split(" ").every((e=>t.classList.contains(e)))))},e.prototype.hide=function(){return this.each((function(){this.style.display="none"})),this},e.prototype.height=function(e){if(void 0!==e)return this.each((function(){this.style.height=ar(e)})),this;{if(!this.length)return;if(this[0]===window)return window.innerHeight;let e=this[0].offsetHeight;return void 0===e&&(e=this[0].getBoundingClientRect&&this[0].getBoundingClientRect().height),e}},e.prototype.width=function(e){if(void 0!==e)return this.each((function(){this.style.width=ar(e)})),this;{if(!this.length)return;if(this[0]===window)return window.innerWidth;let e=this[0].offsetwidth;return void 0===e&&(e=this[0].getBoundingClientRect&&this[0].getBoundingClientRect().width),e}},e.prototype.offset=function(){if(!this.length)return;const e=this[0].getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+n,left:e.left+t}},e.prototype.css=function(e,t){if("string"==typeof e&&void 0===t){if(!this.length)return;return getComputedStyle(this[0])[e]}{let n={};"string"==typeof e?n[e]=t:"object"==typeof e&&(n=e);const i=["opacity","z-index","flex","flex-grow","flex-shrink","order"];this.each((function(){Object.keys(n).forEach((e=>{n[e]||0===n[e]?i.includes(e)?this.style[e]=n[e]:this.style[e]=ar(n[e]):this.style.removeProperty(e)}))}))}return this},e.prototype.get=function(e){return this.length?e>=0?this[e]:this[this.length+e-1]:this},e.prototype.eq=function(e){return this.length?hr(e>=0?this[e]:this[this.length+e-1]):this},e.prototype.first=function(){return this.length?hr([this[0]]):this},e.prototype.last=function(){return this.length?hr([this[Object.keys(this).length-1]]):this},e.prototype.next=function(e){if(!this.length)return this;const t=[];return this.each((function(){const e=this.nextSibling;e&&t.push(e)})),e?hr(t).filter(e):hr(t)},e.prototype.prev=function(e){if(!this.length)return this;const t=[];return this.each((function(){const e=this.previousSibling;e&&t.push(e)})),e?hr(t).filter(e):hr(t)},e.prototype.prevAll=function(e){if(!this.length)return this;const t=[];return this.each((function(){!function e(n){const i=n.previousSibling;i&&(t.push(i),e(i))}(this)})),e?hr(t).filter(e):hr(t)},e.prototype.nextAll=function(e){if(!this.length)return this;const t=[];return this.each((function(){!function e(n){const i=n.nextSibling;i&&(t.push(i),e(i))}(this)})),e?hr(t).filter(e):hr(t)},e.prototype.find=function(e){let t=[];return this.each((function(){const n=this.querySelectorAll(e);n.length&&(t=t.concat(Array.from(n)))})),t.length?hr(t):hr()},e.prototype.closest=function(e){const t=[];return this.each((function(){if(this.matches(e))t.push(this);else{const n=this.closest(e);n&&!t.includes(n)&&t.push(n)}})),t.length?hr(t):hr()},e.prototype.parent=function(e){const t=hr(Object.values(this).map((e=>e.parentElement)));return e?t.filter(e):t},e.prototype.children=function(e){let t=[];return this.each((function(){t=t.concat(Array.from(this.children))})),e?hr(t).filter(e):hr(t)},e.prototype.siblings=function(e){const t=[];return this.each((function(){const e=this.parentElement;e&&Array.from(e.children).forEach((e=>{e===this||t.includes(e)||t.push(e)}))})),e?hr(t).filter(e):hr(t)},e.prototype.filter=function(e){return hr(Object.values(this).filter((t=>or(t,e))))},e.prototype.not=function(e){return hr(Object.values(this).filter((t=>!or(t,e))))},e.prototype.is=function(e){return Object.values(this).some((t=>or(t,e)))},e.prototype.index=function(e){if(this.length)return"string"==typeof e?Object.values(this).findIndex((t=>t.matches(e))):e instanceof HTMLElement?Object.values(this).findIndex((t=>t===e)):e instanceof hr||e&&e.jquery?Object.values(this).findIndex((t=>t===e[0])):void 0},e.prototype.contains=function(e){if(e&&this.length)return Object.values(this).some((t=>t.contains(e)))},e.prototype.val=function(e){return void 0===e&&this.length?this[0].value||"":(this.each((function(){this.value=e})),this)},e.prototype.text=function(e){if(void 0!==e)return this.each((function(){this.textContent=e})),this;if(this.length){let e="";return this.each((function(){e+=this.textContent})),e}},e.prototype.prop=function(e,t){if(!this.length)return void 0===t?void 0:this;if("string"==typeof e&&void 0===t)return this[0][e];let n={};return"string"==typeof e?n[e]=t:"object"==typeof e&&(n=e),this.each((function(){Object.keys(n).forEach((e=>this[e]=n[e]))})),this},e.prototype.attr=function(e,t){if(!this.length)return void 0===t?void 0:this;if("string"==typeof e&&void 0===t)return this[0].getAttribute(e);let n={};return"string"==typeof e?n[e]=t:"object"==typeof e&&(n=e),this.each((function(){Object.keys(n).forEach((e=>this.setAttribute(e,n[e])))})),this},e.prototype.data=function(e,t){if(!this.length)return void 0===t?void 0:this;if("string"==typeof e&&void 0===t)return this[0].getAttribute("data-"+e);if(void 0===e&&void 0===t){let e={};return Array.from(this[0].attributes).forEach((t=>{t.nodeName.includes("data")&&(e[t.nodeName.split("data-")[1]]=t.value)})),e}let n={};return"string"==typeof e?n[e]=t:"object"==typeof e&&(n=e),this.each((function(){Object.keys(n).forEach((e=>this.setAttribute("data-"+e,n[e])))})),this},e.prototype.html=function(e){if(void 0===e){if(!this.length)return;return this.length>1?"":this[0].innerHTML}return this.each((function(t){"function"==typeof e?this.innerHTML=e(t,this.innerHTML):"string"==typeof e?this.innerHTML=e:e instanceof HTMLElement?(this.innerHTML="",this.append(e)):e instanceof hr&&(this.innerHTML="",e.each(((e,t)=>this.append(t))))})),this};let t={};e.prototype.on=function(e){let n,i;3===arguments.length?(n=arguments[1],i=arguments[2]):i=arguments[1];const o=e.split(" ");return this.each((function(){o.forEach((e=>{let o,[s,r]=e.split(".");r?(n?("blur"===s?s="focusout":"focus"===s&&(s="focusin"),o=e=>{e.originalEvent=e;let t=e.target.closest(n);if(t&&this.contains(t))return e.delegatedTarget=t,i(e)}):o=e=>(e.originalEvent=e,e.delegatedTarget=e.currentTarget,i(e)),function(e,t,n,i,o){n||(n="root");let s=e;[t,n,i].forEach((e=>{e===i?(s[e]||(s[e]=[]),s[e].push(o)):(s[e]||(s[e]={}),s=s[e])}))}(t,r,n,s,o),this.addEventListener(s,o)):this.addEventListener(s,i)}))})),this},e.prototype.once=function(e,t){const n=e.split(" ");this.each((function(){n.forEach((e=>{this.addEventListener(e,t,{once:!0})}))}))},e.prototype.off=function(e,n){const i=e.split(" ");return this.each((function(){i.forEach((e=>{let[i,o]=e.split(".");if(o)if(i){"blur"===i?i="focusout":"focus"===i&&(i="focusin");const e=t[o][i];e&&e.forEach((e=>{this.removeEventListener(i,e),delete t[o][i]}))}else t[o]&&function(e,t,n){Object.values(t[n]).forEach((t=>{Object.keys(t).forEach((n=>{t[n].forEach((t=>{e.removeEventListener(n,t)}))}))})),delete t[n]}(this,t,o);else this.removeEventListener(i,n)}))})),this},e.prototype.trigger=function(e){return["click","blur","focus"].includes(e)?this.each((function(){this[e]()})):this.each((function(){this.dispatchEvent(new Event(e))})),this},e.prototype.focus=function(){this[0]&&this[0].focus()},e.prototype.select=function(){if(this.length)return this[0].select&&this[0].select(),this},e.prototype.scrollTop=function(e){return void 0===e?this[0].scrollTop:(this.each((function(){this.scrollTop=e})),this)},e.prototype.scrollLeft=function(e){return void 0===e?this[0].scrollLeft:(this.each((function(){this.scrollLeft=e})),this)},e.prototype.append=function(e){const t=this.length;return sr.call(this,e,(function(e,n,i,o){this.append(rr(e,o,t))}),"beforeend")},e.prototype.prepend=function(e){const t=this.length;return sr.call(this,e,(function(e,n,i,o){this.prepend(rr(e,o,t))}),"afterbegin")},e.prototype.before=function(e){const t=this.length;return sr.call(this,e,(function(e,n,i,o){const s=rr(e,o,t);this.parentElement.insertBefore(s,this)}),"beforebegin")},e.prototype.after=function(e){const t=this.length;return sr.call(this,e,(function(e,n,i,o){const s=rr(e,o,t);this.nextSibling?this.parentElement.insertBefore(s,this.nextSibling):this.parentElement.append(s)}),"afterend")},e.prototype.appendTo=function(e){const t=[];return sr.call(this,e,(function(e,n,i){e.append(rr(this,n,i.length,t))})),t.length?hr(t):this},e.prototype.prependTo=function(e){const t=[];return sr.call(this,e,(function(e,n,i){e.prepend(rr(this,n,i.length,t))})),t.length?hr(t):this},e.prototype.remove=function(){return this.each((function(){this.remove()})),this},e.prototype.empty=function(){return this.each((function(){this.innerHTML=""})),this},e.prototype.clone=function(){if(this.length)return hr(Object.values(this).map((e=>e.cloneNode(!0))))},e.prototype.detach=function(){return this.each((function(){const e=this.parentElement;e&&e.removeChild(this)})),this},e.prototype.mFadeIn=function(e,t){return this.each((function(){const n=hr(this);e=null!=e?e:500,n.timeouts&&n.timeouts.forEach((function(e){clearTimeout(e)})),Object.defineProperty(n,"timeouts",{value:[]});n.addClass("m-hide"),n.removeClass("m-hide-display m-hide-visibility"),n.css("transition","opacity "+e+"ms ease"),n.timeouts.push(setTimeout((function(){n.removeClass("m-hide")}),10)),n.timeouts.push(setTimeout((function(){n.css("transition",""),t&&t()}),e+10))})),this},e.prototype.mFadeOut=function(e,t,n){return this.each((function(){const i=hr(this);e=null!=e?e:500,i.timeouts&&i.timeouts.forEach((function(e){clearTimeout(e)})),Object.defineProperty(i,"timeouts",{value:[]}),i.css("transition","opacity "+e+"ms ease"),i.addClass("m-hide"),i.timeouts.push(setTimeout((function(){t?i.addClass("m-hide-visibility"):i.addClass("m-hide-display"),i.css("transition",""),n&&n()}),e))})),this},e.prototype.mShow=function(){return this.each((function(){hr(this).removeClass("m-hide m-hide-display m-hide-visibility")})),this},e.prototype.mHide=function(e){return this.each((function(){const t=hr(this);e?t.addClass("m-hide-visibility"):t.addClass("m-hide-display")})),this},e.prototype.mToggle=function(e,t){return this.each((function(){const n=hr(this);if("string"!=typeof e&&console.log("displayType must be a string and a valid display value that is not 'none'.\ne.g. 'block', 'inline-block', 'inline', 'flex', 'inline-flex', 'list-item', 'grid', etc."),void 0===t){if(n.length){"none"===window.getComputedStyle(this).display?n.css("display",e):n.hide()}}else t?n.css("display",e):n.hide()})),this},e.prototype.pseudoHoverOn=function(){this.each((function(){hr(this).addClass("pseudo-hover")}))},e.prototype.pseudoHoverOff=function(){this.each((function(){hr(this).removeClass("pseudo-hover")}))};let n={};e.prototype.clickOutside=function(e,t){return this.each((function(){const i=hr(this);let o;function s(e){o=e.target}function r(n){i[0].contains(o)||i[0].contains(n.target)||i===o||i===n.target||!0===i.data("justBoundClickOutsideHandler")||t.call(e,n)}i.data("justBoundClickOutsideHandler",!0),setTimeout((function(){i.data("justBoundClickOutsideHandler",!1)}),100),i.data("clickOutsideMouseupHandlerId",Math.random().toString(36).substring(7)),i.data("clickOutsideMousedownHandlerId",Math.random().toString(36).substring(7)),n[i.data("clickOutsideMouseupHandlerId")]=r,n[i.data("clickOutsideMousedownHandlerId")]=s,document.addEventListener("mouseup",r),document.addEventListener("mousedown",s)})),this},e.prototype.unbindClickOutside=function(){return this.each((function(){var e,t,i;const o=hr(this);document.removeEventListener("mouseup",n[o.data("clickOutsideMouseupHandlerId")]),document.removeEventListener("mousedown",n[o.data("clickOutsideMousedownHandlerId")]),delete n[o.data("clickOutsideMouseupHandlerId")],delete n[o.data("clickOutsideMousedownHandlerId")],null==(e=o.removeData)||e.call(o,"clickOutsideMouseupHandlerId"),null==(t=o.removeData)||t.call(o,"clickOutsideMousedownHandlerId"),null==(i=o.removeData)||i.call(o,"justBoundClickOutsideHandler")})),this}}(mr),window.$=hr;var gr=(e=>(e.MockData="mockData",e))(gr||{});const pr=u();pr.use((function({options:e,store:t}){var n;if(!(null==(n=e.plugins)?void 0:n.includes(gr.MockData))||!("data"in t.$state)||"object"!=typeof t.$state.data)return;const i=t.$state.data;return{mockData(e){t.$patch((t=>{t.data=new Proxy(e,{set:(e,t,n)=>"string"==typeof t&&(c.set(i,t,n),!0),deleteProperty:(e,t)=>"string"==typeof t&&(delete i[t],!0)})}))},clearMockData(){t.$patch((e=>{e.data=i}))}}})),c.use(pr);const fr={SETUP_UNREGISTERED_DASHBOARD:"setupUnregisteredDashboard",LOGIN:"login",ONE_TIME_LOGIN:"oneTimeLogin",RELEASE_UPDATE:"releaseUpdate2",TOUR:"tour",FREE_INTRODUCTION:"introduction",FREE_VIDEO_INTRODUCTION:"freeVideoIntroduction",PLUS_INTRODUCTION:"plusIntroduction",FREE_TRIAL:"freeTrial",FREE_TRIAL_CARD:"freeTrialCard",UPGRADE:"upgrade",SEARCH_IN_CENTER_NOTIFICATION:"searchInCenterNotification",FAVICON_PERMISSION:"faviconPermission",SEARCH_PROVIDER:"searchProvider",POMODORO_SWITCHER:"pomodoroSwitcher",SAFARI_VERSION:"safariVersion",UPSELL_AI_CHAT:"upsellAiChat",UPSELL_AUTOFOCUS:"upsellAutofocus",UPSELL_BALANCE_MODE:"upsellBalanceMode",UPSELL_COUNTDOWNS:"upsellCountdowns",UPSELL_FOCUS_MODE:"upsellFocusMode",UPSELL_FOCUS_MODE_EXPERIMENTAL:"upsellFocusModeExperimental",UPSELL_MANTRAS:"upsellMantras",UPSELL_METRICS:"upsellMetrics",UPSELL_MULTI_TODO:"upsellMultiTodo",UPSELL_NOTES:"upsellNotes",UPSELL_PHOTOS:"upsellPhotos",UPSELL_POMODORO:"upsellPomodoro",UPSELL_QUOTES:"upsellQuotes",UPSELL_SITE_BLOCKER:"upsellSiteBlocker",UPSELL_SOUNDSCAPES:"upsellSoundscapes",UPSELL_TAB_GROUPS:"upsellTabGroups",UPSELL_TAB_STASH:"upsellTabStash",UPSELL_THEMES:"upsellThemes",UPSELL_TODO_INTEGRATIONS:"upsellTodoIntegrations",UPSELL_WEATHER:"upsellWeather",UPSELL_WORLD_CLOCKS:"upsellWorldClocks",SAFARI_ACCOUNT:"safariAccount",PERMISSION_REQUEST:"permissionRequest",TAB_STASH_ONBOARDING:"tabStashOnboarding",FOCUS_MODE_ONBOARDING:"focusModeOnboarding",TIP_FOCUS_INSIGHT_APP:"tipFocusInsightsApp",TIP_DAY_ONE_FOCUS_MODE:"tipDayOneFocusMode",TIP_DAY_TWO_FOCUS_MODE:"tipDayTwoFocusMode",TIP_DAY_THREE_FOCUS_MODE:"tipDayFourFocusMode",TIP_SITE_BLOCKER_FIRST_TIME:"tipSiteBlockerFirstTime",TIP_SURVEY_PMF_TYPEFORM_FREE:"tipSurveyPmfTypeformFree",TIP_SURVEY_PMF_TYPEFORM_PLUS:"tipSurveyPmfTypeformPlus",TIP_SURVEY_SITE_BLOCKER_TYPEFORM:"tipSurveySiteBlockerTypeform",TIP_ADD_NAME:"tipAddName",ONBOARDING_SITE_BLOCKER_ONE:"onboardingSiteBlockerOne",ONBOARDING_FOCUS_INSIGHTS:"tipFocusInsightsGraph",SURVEY_PMF_TYPEFORM_FREE:"surveyPmfTypeformFree",SURVEY_PMF_TYPEFORM_PLUS:"surveyPmfTypeformPlus",SURVEY_SITE_BLOCKER_TYPEFORM:"surveySiteBlockerTypeform",SURVEY_GENERAL_FEEDBACK:"surveyGeneralFeedback",SURVEY_BUG_REPORT:"surveyBugReport",SURVEY_BETA_TEST:"surveyBetaTest"},vr={PLUS_TRIAL_TOUR:"january_2022_trials_3",SEARCH_IN_CENTER:"search_in_center",ONBOARDING_VARIANTS_TEST_1:"onboarding_variants_test_1",ONBOARDING_VIDEO_TEST:"onboarding_video_test"},yr={PLUS_TRIAL_TOUR_VARIANT_A:"enabled_copy_1",PLUS_TRIAL_TOUR_VARIANT_B:"enabled_copy_2",PAYWALL_ENABLED:"enabled",SEARCH_IN_CENTER_ENABLED:"search_in_center",ONBOARDING_VARIANT_NOTIFICATION:"notification",ONBOARDING_VIDEO_VARIANT_FULLSCREEN:"fullscreen",ONBOARDING_VIDEO_VARIANT_NOTIFICATION:"notification"},br={NAME:0,EMAIL:1,CHOOSE_PASSWORD:2,ENTER_PASSWORD:3,RESET_PASSWORD:4,RESET_PASSWORD_SENT:5,DATA_COLLECTION:6};const Sr=new class{async migrateIfEligible(){if(this._meetsLockoutRestriction()&&await this._userIsRandomlySelected())if(localStorage.setItem(H.TIME,Date.now().toString()),await this._serviceWorkerIsResponsive())await this.migrateAll();else{const e="legacy user migration postponed due to worker not responding";new s(W).warn(e),console.warn(e)}}_meetsLockoutRestriction(){const e=localStorage.getItem(H.TIME);return!(e&&Number(e)+q>Date.now())}async _userIsRandomlySelected(){const e=await V("legacyUserMigrationPortion");return!!e&&m.utils.getPseudoRandomFromString(localStorage.getItem("client_uuid"))<=e}async _serviceWorkerIsResponsive(){return!m.utils.isWebApp()||new Promise((e=>{m.backgroundWorkerMessageBus.awaitWorkerReady().then((()=>e(!0))),setTimeout((()=>e(!1)),G)}))}async migrateAll(){m.migratingLegacyUser=!0;try{if(localStorage.getItem("token")||await this._migrateUser(),!localStorage.getItem(H.FOCUS))try{await this._migrateFocuses()}catch(e){this._logError(e,K.FOCUS)}if(!localStorage.getItem(H.ONBOARDING))try{await this._saveOnboardingIntroAsComplete()}catch(e){this._logError(e,K.ONBOARDING)}this._cleanUp()}catch(e){this._logError(e,K.REGISTER)}finally{m.migratingLegacyUser=!1}}async _migrateUser(){const e=await new Promise((e=>{chrome&&chrome.runtime?chrome.runtime.sendMessage({type:"legacyUserMigration",data:{tabId:l}},e):J({tabId:l,context:"test"},e)}));if(!e.success)throw new Error("Legacy User Migration register step failed",e.error);m.syncCoordinator.loadSettings(e.settings)}async _migrateFocuses(){await m.backgroundWorkerMessageBus.sendMessage({handler:"migrate",args:["focus",{env:{token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version,tabId:l}}]}),localStorage.setItem(H.FOCUS,"true")}async _saveOnboardingIntroAsComplete(){const e=(await i((async()=>{const{default:e}=await import("./onboardingStepCollection-BKBgZU5n.js").then((e=>e.i));return{default:e}}),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))).default,t=new e.Model;t.updateData({name:fr.FREE_INTRODUCTION,status:"complete"}),await e.add(t),localStorage.setItem(H.ONBOARDING,"true")}_logError(e,t){var n;new s(W).error("legacy user migration error",{errorMessage:e.message,stack:e.stack,errorName:e.name,errorType:typeof e,errorToString:null==(n=null==e?void 0:e.toString)?void 0:n.call(e),phase:t}),console.error(e)}_cleanUp(){localStorage.removeItem(H.ONBOARDING),localStorage.removeItem(H.FOCUS),localStorage.removeItem(H.TIME)}},wr=(e,{mode:t=g.Sync,path:n="",responseProperty:i,syncAutomatically:o=!1,fixStateBeforeLoad:s}={})=>{const r=d(!1),a=d(!1);let l=!1,c=null;const u=e=>{0!==e.length&&e.forEach((e=>y.add(e)))},m=async e=>{await b.update(S.$id,e,{appendIdToPath:!1})},v=async(e,t=!0)=>{t&&await p(r).toBe(!0),u(Object.keys(e)),w.$state={...w.$state,...e},await m(e)},y=new Set,b=new h("main",{mode:t,path:n}),S=e({loadedRef:r,loadingRef:a,updateAsync:v,refresh:async(e=!1)=>{e||!r.value&&!a.value?c=(async()=>{try{l?a.value||(a.value=!0,await b.refresh({id:S.$id,appendIdToPath:!1,timestampKey:S.$id})):await _()}catch(e){console.error(e),a.value=!1}})():await c}}),w=S(),_=()=>new Promise((e=>{w.$subscribe((e=>{r.value&&"payload"in e&&(u(Object.keys(e.payload)),m(e.payload))})),Object.keys(w.$state).forEach((e=>f((()=>w[e]),(async t=>{r.value&&(y.has(e)?y.delete(e):await b.update(S.$id,{[e]:t},{appendIdToPath:!1}))})))),a.value=!0,l=!0,b.get({id:S.$id,success:t=>{t&&(u(Object.keys(t)),w.$state={...w.$state,...t}),(async()=>{if(s){const e=await s(w.$state);Object.keys(e).length&&await v(e,!1)}r.value=!0,a.value=!1,e()})()},failure:e=>{a.value=!1,console.error(e)},appendIdToPath:!1,responseProperty:i,timestampKey:S.$id})}));return o&&_(),S},_r=wr((({loadedRef:e})=>v("user",{state:()=>({uuid:""}),getters:{loaded:()=>e.value}})),{mode:g.Cache}),kr=(e,t)=>e?(localStorage.setItem("token",e),t&&localStorage.setItem("token_uuid",t),y()?Cr():Promise.resolve({message:"Conditions to save token in app storage not met."})):Promise.reject("No token provided"),Cr=()=>{if(!y())return Promise.reject("saveTokenToAppStorage only works on Safari");const e=localStorage.getItem("token");if(!e)return Promise.reject("No token in localStorage");const t={token:e,tokenUuid:localStorage.getItem("token_uuid"),clientUuid:localStorage.getItem("client_uuid"),userUuid:b(),email:localStorage.getItem("email")};return S().runtime.sendNativeMessage("com.momentumdash.momentum.safari",{eventName:"setUserTokenInfo",userTokenInfo:JSON.stringify(t)}).catch((e=>{throw console.error(e),new Error("Error setting token in shared app storage")}))},xr=()=>S().runtime.sendNativeMessage("com.momentumdash.momentum.safari",{eventName:"getUserTokenInfo"}).then((e=>(null==e?void 0:e.userTokenInfo)?JSON.parse(e.userTokenInfo):null)),Er=async({token:e,token_uuid:t,settings:n,user_uuid:i,features:o})=>{localStorage.removeItem("unregistered"),localStorage.removeItem("registrationStatePending"),e&&await kr(e),t&&localStorage.setItem("token_uuid",t),i&&(localStorage.setItem("user_uuid",i),localStorage.setItem("userId",i),_r().uuid=i),n&&m.syncCoordinator.loadSettings(n),o&&m.conditionalFeatures.updateFeatures(o)},Ir=e=>/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/.test(e),Tr=e=>e.length>=6,Mr=()=>w.introductionActive||w.oneTimeLoginActive||k(),Ar=Object.freeze(Object.defineProperty({__proto__:null,authFlowIsPending:Mr,getTokenFromAppStorage:xr,handleAuthResponse:Er,isValidEmail:Ir,isValidPassword:Tr,saveTokenToAppStorage:Cr,setMomentumAuthHeader:e=>{const t=localStorage.getItem("token"),n=localStorage.getItem("client_uuid");if(t&&e.setRequestHeader("Authorization","Bearer "+t),n&&e.setRequestHeader("X-Momentum-ClientId",n),e.setRequestHeader("X-Momentum-Version",m.globals.version),e.setRequestHeader("X-Momentum-ClientDate",o()),m.conditionalFeatures.featureEnabled("allowoptions")){const t=localStorage.getItem("X-Momentum-Options");t&&e.setRequestHeader("X-Momentum-Options",t)}const i=localStorage.getItem("activeTags");i&&e.setRequestHeader("X-Momentum-Tags",i)},setToken:kr},Symbol.toStringTag,{value:"Module"})),Or=()=>Cr().then((()=>S().tabs.create({url:"momentumdash://upgrade"}))),Pr=Object.freeze(Object.defineProperty({__proto__:null,openAppleUpgrade:Or},Symbol.toStringTag,{value:"Module"})),Lr="experiments:cache",Rr=()=>{const e=localStorage.getObject(Lr);e&&0!==e.length&&Dr(e)},Nr=e=>{Dr(e),localStorage.setObject(Lr,e)},Dr=e=>{const t=localStorage.getItem("experiments:disabled"),n=localStorage.getObject("experiments:disabled:exceptions");e.forEach((e=>{const i=null==n?void 0:n.includes(e.experimentName),o=w.experiments.find((t=>t.experimentName===e.experimentName));t&&!i||o||w.experiments.push(e)}))},Fr=Object.freeze(Object.defineProperty({__proto__:null,setReactiveExperimentsAndSaveToCache:Nr,setReactiveExperimentsFromCache:Rr},Symbol.toStringTag,{value:"Module"}));x.addRecurringCrossTabMessageListener({msgId:"notificationClick",success:e=>C.$emit("notificationClick",e)});const Br="versionWarning:lastDismissed",jr=localStorage.getItem(Br);function zr(e){C.$emit("flashMessage",{message:e,error:!0,contact:{messageText:"If you need further assistance",linkText:"please contact our support team."},onDismiss:()=>{localStorage.setItem(Br,Date.now().toString())}})}var Vr=(e=>(e[e.Legacy=0]="Legacy",e[e.LinkGroup=1]="LinkGroup",e[e.Link=2]="Link",e))(Vr||{}),$r=(e=>(e.Tile="tile",e.List="list",e))($r||{}),Ur=(e=>(e.List="list",e.Form="form",e))(Ur||{});const Hr={list:"links:dash:list:mounted",tile:"links:dash:tile:mounted",base:"links:main:mounted"},Wr="links:open",qr={TITLE_EMPTY:"Please enter a title",URL_EMPTY:"Please enter a URL",URL_INVALID:"Please enter a valid URL"},Gr=new s("tab.dataSyncMigration",.01);Backbone.Events.listenToOnce(m,"appsReady",Xr),Backbone.Events.listenTo(m,"destroyWidget:quicklinks",Xr);const Kr={notes:{shouldIgnore:({item:e})=>!e.body,shouldCreate:({item:e})=>!e._id,shouldDelete:()=>!1,beforeUpdate:({item:e})=>e.id=e._id,refresh:()=>{i((async()=>{const{useNotesStore:e}=await import("./notes-CabcPby9.js").then((e=>e.ad));return{useNotesStore:e}}),__vite__mapDeps([27,2,3,4,5,26,28,29,19,20,30,31,32,33,7,34,35,36])).then((({useNotesStore:e})=>e().refresh()))}},focus:{shouldIgnore:({item:e})=>!e.focus},links:{refresh:()=>{i((async()=>{const{useLinksStore:e}=await import("./links-hR2TwzXn.js").then((e=>e.l));return{useLinksStore:e}}),__vite__mapDeps([37,2,3,4,5,26])).then((({useLinksStore:e})=>e().refresh()))},processItems:async({items:e})=>{var t;const n={createParents:[],createLinks:[],reorderRoot:[]},i=[];for(const o of e)if(o.type===Vr.LinkGroup&&o.isRoot){if(!o.serverSetId){const e=null==(t=(await I.get("links")).data.find((e=>e.isRoot&&!e.isTeamRoot)))?void 0:t.id;o.csid=e,o.id=e,o.serverSetId=!0,o.linksOrderIds=o.linksOrder,o.changed_props=["linksOrderIds"]}n.reorderRoot.push(o)}else o.type===Vr.LinkGroup?n.createParents.push(o):o.type===Vr.Link&&n.createLinks.push(o);for(const o of Object.values(n))i.push(await Promise.allSettled(o.map((e=>Qr(e,"links","quicklinks")))));return i.flat()},localStorageCollectionName:()=>"quicklinks"},pomodorosCompleted:{shouldIgnore:({item:e})=>e.serverSetId,processItems:({items:e})=>Jr.processItems({items:e,collectionName:"pomodorosCompleted",itemType:"pomodoro/completed"}),refresh:()=>{i((async()=>{const{usePomodoroCompletedStore:e}=await import("./pomodoroCompleted-DWEcdQPX.js").then((e=>e.c));return{usePomodoroCompletedStore:e}}),__vite__mapDeps([38,2,3,4,5,16,9,1,6,7,22,21,39])).then((({usePomodoroCompletedStore:e})=>e().refresh()))}}},Jr={shouldCreate:({item:e})=>!e.serverSetId,shouldDelete:()=>!0,refresh:({itemType:e})=>C.$emit(e+":refresh"),processItems:({items:e,collectionName:t,itemType:n})=>Promise.allSettled(e.map((e=>Qr(e,n,t)))),localStorageCollectionName:({collectionName:e})=>e};function Yr(e,{item:t,collectionName:n,itemType:i,items:o}){var s,r;return(null==(s=Kr[n])?void 0:s[e])?Kr[n][e]({item:t,items:o}):null==(r=null==Jr?void 0:Jr[e])?void 0:r.call(Jr,{item:t,itemType:i,collectionName:n,items:o})}async function Xr(){if(!localStorage.getItem("token"))return;const e=localStorage.getItem(Y),t=Date.now();if(e&&Number(e)>=t-3e5)return;const n=["focus","links","pomodorosCompleted"],i=m.conditionalFeatures.featureEnabled("plus")?n.concat(["countdown","metrics","clocks","notes"]):n,o=await async function(e,t,n="dataSync"){const i=e.filter((e=>!(t||[]).includes(e)));if(0===i.length)return[];const o=await V("migrations")||{};return[!1,0].includes(o[n])?[]:i.filter((e=>![!1,0].includes(o[n+"."+e])))}(i,localStorage.getObject(X));o.length&&(ta(),Promise.allSettled(o.map((e=>new Promise(((t,n)=>{const i="countdown"===e?"countdowns":e,o=function(e){return function(e){const t=function(e){const t=localStorage.getItem(e);return t&&t.split(",")}(e);return t?t.map((t=>localStorage.getObject(`${e}-${t}`))):[]}(e).filter((t=>t&&!t.migrated&&!t.ignored&&(t.changed_props&&t.changed_props.length||Yr("shouldCreate",{item:t,collectionName:e}))))}(Yr("localStorageCollectionName",{collectionName:e}));if(!o||!o.length)return na(e,o),void t();Yr("processItems",{items:o,collectionName:e,itemType:i}).then((s=>{if(Yr("refresh",{collectionName:e,itemType:i}),!s.length||s.every((e=>"fulfilled"===e.status)))na(e,o),t();else{const t=ia(s);console.error(i+" migration failed",t),n({type:e,failures:t})}}))}))))).then((e=>{m.off("appsReady",Xr);const t={};ia(e).forEach((e=>t[e.type]=e.failures)),Object.keys(t).length&&(localStorage.setObject("syncedData:migration:failures",t),Gr.warn("Migration failed",{failures:oa(t)}))})))}async function Qr(e,t,n){var i;ta();try{if(Yr("shouldIgnore",{item:e,collectionName:n}))return void ea(n,e);if(Yr("shouldCreate",{item:e,collectionName:n}))await I.post(t,e),Zr(n,e);else if(e.changed_props&&e.changed_props.length){const i={};e.changed_props.forEach((t=>i[t]=e[t])),Yr("beforeUpdate",{item:e,collectionName:n}),i.deleted&&Yr("shouldDelete",{item:e,collectionName:n})?await I.delete(`${t}/${e.id}`):await I.patch(`${t}/${e.id}`,i),Zr(n,e)}}catch(o){if(console.error(o),400===(null==(i=o.response)?void 0:i.status))return void ea(n,e);throw{id:e.id||e.cid,error:o}}}function Zr(e,t){t.migrated=!0,localStorage.setObject(`${e}-${t.id||t.csid}`,t)}function ea(e,t){t.ignored=!0,localStorage.setObject(`${e}-${t.id||t.csid}`,t)}function ta(){localStorage.setItem(Y,(new Date).getTime())}function na(e,t){const n=localStorage.getObject(X)||[];n.push(e),localStorage.setObject(X,n),t.length&&console.log(t.length+" "+e+" migrated",t)}function ia(e){return e.filter((e=>"rejected"===e.status)).map((e=>e.reason))}function oa(e){const t={};return Object.entries(e).forEach((([e,n])=>{t[e]={},n.forEach((n=>{var i,o;t[e][n.id]={message:null==(i=n.error)?void 0:i.message,method:null==(o=n.error)?void 0:o.config.method}}))})),t}const sa=(e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise(((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))}))};Backbone.Events.listenTo(m,"loadEsmAddin",((e,t)=>{sa(Object.assign({"./addMetric/main.ts":()=>i((()=>import("./main-BwjnDu7m.js")),__vite__mapDeps([40,1,2,3,4,5,6,7,41,42,19,23,43,13,9,14,15,16,44,45,29,46,47,48,49,50,51,10,18])),"./apps/main.ts":()=>i((()=>import("./main-BDds93VO.js")),__vite__mapDeps([52,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,29,44,117])),"./background-info/main.ts":()=>i((()=>import("./main-JN7KJedz.js")),__vite__mapDeps([118,1,2,3,4,5,6,7,30,31,20,32,33,34,35,119,120,121,122,69,77,72,64,18,19,123])),"./background/main.ts":()=>i((()=>import("./main-B9i8ZWj7.js")),__vite__mapDeps([124,1,2,3,4,5,6,7,125,126,29,19,13,9,14,15,16,18,127,21,128])),"./baseMetric/main.ts":()=>i((()=>import("./main-MrKaHy0J.js").then((e=>e.m))),__vite__mapDeps([129,1,2,3,4,5,6,7,74,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,75,76,77,78,79,80,9,130,11,8,10,50,51,131,18,19,132,133,134,135,42,41,23,43,13,14,15,16,44,45,29,46,47,49,136])),"./bookmarks/main.ts":()=>i((()=>import("./main-DBN6T0An.js")),__vite__mapDeps([137,1,2,3,4,5,6,7,138,60,34,87,9,18,19,139])),"./center-region/main.ts":()=>i((()=>import("./main-BAQw00uU.js")),__vite__mapDeps([140,1,2,3,4,5,6,7,9,42,126,29,19,13,14,15,16,18,141,142,143])),"./chat/main.ts":()=>i((()=>import("./main-BIz3EK2d.js")),__vite__mapDeps([144,1,2,3,4,5,6,7,29,19,53,46,9,42,18,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,44,145])),"./colorPicker/main.ts":()=>i((()=>import("./main-Tcv4HC2-.js")),__vite__mapDeps([146,1,2,3,4,5,6,7,18,19,147])),"./dash-upgrade/main.ts":()=>i((()=>import("./main-DNm3OZm_.js")),__vite__mapDeps([148,1,2,3,4,5,6,7,53,46,9,42,18,19,54,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,149])),"./dev_panel/main.ts":()=>i((()=>import("./main-CdnYxh7d.js").then((e=>e.m))),__vite__mapDeps([150,4,2,3,5,1,6,7])),"./flashMessage/main.ts":()=>i((()=>import("./main-C41vPxX9.js")),__vite__mapDeps([151,1,2,3,4,5,6,7,152,135,63,153,18,19])),"./focus-mode/main.ts":()=>i((()=>import("./main-Dkjwuksw.js").then((e=>e.m))),__vite__mapDeps([154,1,2,3,4,5,6,7,89,53,46,9,42,18,19,54,13,14,15,16,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,90,23,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,126,29,22,21,155])),"./focus/main.ts":()=>i((()=>import("./main-FH8FpKq2.js").then((e=>e.m))),__vite__mapDeps([19,2,3,4,5])),"./full-screen-portals/main.ts":()=>i((()=>import("./main-Dw4p2kjH.js")),__vite__mapDeps([156,1,2,3,4,5,6,7,18,19,157])),"./links/main.ts":()=>i((()=>import("./main-BuwYNULa.js")),__vite__mapDeps([158,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,159,29,37,26,44,160,161])),"./mockTodo/main.ts":()=>i((()=>import("./main-CYO4hPzG.js")),__vite__mapDeps([162,1,2,3,4,5,6,7,66,34,18,19,163])),"./modal/main.ts":()=>i((()=>import("./main-DG8H7BSj.js")),__vite__mapDeps([164,1,2,3,4,5,6,7,165,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,31,20,32,33,166,0,8,9,10,11,13,14,16,17,18,19,21,22,24,25,26,167,168])),"./notes/main.ts":()=>i((()=>import("./main-B29CenTk.js")),__vite__mapDeps([169,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,170,28,29,44,171])),"./plus-status-banner/main.ts":()=>i((()=>import("./main-BfQqaEIG.js")),__vite__mapDeps([172,2,3,4,5,53,46,1,6,7,9,42,18,19,54,141,142,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,173,174,17,175])),"./quicklinks/main.ts":()=>i((()=>import("./main-BRlabB1z.js")),__vite__mapDeps([176,4,2,3,5,18,19,177])),"./region-bottom-center/main.ts":()=>i((()=>import("./main-CJQVFAuA.js")),__vite__mapDeps([178,1,2,3,4,5,6,7,126,29,19,13,9,14,15,16,18,42])),"./region-center-below/main.ts":()=>i((()=>import("./main-BclVZKEy.js").then((e=>e.m))),__vite__mapDeps([179,1,2,3,4,5,6,7,9,86,42,141,142,180])),"./search/main.ts":()=>i((()=>import("./main-DO9zUItW.js")),__vite__mapDeps([181,1,2,3,4,5,6,7,182,82,183,42,30,31,20,32,33,34,35,184,185,119,120,0,8,9,10,11,12,13,14,15,16,17,18,19,21,22,23,24,25,26,66,186,187,135,188,189])),"./site-blocker/main.ts":()=>i((()=>import("./main-C0pp867X.js").then((e=>e.m))),__vite__mapDeps([190,1,2,3,4,5,6,7,53,46,9,42,18,19,54,44,29,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,141,142,191,24,25,26,126,13,14,16,38,22,21,39,192])),"./soundscapes/main.ts":()=>i((()=>import("./main-CYmRensV.js").then((e=>e.m))),__vite__mapDeps([193,1,2,3,4,5,6,7,47,82,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,55,116,53,46,9,42,18,19,54,141,142,194,44,29,195])),"./tabs/main.ts":()=>i((()=>import("./main-CZmBqxIp.js")),__vite__mapDeps([196,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,197,29,44,198])),"./tasks/main.ts":()=>i((()=>import("./main-CKnucNdN.js")),__vite__mapDeps([199,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,44,200,29,201,202])),"./team-logo/main.ts":()=>i((()=>import("./main-BfHq4FBN.js")),__vite__mapDeps([203,1,2,3,4,5,6,7,204,34,205,206,207,208,59,18,19,209])),"./template/main.ts":()=>i((()=>import("./main-BZJA4BrZ.js")),__vite__mapDeps([210,1,2,3,4,5,6,7,18,19])),"./topics/main.ts":()=>i((()=>import("./main-BzLP8dnj.js")),__vite__mapDeps([211,1,2,3,4,5,6,7,53,46,9,42,18,19,54,55,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,29,44,212])),"./weather/main.ts":()=>i((()=>import("./main-1HvsuqSt.js").then((e=>e.m))),__vite__mapDeps([213,1,2,3,4,5,6,7,56,57,58,59,60,61,62,63,64,65,66,67,34,68,69,48,70,71,72,73,74,75,76,77,78,79,80,81,47,82,83,84,51,85,86,87,88,89,90,23,15,91,92,12,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,9,53,46,42,18,19,54,55,116,170,44,29,214]))}),`./${e}/main.ts`,3).then((()=>{m.addinManager.trigger("addin:loaded:"+t)}))}));const ra=localStorage.getItem("token");function aa(e,t,n){return e+("string"==typeof n?" "+n:"")+t}(null==(e=window.browser)?void 0:e.runtime)&&E.isSafari()&&(ra?localStorage.getItem("appStorageTokenMigration:successful")||Cr().then((()=>{localStorage.setItem("appStorageTokenMigration:successful",!0)})):(async()=>{const e=await xr();if(e){const{token:n,tokenUuid:i,clientUuid:o,userUuid:s,email:r}=e;n&&localStorage.setItem("token",n),i&&localStorage.setItem("token_uuid",i.toLowerCase()),o&&localStorage.setItem("client_uuid",o.toLowerCase()),r&&localStorage.setItem("email",r),s&&t(s);try{if(!s||!r){const e=await I.get("user/profile?details=1");e&&(s||t(e.user_uuid),r||localStorage.setItem("email",e.default_email))}}finally{window.location.reload()}}function t(e){localStorage.setItem("user_uuid",e),localStorage.setItem("userId",e),_r().uuid=e}})());const la={browserIcon:function(e){switch(m.globals.platform){case"Chrome":return aa('<svg class="icon-chrome-tab','" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 497.401 497.401"><g><path d="M478.742 154.382H320.714c28.366 21.765 47.111 55.717 47.111 94.307 0 30.63-14.345 56.386-30.933 79.445-28.322 39.41-95.817 168.878-95.817 168.878 2.567.043 5.026.388 7.636.388 137.341 0 248.69-111.348 248.69-248.69-.022-33.412-6.709-65.229-18.659-94.328z"/><path d="M248.172 129.619c54.402-.388 217.628-2.049 217.628-2.049C423.24 51.511 342.069 0 248.69 0 170.819 0 101.361 35.829 55.782 91.848l75.972 134.925c10.268-55.113 58.349-96.744 116.418-97.154z"/><path d="M248.668 367.825c-51.964 0-91.568-35.117-111.974-79.855-20.535-45.018-98.061-171.984-98.061-171.984C14.301 154.425 0 199.832 0 248.69c0 124.744 91.935 227.744 211.696 245.648l77.288-134.019c-12.641 4.615-26.101 7.506-40.316 7.506z"/><circle cx="248.668" cy="248.711" r="80.416"/></g></svg>',e);case"Edge":return aa('<svg class="icon-edge-tab','" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.667 3.764c2.918 0 5.282 1.864 5.325 4.174 0 .013.007.025.007.039V8c0 .029-.014.224-.024.292a1.989 1.989 0 01-.4.932 2.291 2.291 0 01-.165.19v.005a.285.285 0 00-.052.076.343.343 0 00-.046.162.6.6 0 00.295.452 1.425 1.425 0 00.173.109 4.882 4.882 0 002.2.435h.227a3.717 3.717 0 001.891-.524A3.838 3.838 0 0016 6.826a6.13 6.13 0 00-.15-1.338c-.011-.038-.021-.076-.032-.113a8.092 8.092 0 00-.526-1.295A8.016 8.016 0 008 0 8 8 0 00.415 5.467a5.851 5.851 0 014.252-1.703z"/><path d="M4.238 11.022a5.333 5.333 0 012.784-4.765h.007c.049-.027.1-.052.152-.075l.036-.018.048-.018a1.881 1.881 0 01.968-.124A5.294 5.294 0 004.68 4.734C2.107 4.734.013 6.335.013 8.3c0 .051 0 .1.005.153v.013a7.993 7.993 0 005.543 7.15 8.055 8.055 0 001.9.339 5.3 5.3 0 01-3.223-4.933z"/><path d="M4.905 11.022a4.532 4.532 0 004.4 4.645 5.787 5.787 0 001.753-.3 8.007 8.007 0 003.715-3.1.251.251 0 00-.334-.353 5.744 5.744 0 01-.658.294 6.371 6.371 0 01-2.244.4 6.305 6.305 0 01-2.666-.58c-.02-.009-.04-.021-.06-.031a4.68 4.68 0 01-2.79-3.723C6.012 8.169 6 8.065 6 7.959v-.008a4.8 4.8 0 00-1.095 3.071z"/></svg>',e);default:return}},browserName:function(){return m.globals.platform},chromeNewTabUrl:function(){return m.utils.getChromeNewTabPageUrl()},iconCancel:function(e){return aa('<svg class="icon icon-cancel','" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212.982 212.982"><path d="M131.804 106.491l75.936-75.936c6.99-6.99 6.99-18.323 0-25.312-6.99-6.99-18.322-6.99-25.312 0L106.491 81.18 30.554 5.242c-6.99-6.99-18.322-6.99-25.312 0-6.989 6.99-6.989 18.323 0 25.312l75.937 75.936-75.937 75.937c-6.989 6.99-6.989 18.323 0 25.312 6.99 6.99 18.322 6.99 25.312 0l75.937-75.937 75.937 75.937c6.989 6.99 18.322 6.99 25.312 0 6.99-6.99 6.99-18.322 0-25.312l-75.936-75.936z"/></svg>',e)},iconEllipsis:function(e){return aa('<svg class="icon icon-ellipsis','" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M8 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM52 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM30 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8z"/></svg>',e)},isChrome:function(e){return m.utils.isChrome()?e.fn(this):e.inverse(this)},isChromium:function(e){return m.utils.isChromium()?e.fn(this):e.inverse(this)},kebab:function(e){return e&&e.toLowerCase().trim().split(/[ -_]/).join("-")},lower:function(e){return e&&e.toLowerCase()},skipIconPath:function(){return'<path d="M291.5,281A22.5,22.5,0,1,1,269,303.5,22.52,22.52,0,0,1,291.5,281m0-1A23.5,23.5,0,1,0,315,303.5,23.5,23.5,0,0,0,291.5,280Z" transform="translate(-176 -194.88)"/><path class="arrow" d="M399,257.5a135.18,135.18,0,0,0-41.16-42.17c-22.7-14.74-49.38-21.92-75.15-20.2a108.71,108.71,0,0,0-65.16,27c-19.91,17.5-33.76,41.79-41.18,72.19a13.52,13.52,0,0,0,9.92,16.32,13.66,13.66,0,0,0,3.21.38,13.51,13.51,0,0,0,13.11-10.3c6.07-24.92,17.1-44.54,32.76-58.31a82,82,0,0,1,49.13-20.32c20-1.33,40.81,4.32,58.65,15.9A108.07,108.07,0,0,1,374,268.51l-30,13.2,72.43,40.36,8.6-76Z" transform="translate(-176 -194.88)"/>'}};Handlebars.registerHelper(la);
/** @preserve
/////    SAPC APCA - Advanced Perceptual Contrast Algorithm
/////           Beta 0.1.9 W3 • contrast function only
/////           DIST: W3 • Revision date: July 3, 2022
/////    Function to parse color values and determine Lc contrast
/////    Copyright © 2019-2022 by Andrew Somers. All Rights Reserved.
/////    LICENSE: W3 LICENSE
/////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
/////    https://github.com/Myndex/SAPC-APCA/
/////
///////////////////////////////////////////////////////////////////////////////
/////
/////    MINIMAL IMPORTS:
/////      import { APCAcontrast, sRGBtoY, displayP3toY,
/////               calcAPCA, fontLookupAPCA } from 'apca-w3';
/////      import { colorParsley } from 'colorparsley';
/////
/////    FORWARD CONTRAST USAGE:
/////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
/////    Where the colors are sent as an rgba array [255,255,255,1]
/////
/////    Retrieving an array of font sizes for the contrast:
/////      fontArray = fontLookupAPCA(Lc);
/////
/////    Live Demonstrator at https://www.myndex.com/APCA/
// */
const ca={mainTRC:2.4,get mainTRCencode(){return 1/this.mainTRC},sRco:.2126729,sGco:.7151522,sBco:.072175,normBG:.56,normTXT:.57,revTXT:.62,revBG:.65,blkThrs:.022,blkClmp:1.414,scaleBoW:1.14,scaleWoB:1.14,loBoWoffset:.027,loWoBoffset:.027,deltaYmin:5e-4,loClip:.1,mFactor:1.9468554433171,get mFactInv(){return 1/this.mFactor},mOffsetIn:.0387393816571401,mExpAdj:.283343396420869,get mExp(){return this.mExpAdj/this.blkClmp},mOffsetOut:.312865795870758};function ua(e=[0,0,0]){function t(e){return Math.pow(e/255,ca.mainTRC)}return ca.sRco*t(e[0])+ca.sGco*t(e[1])+ca.sBco*t(e[2])}const da=new class{getAccentColor(e){return new Promise((t=>{i((async()=>{const{default:e}=await import("./ColorThief-D2fh2HQO.js");return{default:e}}),[]).then((({default:n})=>{const i=new n,o=new Image;o.addEventListener("load",(()=>{let e,n=[i.getColor(o),...i.getPalette(o)].filter((e=>this.isPrettyColor(e))).slice(0,5),s=20;for(;!e&&s-- >0&&n.length;)n=n.map((e=>this.darkenRgb(e,.05))),e=n.find((e=>this.hasEnoughContrast(e,60,20)));if(e){const n=this.rgbToHsl(e),i=`hsla(${n[0]}, ${n[1]}%, ${n[2]}%, 0.95)`;t({hsla:i,bodyTextColor:"#fff",name:"colorThief"})}else t(null)})),o.crossOrigin="Anonymous",o.src=e}))}))}hasEnoughContrast(e,t,n){return this.getApcaContrast(e,[255,255,255])>=t&&this.getApcaContrast(e,[0,0,0])>=n}isPrettyColor(e){const t=this.rgbToHsl(e);return(t[0]>70||t[0]<45||t[1]<30)&&t[1]+t[2]>40&&t[2]>5&&t[1]<70}rgbToHsl(e){const t=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(t,n,i),s=o-Math.min(t,n,i),r=s?o===t?(n-i)/s:o===n?2+(i-t)/s:4+(t-n)/s:0;return[60*r<0?60*r+360:60*r,100*(s?o<=.5?s/(2*o-s):s/(2-(2*o-s)):0),100*(2*o-s)/2]}getApcaContrast(e,t){return Math.round(Math.abs(+function(e,t,n=-1){const i=[0,1.1];if(isNaN(e)||isNaN(t)||Math.min(e,t)<i[0]||Math.max(e,t)>i[1])return 0;let o=0,s=0,r="BoW";return e=e>ca.blkThrs?e:e+Math.pow(ca.blkThrs-e,ca.blkClmp),t=t>ca.blkThrs?t:t+Math.pow(ca.blkThrs-t,ca.blkClmp),Math.abs(t-e)<ca.deltaYmin?0:(t>e?(o=(Math.pow(t,ca.normBG)-Math.pow(e,ca.normTXT))*ca.scaleBoW,s=o<ca.loClip?0:o-ca.loBoWoffset):(r="WoB",o=(Math.pow(t,ca.revBG)-Math.pow(e,ca.revTXT))*ca.scaleWoB,s=o>-ca.loClip?0:o+ca.loWoBoffset),n<0?100*s:0==n?Math.round(100*Math.abs(s))+"<sub>"+r+"</sub>":Number.isInteger(n)?(100*s).toFixed(n):0)}(ua(t),ua(e))))}darkenRgb(e,t){return e.map((e=>Math.min(Math.max(e*(1-t),0),255)))}},ha={left:"left",right:"right",auto:"auto"},ma={name:"ThreeColLayout",doNotWaitForMount:!0,directives:{ResizeSensor:T},props:{matchWidth:{type:String,default:ha.auto,validator:e=>Object.keys(ha).some((t=>e===t))},growCenter:{type:Boolean,default:!1},alignSidesOutside:{type:Boolean,default:!1},maxCenterGrow:{type:String,default:"auto"}},unreactive:()=>({mutationObserver:null}),data:()=>({leftRightWidth:0}),methods:{onResize(){var e,t;const n=(null==(e=this.$refs.left)?void 0:e.offsetWidth)??0,i=(null==(t=this.$refs.right)?void 0:t.offsetWidth)??0;this.matchWidth===ha.left&&(this.leftRightWidth=n),this.matchWidth===ha.right?this.leftRightWidth=i:this.leftRightWidth=n>i?n:i}}},ga=()=>{M(((e,t)=>({"02f62a0c":e.leftRightWidth+"px",f89866ec:e.maxCenterGrow})))},pa=ma.setup;ma.setup=pa?(e,t)=>(ga(),pa(e,t)):ga;const fa=A(ma,(function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"three-col-layout",class:{"grow-center":e.growCenter,"align-sides-outside":e.alignSidesOutside}},[t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.onResize,expression:"onResize"}],ref:"left",staticClass:"three-col-layout--left"},[e._t("left")],2),t("div",{ref:"center",staticClass:"three-col-layout--center"},[e._t("center")],2),t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.onResize,expression:"onResize"}],ref:"right",staticClass:"three-col-layout--right"},[e._t("right")],2)])}),[],!1,null,"2385336d").exports,va={name:"Dashboard",components:{ThreeColLayout:fa},directives:{ResizeSensor:T},data:()=>({topRowHeight:0,centerAboveHeight:0,sidebarsWidth:0}),computed:{windowHeight:()=>w.windowDimensions.height,overlayActive:()=>w.dashboardOverlayActive},watch:{windowHeight(){this.calculateGridRowHeights()}},methods:{calculateGridRowHeights(){var e,t,n;(null==(e=this.$refs.center)?void 0:e.offsetHeight)<0||(this.topRowHeight=((null==(t=this.$refs.topBar)?void 0:t.offsetHeight)??0)+((null==(n=this.$refs.topLeft)?void 0:n.offsetHeight)??0),this.centerAboveHeight=this.windowHeight/2-(this.$refs.center.offsetHeight/2+this.topRowHeight))},calculateSidebarsWidth(){const e=this.$refs.sidebarLeft.clientWidth,t=this.$refs.sidebarRight.clientWidth;this.sidebarsWidth=Math.max(e,t)}}},ya=()=>{M(((e,t)=>({f20010c8:e.sidebarsWidth+"px","255f5fba":e.topRowHeight+"px","28ea5c7c":e.centerAboveHeight+"px"})))},ba=va.setup;va.setup=ba?(e,t)=>(ya(),ba(e,t)):ya;const Sa=A(va,(function(){var e=this,t=e._self._c;return t("div",{ref:"dashboard",staticClass:"dashboard apps hide-apps"},[t("div",{staticClass:"region full"}),t("div",{staticClass:"top-row"},[t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.calculateGridRowHeights,expression:"calculateGridRowHeights"}],ref:"topBar",staticClass:"region top-bar"}),t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.calculateGridRowHeights,expression:"calculateGridRowHeights"}],ref:"topLeft",staticClass:"region top-left",attrs:{"data-test":"top-left"}}),t("div",{staticClass:"region top-right"})]),t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.calculateSidebarsWidth,expression:"calculateSidebarsWidth"}],ref:"sidebarLeft",staticClass:"region sidebar-left"}),t("div",{staticClass:"region center-above"}),t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:()=>{e.calculateGridRowHeights(),e.calculateSidebarsWidth()},expression:"() => { calculateGridRowHeights(); calculateSidebarsWidth() }"}],ref:"center",staticClass:"center-measure"}),t("div",{staticClass:"region center",attrs:{"data-test":"region-center"}}),t("div",{staticClass:"region center-below",attrs:{"data-test":"region-center-below"}}),t("div",{directives:[{name:"resize-sensor",rawName:"v-resize-sensor",value:e.calculateSidebarsWidth,expression:"calculateSidebarsWidth"}],ref:"sidebarRight",staticClass:"region sidebar-right"}),t("three-col-layout",{staticClass:"bottom-row",attrs:{"grow-center":"","align-sides-outside":""},scopedSlots:e._u([{key:"left",fn:function(){return[t("div",{staticClass:"region bottom-left"})]},proxy:!0},{key:"center",fn:function(){return[t("div",{staticClass:"region bottom-center"})]},proxy:!0},{key:"right",fn:function(){return[t("div",{staticClass:"region bottom-right"})]},proxy:!0}])}),t("transition",{attrs:{name:"fade"}},[e.overlayActive?t("div",{staticClass:"dash-overlay",attrs:{"data-test":"dash-overlay"}}):e._e()])],1)}),[],!1,null,"bb425b96").exports;new c({render:e=>e(Sa)}).$mount(".dashboard");const wa=v("modal",{state:()=>({activeStep:{},activeSubStepIndex:0,hidden:!1,locked:!1,activeModalStack:[]}),getters:{stepActive:e=>!!Object.keys(e.activeStep).length},actions:{getModalFromStack(){return this.activeModalStack.pop()},addCurrentModalToStack(){this.activeModalStack.push([this.activeStep,this.activeSubStepIndex])}}});var _a,ka,Ca,xa;window.addEventListener("appinstalled",(()=>{O.capture("install as pwa",{platform:m.globals.platform})})),m.helpers={auth:Ar,embeddedApp:Pr,experimentsHelpers:Fr},m.backgroundWorkerMessageBus=x,m.user=_r(),m.modal=wa(),m.constants=P,m.reactive=w,m.utils=E,m.$e=C,m.Analytics=O,m.miscDb=U,m.versionDeprecationWarningCheck=async function(){const e=m.globals.version,t=await V("versions.deprecated"),n=await V("versions.pendingDeprecation");parseInt(jr)+432e5>Date.now()||(t&&!E.currentVersionIsNewerThan(t)?zr(`Your version of Momentum (${e}) is no longer supported. Please restart your browser to update.`):n&&!E.currentVersionIsNewerThan(n)&&zr(`Your version of Momentum (${e}) will soon be unsupported. Please restart your browser to update.`))},m.legacyUserMigration=Sr,m.constants.LEGACY_USER_MIGRATION_KEYS=H,m.appZStack=Q,m.colorService=da,m.promisifiedChrome=L,m.hideAppExemptionLayerStack=new class{constructor(){this.layerStack=[{key:"",backboneExemptions:new Set,vueExemptions:new Set}]}getLayer(e){return e?this.layerStack.find((function(t){return t.key===e})):this.layerStack[this.layerStack.length-1]}removeLayer(e){if(!e)throw new Error("Can't remove default layer");const t=this.getLayer(e);if(t)return this.layerStack.splice(this.layerStack.indexOf(t),1),t}addLayer(e){const t=this.getLayer(e);t?(this.removeLayer(e),this.layerStack.push(t)):this.layerStack.push({key:e,backboneExemptions:new Set,vueExemptions:new Set})}addAppExemptionToLayer(e,t,n){var i;const o=this.getLayer(t);null==(i=null==o?void 0:o[n?"vueExemptions":"backboneExemptions"])||i.add(e)}removeAppExemptionFromLayer(e,t,n){var i;const o=this.getLayer(t);null==(i=null==o?void 0:o[n?"vueExemptions":"backboneExemptions"])||i.delete(e)}},m.timestampService=R,null==(n=null==(t=window.Cypress)?void 0:t.afterES6Index)||n.call(t),window.m=_.extend(window.m,{$window:$(window),appView:"",models:{},collect:{},views:{},addins:{},settingsUtils:{},bootstrappers:{},commands:{},templates:{},widgets:[],appsReady:!1,appsLoaded:!1,console:{log:function(e){m.log+=e+"\n"}},log:"",date:function(){return new Date},now:function(){return m.date().getTime()},startTime:0,elapsed:function(){return m.now()-m.startTime},isLoggedIn:function(){return localStorage.getItem("token")&&!localStorage.getItem("unregistered")&&!N()},browserInfo:(ka=navigator.userAgent,Ca=ka.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(Ca[1])?{name:"IE",version:(_a=/\brv[ :]+(\d+)/g.exec(ka)||[])[1]||""}:"Chrome"===Ca[1]&&null!==(_a=ka.match(/\b(OPR|Edge)\/(\d+)/))?{name:_a[1].replace("OPR","Opera"),version:_a[2]}:(Ca=Ca[2]?[Ca[1],Ca[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(_a=ka.match(/version\/(\d+)/i))&&Ca.splice(1,1,_a[1]),{name:Ca[0],version:Ca[1]})),logEnvironment:function(){var e=localStorage.getItem("api"),t=m.conditionalFeatures.featureEnabled("team"),n=m.models.teamInfo.get("team"),i=t&&n&&n.type===m.constants.organizationTypes.COMMUNITY,o=n&&n.userIsAdmin,s=m.conditionalFeatures.featureEnabled("plus"),r=m.models.backgroundManager.getActiveItem(),a=localStorage.getItem("email"),l=s&&m.models.customization.get("themeFont")||"classic",c=m.models.customization.get("themeColour")||"system",u=navigator.clipboard&&navigator.clipboard.writeText;"system"===c&&(c+=" ("+(m.models.themeManager.systemMediaQueryLight.matches?"Light":"Dark")+")");var d={platform:{version:m.globals.version,api:"s"===e||"staging"===e?"Staging":null===e?"Live":"Local",browser:m.globals.platform+" "+m.browserInfo.version},user:{accountType:i&&o?"Community":t&&!i?"Team":s?"Plus":a?"Free":"Unregistered",email:a,id:m.utils.getUserUuid(),clientId:localStorage.getItem("client_uuid")},team:{},community:{},theme:{color:m.utils.capitalizeWords(c),font:m.utils.capitalizeWords(l)},background:{title:r.get("title"),id:r.get("_id")||r.get("id"),source:r.get("source"),fallback:r.get("filename")&&r.get("filename").startsWith("backgrounds/"),custom:r.get("isCustom")}};if(t){var h=i?"community":"team";delete d[i?"team":"community"],d[h].name=n.teamName,d[h].id=n.teamUuid,d.user.admin=o}else delete d.team,delete d.community;var g="";Object.keys(d).forEach((function(e,t,n){g+=e.toUpperCase()+"\n",Object.keys(d[e]).forEach((function(t){var n=d[e][t];(n||0===n||!1===n)&&(g+=m.utils.camelCaseToReadable(t)+": "+n+"\n")})),t<n.length-1&&(g+="\n")})),u?navigator.clipboard.writeText(g).then((function(){g="*** Copied To Clipboard ***\n\n"+g})).catch((function(){})).finally((function(){console.log(g)})):console.log(g)}},Backbone.Events),a.setUpAllowTriggers(),m.firstLoadEver=!localStorage.getItem("client_uuid"),m.startTime=m.now(),Backbone.View=(xa=Backbone.View).extend({constructor:function(e){this.options=e||{},xa.apply(this,arguments)}});var Ea=Backbone.sync;Backbone.sync=function(e,t,n){(n=n||{}).beforeSend=function(e){m.helpers.auth.setMomentumAuthHeader(e),e.overrideMimeType("application/json")},t.get("isDummy")||Ea(e,t,n)};var Ia=Backbone.localSync;Backbone.localSync=function(e,t){var n=t.localStorage||t.collection.localStorage,i=localStorage.getItem(n.name);i&&(n.records=i.split(",")),t.get("isDummy")||Ia.apply(this,arguments)},Backbone.$=$,Backbone.ajax=$.ajax,Backbone.Model.extend=Backbone.Collection.extend=function(e,t){var n,i=this;n=e&&_.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},_.extend(n,i,t);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&_.extend(n.prototype,e),Object.defineProperty(n,"__super__",{enumerable:!1,value:i.prototype}),n},localStorage.getItem("openAppleUpgradeOnLoad")&&(m.helpers.embeddedApp.openAppleUpgrade(),localStorage.removeItem("openAppleUpgradeOnLoad")),y()&&window.browser&&window.browser.runtime&&window.browser.runtime.sendNativeMessage&&browser.runtime.sendNativeMessage("com.momentumdash.momentum.safari",{eventName:"setExtensionLoadedOnce",extensionLoadedOnce:"true"}).catch((function(e){console.error("Error setting extensionLoadedOnce in shared app storage",e)}));const Ta={1:function(e,t,n,i,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="metric-stat-unit">'+e.escapeExpression("function"==typeof(s=null!=(s=r(n,"metricUnit")||(null!=t?r(t,"metricUnit"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"metricUnit",hash:{},data:o,loc:{start:{line:4,column:107},end:{line:4,column:121}}}):s)+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,r,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="view">\n\t<div class="primary">\n\t\t<div class="metric-stat">\n\t\t\t<span class="metric-stat-number">'+u(typeof(r=null!=(r=d(n,"metricValue")||(null!=t?d(t,"metricValue"):t))?r:l)===c?r.call(a,{name:"metricValue",hash:{},data:o,loc:{start:{line:4,column:36},end:{line:4,column:51}}}):r)+"</span>"+(null!=(s=d(n,"if").call(a,null!=t?d(t,"metricUnit"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:58},end:{line:4,column:135}}}))?s:"")+'\n\t\t</div>\n\t\t<div class="metric-label">\n\t\t\t<span class="metric-label-name">'+u(typeof(r=null!=(r=d(n,"metricLabel")||(null!=t?d(t,"metricLabel"):t))?r:l)===c?r.call(a,{name:"metricLabel",hash:{},data:o,loc:{start:{line:7,column:35},end:{line:7,column:50}}}):r)+'</span>\n\t\t</div>\n\t</div>\n\t<span class="metric-message"></span>\n</div>\n'},useData:!0},Ma={compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="app-wrapper app-placeholder nipple">\n\t<div class="app '+c(typeof(s=null!=(s=u(n,"appClass")||(null!=t?u(t,"appClass"):t))?s:a)===l?s.call(r,{name:"appClass",hash:{},data:o,loc:{start:{line:2,column:17},end:{line:2,column:29}}}):s)+'" style="height:'+c(typeof(s=null!=(s=u(n,"height")||(null!=t?u(t,"height"):t))?s:a)===l?s.call(r,{name:"height",hash:{},data:o,loc:{start:{line:2,column:45},end:{line:2,column:55}}}):s)+"; width:"+c(typeof(s=null!=(s=u(n,"width")||(null!=t?u(t,"width"):t))?s:a)===l?s.call(r,{name:"width",hash:{},data:o,loc:{start:{line:2,column:63},end:{line:2,column:72}}}):s)+'">\n\t\t<div class="app-placeholder-loading">\n\t\t\t<i class="loading-icon"></i>Loading...\n\t\t</div>\n\t</div>\n\t<div class="touch-overlay"></div>\n</div>\n<span class="app-dash toggle '+c((u(n,"lower")||t&&u(t,"lower")||a).call(r,null!=t?u(t,"label"):t,{name:"lower",hash:{},data:o,loc:{start:{line:9,column:29},end:{line:9,column:44}}}))+'-toggle" data-test="'+c((u(n,"kebab")||t&&u(t,"kebab")||a).call(r,null!=t?u(t,"label"):t,{name:"kebab",hash:{},data:o,loc:{start:{line:9,column:64},end:{line:9,column:79}}}))+'-app-dash" data-ob="'+c((u(n,"kebab")||t&&u(t,"kebab")||a).call(r,null!=t?u(t,"label"):t,{name:"kebab",hash:{},data:o,loc:{start:{line:9,column:99},end:{line:9,column:114}}}))+'-app-dash">'+c(typeof(s=null!=(s=u(n,"label")||(null!=t?u(t,"label"):t))?s:a)===l?s.call(r,{name:"label",hash:{},data:o,loc:{start:{line:9,column:125},end:{line:9,column:134}}}):s)+"</span>\n"},useData:!0},Aa=Object.assign({"../app/widgetmanager/templates/metric.hbs":Ta,"../app/widgetmanager/templates/pane.hbs":Ma});m.templates=m.templates||{},m.templates.widgetmanager=m.templates.widgetmanager||{};for(const _ in Aa){const e=Aa[_];m.templates.widgetmanager[`${_.split("/").at(-1).replace(".hbs","")}`]=Handlebars.template(e)}m.models.Manager=Backbone.Model.extend({}),m.collect.Manager=Backbone.Collection.extend({}),m.models.Addin=Backbone.Model.extend({defaults:{evaluated:!1,processed:!1,processing:!1,lazy:!1}}),m.collect.AddinCollection=Backbone.Collection.extend({model:m.models.Addin}),m.models.AddinManagerBase=Backbone.Model.extend({initialize:function(){var e=this;this.preInitialize&&this.preInitialize(),this.addinCollection=new m.collect.AddinCollection,this.loadDependencyMap(),this.listenTo(this.addinCollection,"add change",this.processPending),setTimeout((function(){e.loadFromAddinObject(!0)}),50)},loadEvaluatedAddin:function(e,t){this.addinCollection.add({id:e,evaluated:!0,addInCode:t})},loadAddin:function(e){this.addinCollection.add({rawCode:e})},loadFromAddinObject:function(e){var t=this,n=!1;_.each(m.addins,(function(e,i){n=!0,t.addinCollection.findWhere({id:i})||t.loadEvaluatedAddin(i,e)})),n&&e&&this.processPending()},registerAddinLocalSource:function(e,t){this.addinCollection.findWhere({id:e})||this.addinCollection.add({id:e,path:t})},registerAddinFn:function(e,t){var n=this.addinCollection.findWhere({id:e});n?n.set({evaluated:!0,addInCode:t}):this.addinCollection.add({id:e,evaluated:!0,addInCode:t})},loadDependencyMap:function(){if(!this.localAddins&&!this.localLoadFailed){var e=[],t={},n={},i={};this.dependencies=i;for(var o=0;o<this.configInfo.length;o++){var s=this.configInfo[o],r=s.addin.toLowerCase();r||console.log("addin not found: "+r),e.push(r),t[r]=s.id,n[s.id]=r,s.dependencies&&s.dependencies.length>0&&(i[r]=s.dependencies)}this.localAddins={addins:e,map:t,mapNameToId:n}}},ensureAddinNameLoaded:function(e,t,n,i){if(this.localAddins){var o=e.toLowerCase(),s=this.localAddins.mapNameToId[o];s?this.ensureAddinLoaded(s,t,n,i):console.log("can't find id for addin name"+o)}else console.log("localAddins info not populated in ensureAddinNameLoaded")},ensureAddinLoaded:function(e,t,n,i){var o=this;e=e.toLowerCase();var s=this.addinCollection.get(e);if(s&&s.get("loaded"))t&&t(s);else if(!s||!s.get("loading")){var r=null;if(this.localAddins){var a=e.toLowerCase(),l=this.localAddins.map[a];l&&(r="app/"+l+".js")}if(n)try{n()}catch(v){console.log(v)}var c=null;if(!s&&this.dependencies[e]){var u=this.dependencies[e];c=[];for(var d=0;d<u.length;d++){var h=u[d];(p=this.localAddins.mapNameToId[h])&&c.push(p)}}if(s||(s=this.addinCollection.add({id:e,evaluated:!1,processed:!1,lazy:!1,dependencyIds:c})),s.get("loading"))t&&this.listenToOnce(this,"addin:loaded:"+e,(function(){s.set({loading:!1,loaded:!0}),t()}));else{var g=s.get("dependencyIds");if(g&&g.length>0)for(d=0;d<g.length;d++){var p=g[d],f=this.addinCollection.get(p);if(f&&!f.get("loaded")&&!f.get("loading"))return this.listenToOnce(this,"addin:loaded:"+p,(function(){o.ensureAddinLoaded(e,t,n,i)})),void o.ensureAddinLoaded(p,(function(){o.ensureAddinLoaded(e,t,n,i)}),n,i)}s.set({loading:!0}),m.console.log(m.elapsed()+": script added "+r),t&&this.listenToOnce(this,"addin:loaded:"+e,(function(){s.set({loading:!1,loaded:!0}),t()})),this.importAddin(e,r)}}},importAddin:function(e,t,n){var o=this.configInfo.find((function(t){return t.addin===e}));if(o&&o.esm)m.trigger("loadEsmAddin",o.id,e);else try{sa(Object.assign({"../addins/company_link/addin.js":()=>i((()=>import("./addin-F82kL3BM.js")),__vite__mapDeps([215,216,217])),"../addins/dashlinks/addin.js":()=>i((()=>import("./addin-BMNVKKCF.js")),__vite__mapDeps([218,216,219])),"../addins/focus_css_override/addin.js":()=>i((()=>import("./addin-DvWoD2ka.js")),__vite__mapDeps([220,216,221])),"../addins/settings/addin.js":()=>i((()=>import("./addin-DSgIwLAj.js")),__vite__mapDeps([222,2,3,4,5,216,18,19])),"../addins/settings_backgrounds/addin.js":()=>i((()=>import("./addin-BmxJucc6.js")),__vite__mapDeps([223,216,224])),"../addins/settings_balance/addin.js":()=>i((()=>import("./addin-0imEgh2s.js")),__vite__mapDeps([225,216,226])),"../addins/settings_bookmarks/addin.js":()=>i((()=>import("./addin-CMpBsJ7o.js")),__vite__mapDeps([227,216])),"../addins/settings_clickup/addin.js":()=>i((()=>import("./addin-1aephv_m.js")),__vite__mapDeps([228,216])),"../addins/settings_common/addin.js":()=>i((()=>import("./addin-i3SvN_uB.js")),__vite__mapDeps([229,216])),"../addins/settings_focus_mode/addin.js":()=>i((()=>import("./addin-lIDOedQH.js")),__vite__mapDeps([230,4,13,2,3,5,9,1,6,7,14,15,16,39,216,18,19])),"../addins/settings_general/addin.js":()=>i((()=>import("./addin-NtwRtZUJ.js")),__vite__mapDeps([231,216])),"../addins/settings_mantras/addin.js":()=>i((()=>import("./addin-C7-jqnL5.js")),__vite__mapDeps([232,216,233])),"../addins/settings_quotes/addin.js":()=>i((()=>import("./addin-BpqcBRD9.js")),__vite__mapDeps([234,216,235])),"../addins/settings_todo/addin.js":()=>i((()=>import("./addin-B002B2X1.js")),__vite__mapDeps([236,237,200,29,2,3,4,5,19,201,216,238])),"../addins/settings_trello/addin.js":()=>i((()=>import("./addin-Sp-9s1WK.js")),__vite__mapDeps([239,216])),"../addins/todo/addin.js":()=>i((()=>import("./addin-d8CNU_f0.js")),__vite__mapDeps([237,200,29,2,3,4,5,19,201,216]))}),`../addins/${t.replace("app/","").split(".")[0]}/addin.js`,5)}catch(s){n(s)}},getWidgets:function(){return _.filter(this.configInfo,(function(e){return!!e.widget}))},getCommands:function(){var e=[];return _.map(this.configInfo,(function(t){if(t.commands&&t.commands.length>0)for(var n=0;n<t.commands.length;n++)e.push({id:t.commands[n],addin:t.addin})})),e},getAddinCommands:function(e){return e&&this.addinCollection.get(e).instance.commands||{}},refresh:function(){this.loadFromAddinObject(!0)},processPending:function(){var e=this;this.evaluatePending(),_.each(this.addinCollection.where({evaluated:!0,processed:!1,processing:!1,lazy:!1}),(function(t){try{if(t.get("processing")||t.get("processed"))return;var n=t.get("addInCode");if(n){var i={},o=t.get("dependencyIds");if(o&&o.length>0)for(var s=0;s<o.length;s++){var r=o[s],a=e.addinCollection.get(r);if(!a||!a.get("loaded"))return void e.ensureAddinLoaded(r);i[e.localAddins.map[r]]=a.instance}Handlebars.registerHelper(la),t.set({processing:!0}),t.instance=n(m,$,i),t.set({evaluated:!0,loading:!1,loaded:!0,processing:!0}),e.trigger("addin:loaded:"+t.id),e.trigger("addin:loaded",t.id)}}catch(l){console.error(l)}}))},evaluatePending:function(){}}),m.models.AddinManager=m.models.AddinManagerBase.extend({}),m.models.AddinManager=m.models.AddinManager.extend({configInfo:[{widget:!0,autoLoad:!0,id:"company_link",label:"Company Link",region:"top-center",requiredFeature:"company_link",addin:"dce1a4fc-4d92-41d5-8aaf-329e5f267b70"},{widget:!0,placeholderType:"metric",id:"dashlinks",class:"app-container dashlinks",region:"top-left",order:"prepend",after:".team-logo",addin:"7d9ace94-8620-4bc0-9160-fcc15d4cb578"},{widget:!0,autoLoad:!0,id:"focus_css_override",addin:"a98d637b-0035-46f3-96ac-c1bd00c950b1",requiredFeature:"noPersonalFocus"},{widget:!0,placeholderType:"none",id:"settings",dependencies:["settings_common"],addin:"1d872cf4-953a-4743-8f5e-6785bba4bd19",commands:["settings.initialize","settings.display"],elementId:"settings",class:"app-container settings",label:"Settings",appClass:"settings-app",region:"bottom-left",order:"prepend",width:500,height:400,toggleEvent:"globalEvent:key:L",closeOnEsc:"true"},{addin:"d52f5584-5033-4a16-866f-e97c7d7ac826",id:"settings_backgrounds",dependencies:["settings"],commands:["background.custom.uploadfiles","settings.panels.backgrounds"]},{addin:"1e373fa7-a454-4652-8d77-1a4fcc88c069",id:"settings_balance",dependencies:["settings"],commands:["settings.panels.balance"]},{addin:"e464eb61-05ca-4a56-9c17-6a02673aa136",id:"settings_bookmarks",dependencies:["settings"],commands:["settings.panels.bookmarks"]},{addin:"395dec66-e86b-4ece-9d10-faf466c733b5",dependencies:["settings"],id:"settings_clickup",commands:["settings.panels.clickup.config"]},{addin:"9e4cdd4d-8e0d-4b36-a159-fab66de84970",id:"settings_common"},{addin:"9c684606-8b84-49ed-bff3-6bb71bb3593b",dependencies:["settings"],commands:["settings.panels.focusmode"],id:"settings_focus_mode"},{addin:"9b62165c-8b05-4f9b-82b3-b093f4e77dc9",dependencies:["settings"],commands:["settings.panels.general"],id:"settings_general"},{addin:"dd91d97e-fc83-4fca-b5cb-d89eb2e1dd0f",id:"settings_mantras",dependencies:["settings"],commands:["settings.panels.mantras"]},{addin:"dd106f35-669c-4079-a9e3-82ddc5244d0b",id:"settings_quotes",dependencies:["settings"],commands:["settings.panels.quotes"]},{addin:"270aaed6-337f-433f-9d02-a471b435eada",id:"settings_todo",dependencies:["settings"],commands:["settings.panels.todo"]},{addin:"c61b7775-7ab8-443a-a6b7-c8c8de6fc755",dependencies:["settings"],id:"settings_trello",commands:["settings.panels.trello.config"]},{widget:!0,esm:!0,placeholderType:"none",precludingFeature:"countdown",id:"addMetric",waitFor:!0,addin:"7edcf7ba-be8a-471d-ad0b-bcc6c9351430",autoLoad:!0},{widget:!0,esm:!0,id:"apps",requiredFeature:["app_launcher"],addin:"40203927-6651-4c0f-bc82-b25a8fe83505",browserBlacklist:"Mobile",autoLoad:!0,waitFor:!0},{widget:!0,placeholderType:"none",id:"background",addin:"b2583d87-8936-4392-8c10-56226239c391",autoLoad:!0,esm:!0},{widget:!0,waitFor:!0,esm:!0,placeholderType:"none",id:"background-info",addin:"cb39d5ca-eee1-4715-8fd1-62629ade4d59",autoLoad:!0},{widget:!0,esm:!0,placeholderType:"none",id:"baseMetric",waitFor:!0,requiredFeature:"countdown",addin:"7e81b0f8-174d-47e4-891a-db28a21efae6",autoLoad:!0},{widget:!0,id:"bookmarks",label:"Bookmarks",addin:"ace9b8b8-9ae4-4c58-b484-2b177d8830e2",autoLoad:!0,esm:!0,visibleSetting:"bookmarksVisible",browserBlacklist:["Safari","Mobile","PWA"]},{widget:!0,esm:!0,placeholderType:"none",waitFor:!0,autoLoad:!0,id:"center-region",addin:"bdd415e2-b0b7-4cfa-a743-8ad041a99976"},{widget:!0,esm:!0,id:"chat",requiredFeature:["plus"],addin:"dc917ca9-052c-4f29-b9f2-6ed9f4643e3z",autoLoad:!0,waitFor:!0},{widget:!0,esm:!0,placeholderType:"none",id:"colorPicker",addin:"4fc397cd-2ac1-4748-b528-23cdf5b2ee42",autoLoad:!1},{widget:!0,esm:!0,id:"dash-upgrade",precludingFeature:["plus","team"],addin:"607d412c-587e-4810-a287-4961a35ff516",autoLoad:!0},{widget:!0,esm:!0,placeholderType:"none",id:"flashMessage",addin:"9c27b6da-6e5e-4814-a5d4-fda404ccec4f",autoLoad:!0,immediateLoad:!0},{widget:!0,esm:!0,id:"focus-mode",addin:"748a780b-5a3e-45aa-8d42-8ce7e6e6f167",autoLoad:!0,waitFor:!0,visibleSetting:"focusModeVisible",requiredFeature:"non-legacy",browserBlacklist:["Mobile"]},{widget:!0,esm:!0,id:"full-screen-portals",addin:"5b5bc6d5-be3c-4574-a535-c4dc05623f00",autoLoad:!0},{widget:!0,esm:!0,id:"links",addin:"be5add07-9d85-46e4-be64-fbd686ae51e0",requiredFeature:"non-legacy",autoLoad:!0,waitFor:!0,visibleSetting:"linksVisible"},{widget:!0,esm:!0,placeholderType:"none",id:"mockTodo",autoload:!1,addin:"21dd8e13-484f-4fa1-8224-9ebeabb1f865"},{widget:!0,esm:!0,placeholderType:"none",id:"modal",addin:"5771dc5c-5496-4c0f-98cc-47938b40a1e0"},{widget:!0,esm:!0,id:"notes",requiredFeature:["notes","notes-degraded"],addin:"dc917ca9-052c-4f29-b9f2-6ed9f4643e0a",visibleSetting:"notesVisible",autoLoad:!0,waitFor:!0},{widget:!0,esm:!0,id:"plus-status-banner",addin:"c08a28ac-4979-4b38-b2e8-cf02a0c6f528",requiredFeature:["plus","custom-bg-degraded"],autoLoad:!0,waitFor:!0,browserBlacklist:["Safari"]},{widget:!0,esm:!0,id:"quicklinks",feature:"links",class:"links",label:"Links",appClass:"links-app calculates-own-max-height",region:"top-left",order:"prepend",width:260,openState:"LinksOpen",keepOpenSetting:"linksKeepOpen",placeholderType:"pane",precludingFeature:"non-legacy",addin:"ad54d482-248b-4abf-b5b0-a8eaf3e89132",storedHeight:"links-height",toggleEvent:"globalEvent:key:L",closeOnEsc:"true",visibleSetting:"linksVisible"},{widget:!0,esm:!0,placeholderType:"none",id:"region-bottom-center",addin:"3b4f3654-010f-42a3-a1dd-b96efc23a83c",waitFor:!0,autoLoad:!0},{widget:!0,esm:!0,placeholderType:"none",id:"region-center-below",addin:"e0c8a9f8-d0b1-4cb0-b754-48cb02e21cfe",waitFor:!0,autoLoad:!0},{widget:!0,esm:!0,waitFor:!0,autoLoad:!0,id:"search",class:"app-container search",region:"top-left",addin:"162b82d0-f285-427c-8209-924f44ef4d21",visibleSetting:"searchVisible"},{widget:!0,esm:!0,id:"site-blocker",addin:"e32721d7-6956-43c7-9fe3-3d12469bae29",autoLoad:!0,browserBlacklist:["Mobile","PWA"],requiredFeature:["site-blocker","site-blocker-degraded"],visibleSetting:"siteBlockerVisible"},{widget:!0,esm:!0,id:"soundscapes",requiredFeature:"plus",addin:"fcae7f16-a0a4-4b5e-a995-926dfff3dcf2",autoLoad:!0,waitFor:!0,browserBlacklist:["Mobile"]},{widget:!0,esm:!0,id:"tabs",requiredFeature:["tab-stash","tab-stash-degraded"],addin:"b9735109-3d71-4681-9459-0a9ab5f7122d",autoLoad:!0,waitFor:!0,browserBlacklist:["Mobile","PWA"],visibleSetting:"tabsVisible"},{widget:!0,esm:!0,id:"tasks",addin:"59979b50-da82-453c-8382-69bb8399bb07",visibleSetting:"todoVisible",autoLoad:!0,waitFor:!0},{widget:!0,waitFor:!0,esm:!0,placeholderType:"none",id:"team-logo",addin:"069a6a33-60be-431d-b95b-6e58c9055fb0",autoLoad:!0,requiredFeature:"team_logo"},{widget:!0,esm:!0,id:"topics",requiredFeature:["topics"],addin:"d13fc525-0d8d-4516-910b-063dc88cebd3",browserBlacklist:"Mobile",autoLoad:!0,waitFor:!0},{widget:!0,esm:!0,id:"weather",addin:"d41ec20f-7148-4ef5-89ba-9be0d8141154",autoLoad:!0,waitFor:!0,visibleSetting:"weatherVisible"}]}),m.models.Command=Backbone.Model.extend({defaults:{id:null},getId:function(){return this.id},execute:function(){},canExecute:function(){return!0},beforeExecute:function(){}}),m.CommandManager=m.collect.Manager.extend({model:m.models.Command,initialize:function(){var e=this;this.commandSources=new Backbone.Collection,m.commands&&_.mapObject(m.commands,(function(t){e.registerCommandModel(t,!1)}));for(var t=m.addinManager.getCommands(),n=0;n<t.length;n++)this.registerCommandSource(t[n]);this.listenTo(m.addinManager,"addin:loaded",(function(t){var n=m.addinManager.getAddinCommands(t);n&&_.mapObject(n,(function(t){e.registerCommandModel(t,!1)}))}))},registerCommandModel:function(e,t){var n=new e;if(n&&n.id){if(t||!this.get(n.id)){var i=this.get(n.id);i&&this.remove(i),this.add(n)}this.trigger("command:loaded:"+n.id)}},registerCommandSources:function(e){e&&e.length>0&&_.each(e,this.registerCommandSource,this)},registerCommandSource:function(e){if(!e.id)throw new Error("An id property is required in cmdSrc");if(!e.addin)throw new Error("An addin property is required in cmdSrc");this.commandSources.findWhere({id:e.id})||this.commandSources.add({id:e.id,addin:e.addin})},registerCommand:function(e,t,n,i){var o={defaults:{id:e},execute:t};n&&(o.canExecute=n);var s=m.models.Command.extend(o);this.registerCommandModel(s,i)},getCommand:function(e){return e?this.get(e):null},ensureCommandLoaded:function(e,t,n,i){var o=this,s=this.get(e);if(s)t&&t(s);else{if(n)try{n()}catch(c){console.error(c)}var r=this.commandSources.get(e);if(r){var a=r.get("addin");r.get("loading")||(r.set("loading",!0),this.listenToOnce(this,"command:loaded:"+e,(function(){r.set("loading",!1),r.set("loaded",!0),t&&t()})),m.addinManager.ensureAddinLoaded(a,(function(){}),n,(function(e){r.set("loading",!1),i&&i(e)})))}else{var l=m.globals.urlRootApi+"commands/"+encodeURIComponent(e);$.ajax({url:l,success:function(a){a&&(o.registerCommandSource(a),(r=o.commandSources.get(e))?r.get("loading")||(r.set("loading",!0),m.addinManager.ensureAddinLoaded(r.get("addin"),(function(){r.set("loading",!1),r.set("loaded",!0),t&&t(s)}),n,(function(e){r.set("loading",!1),i&&i(e)}))):i&&i("no command with that id is registered"))},error:function(){i&&i("no command with that id is registered")}})}}},execute:function(e){var t=this.getCommand(e);if(t)return t.execute.apply(t,[].slice.call(arguments,1))},executeAsync:function(e){var t=this,n=[].slice.call(arguments,1);return new Promise((function(i,o){t.ensureCommandLoaded(e,(function(){var s=t.getCommand(e);s?i(s.execute.apply(s,n)):o()}))}))},getCommandAsync:function(e){var t=this;return new Promise((function(n,i){t.ensureCommandLoaded(e,(function(){var o=t.getCommand(e);o?n(o):i()}))}))},canExecute:function(e){var t=this.getCommand(e);return!t||t.canExecute.apply(t,[].slice.call(arguments,1))},beforeExecute:function(e){var t=this.getCommand(e);if(t)return t.beforeExecute.apply(t,[].slice.call(arguments,1))},getProperties:function(e){var t=this.getCommand(e);return!t||!t.getProperties||t.getProperties.apply(t,[].slice.call(arguments,1))}}),m.models.CleanupManager=m.models.Manager.extend({initialize:function(){var e=this;this.frequencyDays=10,this.load(),this._registerMigrationCleanup(),m.now()-this.cleanupInfo.lastCleanup>this.frequencyDays*m.utils.mConst("msPerDay")&&this.listenTo(m,"appsReady",(function(){setTimeout((function(){e.cleanup()}),1e3)}))},registerKey:function(e,t){t&&(this.cleanupInfo.cleanupOptions[e]=t),this.cleanupInfo.keys.indexOf(e)<0&&this.cleanupInfo.keys.push(e),this.save()},registerKeyPrefix:function(e,t){t&&(this.cleanupInfo.cleanupOptions[e]=t),this.cleanupInfo.keyPrefixes.indexOf(e)<0&&this.cleanupInfo.keyPrefixes.push(e),this.save()},unregisterKeyPrefix:function(e){e in this.cleanupInfo.cleanupOptions&&delete this.cleanupInfo.cleanupOptions[e];var t=this.cleanupInfo.keyPrefixes.indexOf(e);t>=0&&this.cleanupInfo.keyPrefixes.splice(t,1),this.save()},cleanup:function(){var e,t,n,i=[],o=Object.keys(localStorage);for(e=0;e<o.length;e++)if(n=o[e],this.cleanupInfo.keys.indexOf(n)>=0)i.push({key:n,options:this.cleanupInfo.cleanupOptions[n]});else for(t=0;t<this.cleanupInfo.keyPrefixes.length;t++){var s=this.cleanupInfo.keyPrefixes[t],r=this.cleanupInfo.cleanupOptions[s];if(n.startsWith(s)){if(r&&r.ignoreKeys&&r.ignoreKeys.indexOf(n)>=0)break;if(r&&null!=r.pastDaysToKeep){var a=this.parseLocalDate(n.substring(s.length)),l=m.date();a<new Date(l.getFullYear(),l.getMonth(),l.getDate()-r.pastDaysToKeep)&&i.push({key:n,options:r});break}i.push({key:n,options:r});break}}i.map((function(e){e.options&&e.options.callbackWidget?m.widgetManager.getWidgetAsync(e.options.callbackWidget).then((function(t){t[e.options.callbackMethod](e.key)})):localStorage.removeItem(e.key)})),this.cleanupInfo.lastCleanup=m.now(),this.save(),!m.isLoggedIn()&&localStorage.getItem("email")&&localStorage.removeItem("email"),navigator.storage.estimate().then((function(e){var t=navigator.appVersion.match(/.*Chrome\/([0-9\.]+)/);if(t&&t.length){var n=Number(t[1].split(".")[0]),i="brokenQuota:flashMessage:dismissed";if(e.usage>=Math.pow(2,64)&&n<117){if(localStorage.getItem(i)&&Number(localStorage.getItem(i))+6048e5>Date.now())return;m.$e.$emit("flashMessage",{error:!0,contact:!1,button:{text:"How-to",action:function(){window.open("https://support.google.com/chrome/answer/95414")}},message:"Please update your browser. Momentum may not work as intended with your current version of Chrome.",onDismiss:function(){localStorage.setItem(i,Date.now())}}),m.Analytics.capture("show storage estimate error flash",e)}}})).catch(console.error)},save:function(){localStorage.setItem("cleanup-info",JSON.stringify(this.cleanupInfo))},load:function(){this.cleanupInfo=localStorage.getItem("cleanup-info"),this.cleanupInfo?this.cleanupInfo=JSON.parse(this.cleanupInfo):this.cleanupInfo={keyPrefixes:[],keys:[],cleanupOptions:{},lastCleanup:0}},parseLocalDate:function(e){var t=e.split(/\D/);return new Date(t[0],t[1]-1,t[2])},_registerMigrationCleanup(){var e=localStorage.getObject("syncedData:migration:successful")||[];[{lsName:"pomodorosCompleted",migrationName:"pomodorosCompleted"},{lsName:"quicklinks",migrationName:"links"}].forEach((t=>{this[e.includes(t.migrationName)?"registerKeyPrefix":"unregisterKeyPrefix"](t.lsName)}))}}),m.models.ThemeManager=Backbone.Model.extend({initialize:function(){},defaultFontFamily:'-apple-system, BlinkMacSystemFont, "Neue Haas Grotesk Text Pro", "Helvetica Neue", Helvetica, Arial, sans-serif',$head:$("head"),$body:$("body"),initializeThemes:function(){this.listenTo(m.models.customization,"change:themeColour",this.setThemeColor),this.listenTo(m.models.customization,"change:themeFont",this.setThemeFont),this.listenTo(m,"user:successfulLogin user:successfulLogout",this.onLoginEvent),this.listenTo(m,"background:loadSuccessful",this.setThemeColor),this.listenTo(m,"legacybackgrounds:ready",this.setThemeColor),this.loadAllThemeValues()},loadAllThemeValues:function(){this.loadThemeColor(),this.setThemeColor(),this.setThemeFont()},setColorValues:function(e,t){this.colors=t,this.setThemeColor()},saveThemeColor:function(){if(this.colors){var e=m.models.customization.get("themeColourCustom"),t=this.toRgba(this.colors);if(e===t)return;m.models.customization.set("themeColourCustom",t)}},loadThemeColor:function(){try{if(m.models.customization.has("themeColourCustom")){var e=m.models.customization.get("themeColourCustom");e&&(this.colors=new Colors({color:e}).colors)}}catch(t){console.error(t)}},setThemeColor:function(){this.clearTheme();var e=m.models.customization.get("themeColour");switch(e){case"dark":this.setDarkTheme();break;case"light":this.setLightTheme();break;case"system":this.setSystemTheme();break;case"photo":this.setPhotoTheme();break;case"custom":this.setCustomTheme()}this.setAccentColor(e)},setDarkTheme:function(){this.$body.addClass("dark dark-full")},setLightTheme:function(){this.$body.addClass("light light-full")},setSystemTheme:function(){this.systemMediaQueryLight=window.matchMedia("(prefers-color-scheme: light)"),this.systemMediaQueryLight.addEventListener("change",this.systemMediaQueryListener.bind(this)),this.systemMediaQueryLight.matches?this.setLightTheme():this.setDarkTheme()},systemMediaQueryListener:function(e){"system"===m.models.customization.get("themeColour")&&(this.clearTheme(),e.matches?this.setLightTheme():this.setDarkTheme())},setPhotoTheme:function(){this.isPlus()&&m.models.activeBackground?this.$body.addClass("photo-match"):this.setDefaultTheme()},setCustomTheme:function(){this.isPlus()&&this.colors?this.$body.addClass("custom"):this.setDefaultTheme()},setDefaultTheme:function(){this.clearTheme(),this.setSystemTheme()},setAccentColor:function(e){var t=null;if("custom"!==e&&m.models.activeBackground){var n=m.models.activeBackground.getWidgetColor();n?t=new Colors({color:n.hsla}).colors:"photo"===e&&this.setDefaultTheme()}if("custom"===e&&this.colors&&(t=this.colors),t){var i=t.RND.hsl;i.a=t.alpha;var o=t.RGBLuminance,s=o>.5,r="custom"===e||"photo"===e?this.getHighlightColor(t,s):"",a="custom"===e||"photo"===e?"var(--color-text)":this.getSafeContrastColor(i,s,o);"custom"!==e&&"photo"!==e||(this.$body.toggleClass("light",s),this.$body.toggleClass("dark",!s));var l=":root { --color-hue: "+i.h+"; --color-sat: "+i.s+"%; --color-lit: "+i.l+"%; --color-alpha: "+i.a+"; "+(r&&"--color-accent-highlight: "+r)+";--color-accent-safe: "+a+";}";this.setThemeCss(l),this.setSafariOrPwaTabTheme(i)}},getHighlightColor:function(e,t){var n,i,o,s=t?0:1,r=.2;n=.8*e.rgb.r+r*s,i=.8*e.rgb.g+r*s,o=.8*e.rgb.b+r*s;var a=new Colors({color:"rgb("+Math.round(255*n)+","+Math.round(255*i)+","+Math.round(255*o)+")"}).colors.RND.hsl;return"hsl("+a.h+","+a.s+"%,"+a.l+"%)"},getSafeContrastColor:function(e,t,n){var i=this.toHsla(e);return t?n<.5?i:"var(--color-light-text)":n>.1?i:"var(--color-dark-text)"},toHsla:function(e){return e.a||(e.a=1),"hsla("+e.h+" "+e.s+"% "+e.l+"% / "+e.a+")"},toRgba:function(e){return"rgba("+Math.round(255*e.rgb.r)+", "+Math.round(255*e.rgb.g)+", "+Math.round(255*e.rgb.b)+", "+e.alpha+")"},setThemeCss:function(e){this.$head.append('<style type="text/css" id="themeCss">'+e+"</style>"),m.trigger("theme:set")},setSafariOrPwaTabTheme:function(e){this.$head.append('<meta id="safariOrPwaTabTheme" name="theme-color" content="'+this.toHsla(e)+'">')},clearTheme:function(){this.$body.removeClass("dark dark-full light light-full custom photo-match no-hue"),this.$head.find("#themeCss").remove(),this.$head.find("#safariOrPwaTabTheme").remove(),this.systemMediaQueryLight&&this.systemMediaQueryLight.removeEventListener("change",this.systemMediaQueryListener.bind(this))},isPlus:function(){return m.conditionalFeatures.featureEnabled("plus")},getAvailableFonts:function(){return[{label:"Classic",value:"default"},{label:"Modern",value:"modern"},{label:"Startup",value:"startup",breakafter:!0},{label:"Retro",value:"retro"},{label:"Warehouse",value:"warehouse"},{label:"Quirky",value:"quirky"}]},setThemeFont:function(){var e=this,t=m.models.customization.get("themeFont")||"default";if(this.isPlus()){var n=this.defaultFontFamily;if(t&&"default"!=t){var i=null,o=localStorage.getItem("font-"+t);if(o)i=JSON.parse(o),n=this.setFontFromInfo(i)||this.defaultFontFamily,this.setActiveFont(n,t);else try{$.ajax({type:"GET",url:m.globals.urlRootApi+"fonts/"+t}).done((function(i){i&&(localStorage.setItem("font-"+t,JSON.stringify(i)),n=e.setFontFromInfo(i)||e.defaultFontFamily)})).always((function(){e.setActiveFont(n,t)}))}catch(s){console.error(s)}}else this.setActiveFont(n,t)}else this.setActiveFont(this.defaultFontFamily,t)},setFontFromInfo:function(e){var t=null;if(e){if(!e.builtin){var n=$("head"),i=n.find("#font-"+e.font).first();if(!i||0==i.length){var o=null;e.fontInline?(o=$('<style type="text/css"></style>')).html(e.fontInline):e.fontUrl&&(o=$('<link rel="stylesheet" type="text/css">')).attr("href",e.fontUrl),o&&(o.attr("id","font-"+e.font),n.append(o))}}t=e.exclude_default?e.fontFamily:e.fontFamily+","+this.defaultFontFamily}return t},setActiveFont:function(e,t){var n,i=this;null==(n=document.head.querySelector("#font-override"))||n.remove();var o=document.createElement("style");o.id="font-override",o.innerText=`:root { --font-default: ${e} !important; }`,document.head.appendChild(o),_.each(this.getAvailableFonts(),(function(e){e.value===t?i.$body.addClass("f--"+e.value):i.$body.removeClass("f--"+e.value)}));var s=$(".user");s.hasClass("open")||s.css("transform","translateY("+$("user-hidden").height()+"px)")},onLoginEvent:function(){this.listenToOnce(m,"sync:settings:complete",this.loadAllThemeValues)}}),m.models.SyncCoordinator=Backbone.Model.extend({initialize:function(){Rr(),this.downloading={},this.retryAfterKey="feed-retry-after",this.syncSettingsInProgress=!1,this.listenTo(m,"sync:download",this.doDownload),this.listenTo(m,"skip:download",this.doDownloadAfterSkip),this.listenTo(m,"user:successfulLogin",this.onUserLogin),this.listenTo(m,"user:successfulLogout",this.syncSettings),this.listenTo(m,"sync:downloadIfNeeded",this.doDownloadIfNeeded),this.listenTo(m.models.customization,"change",this.customizationChange),this.listenTo(m,"sync:customization",this.customizationChange),m.models.customization.get("etag")||this.customizationChange(),this.reportFeedItems()},onUserLogin:function(e){localStorage.removeItem("ts_quotes"),localStorage.removeItem("ts_backgrounds"),localStorage.removeItem("ts_mantras"),this.doDownload(),this.syncSettings(e)},reportFeedItems:function(){var e=this;this.canCallServer()&&["quote","mantra","bg"].map((function(t){var n="report-"+t,i=localStorage.getItem(n);i&&$.ajax({type:"post",contentType:"application/json",url:m.globals.urlRootApi+"feed/report",data:i}).done((function(t){e.checkForBackOff(t.retryAfter),t.success&&localStorage.removeItem(n)}))}))},checkForReportTasks:function(e,t){e.map((function(e){if(e.reportUsage){var n="report-"+t,i=localStorage.getItem(n);(i=i?JSON.parse(i):[]).push({id:e._id,type:t,forDate:e.forDate}),localStorage.setItem(n,JSON.stringify(i))}}))},canCallServer:function(){var e=localStorage.getItem(this.retryAfterKey);if(e){if(m.date().getTime()<parseInt(e))return!1;localStorage.removeItem(e)}return!0},checkForBackOff:function(e){e&&(e=parseInt(e),localStorage.setItem(this.retryAfterKey,m.date().getTime()+1e3*e))},doDownloadAfterSkip:function(e){this.doDownload(e,!0)},doDownload:function(e,t){if(this.canCallServer()){var n=this;if(e){if("string"==typeof e){var i={};e.split(/[\s,;]+/).forEach((function(e){i[e]=!0})),e=i}if(["quote","background","mantra"].map((function(t){n.downloading[t]&&e[t]&&delete e[t]})),0===Object.keys(e).length)return}var o=m.collect.mantras.get("pinned");this.downloading={};try{var s=this,r="";if(m.collect.backgrounds&&m.collect.backgrounds.get(m.utils.getDateString())&&(r+="b"),m.collect.quotes&&m.collect.quotes.get(m.utils.getDateString())&&(r+="q"),(m.collect.mantras&&m.collect.mantras.get(m.utils.getDateString())||o)&&(r+="m"),!localStorage.client_uuid)return;var a=m.globals.urlRootApi+"feed/bulk?syncTypes=";if(e){var l=[];if(e.quote&&m.models.customization.get("quoteVisible")&&(l[l.length]="quote",localStorage.removeItem(s.ddlQuoteString()),this.downloading.quote=!0),e.mantra&&m.models.customization.get("mantraVisible")&&!o&&(l[l.length]="mantra",localStorage.removeItem(s.ddlMantraString()),this.downloading.mantra=!0),e.background&&(this.downloading.background=!0,l[l.length]="background",localStorage.removeItem(s.ddlBackgroundString())),!(l.length>0))return;a+=l.join(",")}else this.downloading.background=!0,this.downloading.quote=!0,o||(this.downloading.mantra=!0),a+="all",localStorage.removeItem(s.ddlBackgroundString()),localStorage.removeItem(s.ddlQuoteString()),localStorage.removeItem(s.ddlMantraString());a=a+"&localDate="+m.utils.getDateString(),r.length>0&&(a+="&has="+r);var c=m.models.activeBackground.activeBackgroundUuid();if(!c){var u=m.collect.legacyBackgrounds.getCurrentLocalBackground();u&&(c=u.backgroundUuid())}c&&!t&&(a=a+"&legacyBackground="+c),$.ajax({type:"GET",contentType:"application/json",url:a}).done((function(e){["Quote","Background","Mantra"].map((function(t){e["useCurrent"+t]&&localStorage.setItem(s["ddl"+t+"String"](),m.now())})),e.quotes&&(e.quotes.length>0&&m.collect.quotes&&(m.collect.quotes.reset(e.quotes),n.checkForReportTasks(e.quotes,"quote"),m.collect.quotes.invoke("save"),localStorage.shortquote&&localStorage.removeItem("shortquote")),e.ts_quotes&&localStorage.setItem("ts_quotes",JSON.stringify(e.ts_quotes)),localStorage.setItem(s.ddlQuoteString(),m.now())),e.mantras&&e.mantras.length>0&&m.collect.mantras&&(m.collect.mantras.reset(e.mantras),n.checkForReportTasks(e.mantras,"mantra"),m.collect.mantras.invoke("save"),localStorage.setItem(s.ddlMantraString(),Date.now()),e.ts_mantras&&localStorage.setItem("ts_mantras",JSON.stringify(e.ts_mantras))),e.backgrounds&&(e.backgrounds.length>0&&(m.collect.backgrounds.reset(e.backgrounds),n.checkForReportTasks(e.backgrounds,"bg"),m.collect.backgrounds.invoke("save"),localStorage.background&&(localStorage.removeItem("background"),localStorage.removeItem("backgrounds"))),e.ts_backgrounds&&localStorage.setItem("ts_backgrounds",JSON.stringify(e.ts_backgrounds)),localStorage.setItem(s.ddlBackgroundString(),m.now())),n.downloading={},n.checkForBackOff(e.retryAfter),localStorage.setItem("firstSynchronized",m.now())})).fail((function(e){if(n.downloading={},e.status>0){503===e.status&&n.checkForBackOff(e.getResponseHeader("retry-after"));var t=m.models.backgroundManager&&m.models.backgroundManager.latestItemDate();t&&t>Date.parse(m.utils.getDateString())&&localStorage.setItem(s.ddlBackgroundString(),m.now());var i=m.models.quoteManager&&m.models.quoteManager.latestItemDate();i&&i>Date.parse(m.utils.getDateString())&&localStorage.setItem(s.ddlQuoteString(),m.now());var o=m.models.mantraManager&&m.models.mantraManager.latestItemDate();o&&o>Date.parse(m.utils.getDateString())&&localStorage.setItem(s.ddlMantraString(),Date.now())}else m.trigger("sync:error")}))}catch(d){console.error(d),n.downloading={}}}},doDownloadIfNeeded:function(e){if(localStorage.client_uuid&&!localStorage.getItem("registrationStatePending")){var t=!1,n=!1,i=!1;if(e){if(e.ts_backgrounds){var o=localStorage.getItem("ts_backgrounds");o?e.ts_backgrounds>JSON.parse(o)&&(t=!0):t=!0}if(e.ts_quotes){var s=localStorage.getItem("ts_quotes");s?e.ts_quotes>JSON.parse(s)&&(n=!0):n=!0}if(e.ts_mantras){var r=localStorage.getItem("ts_mantras");r?e.ts_mantras>JSON.parse(r)&&(i=!0):i=!0}}t||localStorage[this.ddlBackgroundString()]||(t=!0),n||localStorage[this.ddlQuoteString()]||(n=!0),i||localStorage[this.ddlMantraString()]||(i=!0),this.downloading.quote&&(n=!1),this.downloading.background&&(t=!1),this.downloading.mantra&&(i=!1),m.models.customization.get("quoteVisible")||(n=!1),m.models.customization.get("mantraVisible")||(i=!1);var a={};t&&(a.background=!0),n&&(a.quote=!0),i&&(a.mantra=!0),Object.keys(a).length>0&&this.doDownload(a)}},pingApi:function(e,t){$.ajax({type:"GET",contentType:"application/json",url:m.globals.urlRootApi}).done((function(){e&&e()})).fail((function(){t&&t()}))},ddlBackgroundString:function(){return"ddl-bg-"+m.utils.getDateString()},ddlQuoteString:function(){return"ddl-qt-"+m.utils.getDateString()},ddlMantraString:function(){return"ddl-mantra-"+m.utils.getDateString()},setSyncSettingsHeaders:function(e){m.helper.auth.setMomentumAuthHeader(e);var t=m.models.customization.get("etag");void 0===m.models.customization.get("displayname")&&(t=m.utils.uuidv4()),t&&e.setRequestHeader("X-Momentum-Settings-ETag",t)},customizationChange:function(e,t){if(!(t&&t.fromStorage||this.syncSettingsInProgress||m.models.customization.fetching)&&localStorage.getItem("token")&&m.conditionalFeatures.featureEnabled("serversettings")){if(e){var n=e.changedAttributes();if(1===Object.keys(n).length&&_.contains(Object.keys(n),"etag"))return}else if(m.models.customization.get("etag"))return;$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(m.models.customization.getPersistentSettings()),url:m.globals.urlRootApi+"settings",allowDeferral:!0}).done((function(e){e.etag&&m.models.customization.save({etag:e.etag})})).fail((function(){})).always((function(){}))}},submitFeatureAccessRequest:function(e,t,n){var i={feature:e};$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(i),url:m.globals.urlRootApi+"user/featurerequest"}).done((function(){t&&t()})).fail((function(){n&&n()}))},syncSettings:function(e,t){if((localStorage.getItem("client_uuid")||localStorage.getItem("token"))&&!localStorage.getItem("registrationStatePending")&&!m.migratingLegacyUser){this.syncSettingsInProgress=!0;var n=this,i=!1;$.ajax({type:"GET",contentType:"application/json",beforeSend:this.setSyncSettingsHeaders,url:m.globals.urlRootApi+"settings",allowDeferral:t}).done((function(e){n.loadSettings(e)&&(i=!0)})).fail((function(){})).always((function(){i||(n.syncSettingsInProgress=!1,m.trigger("sync:settings:complete"),e&&e())}))}},loadSettings:function(e){if(e){if(e.user_id&&(localStorage.setItem("userId",e.user_id.toLowerCase()),m.user.uuid=e.user_id),e.token_invalid)return e.token_invalid_reason?m.commandManager.execute("logout",e,!0):m.commandManager.execute("logout",null,!0),!0;e.createTime&&localStorage.setItem("user:createTime",e.createTime),e.greetings&&(localStorage.greetings=e.greetings),e.customization&&m.models.customization.save(e.customization),e.features&&m.conditionalFeatures.updateFeatures(e.features,!0),e.team&&m.models.teamInfo.save("team",e.team),e.experimentEnrollments&&Nr(e.experimentEnrollments),m.commandManager.execute("addins.load",e.addIns),m.commandManager.registerCommandSources(e.cmd),e.download&&m.trigger("sync:download",e.download),e.ts_notifications&&m.trigger("notifications:timestamp",e.ts_notifications);var t=null;if(e.ts_backgrounds&&((t=t||{}).ts_backgrounds=e.ts_backgrounds),e.ts_quotes&&((t=t||{}).ts_quotes=e.ts_quotes),e.mantras&&((t=t||{}).ts_mantras=e.ts_mantras),t&&m.trigger("sync:downloadIfNeeded",t),m.trigger("sync:settings",e),e.timestamps&&R.saveServerTimestamps(e.timestamps).catch(console.error),e.outdatedToken){var n="settings:outdatedToken:lastAttempt",i=localStorage.getItem(n),o="settings:outdatedToken:429Until",s=localStorage.getItem(o);if(i>=Date.now()-2e4)return;if(s>=Date.now()-2e3)return;localStorage.setItem(n,Date.now()),$.ajax({type:"get",url:m.globals.urlRootApi+"settings/token"}).done((function(e){e.token&&localStorage.setItem("token",e.token),e.token_uuid&&localStorage.setItem("token_uuid",e.token_uuid)})).fail((function(e){429===e.status&&localStorage.setItem(o,Date.now()+1e3*Number(e.response.headers["retry-after"]))}))}}}}),m.collect.Feed=Backbone.Collection.extend({initialize:function(e,t){this.model=e,this.itemType=t,this.localStorage=new Backbone.LocalStorage("momentum-"+t)},getActiveItem:function(){if(this.length>0){var e=m.utils.getDateString();return this.get(e)}},empty:function(){return 0===this.models.length}}),m.models.FeedManager=Backbone.Model.extend({initialize:function(e,t){this.itemType=t,m.collect[t+"s"]=this.itemCollection=new m.collect.Feed(e,t)},firstFetch:function(){this.itemCollection.fetch({reset:!0})},getActiveItem:function(){var e=this;if(!this.itemCollection)return null;var t=this.itemCollection.getActiveItem();return t?(this.currentItem&&this.equals(this.currentItem,t)||(this.currentItem=t,setTimeout((function(){m.trigger(e.itemType+":active_changed",e.currentItem.get("_id"))}),50)),t):null},equals:function(e,t){var n={},i={};return Object.assign(n,e.attributes),Object.assign(i,t.attributes),delete n.forDate,delete i.forDate,JSON.stringify(n)===JSON.stringify(i)},skipItem:function(e){e=!!e;var t=this,n=this.getActiveItem(),i=n.get("_id")||n.get("id"),o=m.globals.urlRootApi+this.itemType+"s/"+i+"/skip",s={is_custom:n.get("is_custom"),hard:e};return new Promise((function(n,i){try{if(!(m.isLoggedIn()&&m.conditionalFeatures.featureEnabled("plus")||e))throw"showSkipUpsell";$.ajax({type:"PATCH",contentType:"application/json",data:JSON.stringify(s),url:o}).done((function(e){if(e&&e.success&&m.trigger("skip:download",t.itemType),e&&e.notification){if("max_skips"===e.notification.type||0===e.notification.message.indexOf("Skip ")){var i="max"+m.utils.capitalizeFirstLetter(t.itemType)+"Skips";if(localStorage.getItem(i))return;localStorage.setItem(i,!0),e.notification.display_time||(e.notification.display_time=5e3),e.notification.viewLimit||(e.notification.viewLimit=1)}m.commandManager.execute("notification.show.enhanced",e.notification)}n(e)})).fail((function(){m.commandManager.execute("notification.show.enhanced",t.skipErrorMessage()),i()}))}catch(a){if("showSkipUpsell"==a){if("mantra"==t.itemType){var r={cta_text:"Learn more",cta_cmd:"upsell.upgrade",title:"Skip Mantra",message:"Upgrade to skip through mantras and add your own mantras."};m.commandManager.execute("notification.show.enhanced",r)}}else m.commandManager.execute("notification.show.enhanced",t.skipErrorMessage());i()}}))},toggleFavorite:function(e,t){var n=this,i=t||this.getActiveItem(),o=i.get("_id")||i.get("id"),s=m.globals.urlRootApi+this.itemType+"s/"+o+"/favorite",r={is_favorite:e,is_custom:i.get("is_custom")};return new Promise((function(e,t){try{$.ajax({type:"PATCH",contentType:"application/json",data:JSON.stringify(r),url:s}).done((function(t){t&&t.success&&(m.trigger("sync:download",n.itemType),m.trigger(n.itemType+":favorite",{id:o,is_favorite:r.is_favorite})),e(t)})).fail((function(e){m.commandManager.execute("notification.show.enhanced",n.favouriteErrorMessage),t(e)}))}catch(i){m.commandManager.execute("notification.show.enhanced",n.favouriteErrorMessage),t(i)}}))},latestItemDate:function(){var e=null;return this.itemCollection.models.forEach((function(t){var n=Date.parse(t.id);(!e||n>e)&&(e=n)})),e},skipErrorMessage:function(){return{message:"Oops! We weren't able to get a new "+this.itemType+". Please check your connection and try again.",viewLimit:1}},favouriteErrorMessage:{message:"Oops! We weren't able to save the favorite. Please check your connection and try again.",viewLimit:1},registerErrorMessage:{message:"Please log in or register to enable skipping.",display_time:2500}}),m.models.ConditionalFeatures=Backbone.Model.extend({defaults:{featureList:[]},initialize:function(e){this.customization=e.customization||m.models.customization;try{localStorage.f3t6b23d&&(this.setFeatures(JSON.parse(atob(localStorage.f3t6b23d))),this.checkUnregisteredFlag())}catch(t){console.error(t),this.setFeatures([])}},featureEnabled:function(e){if("offlineDataOnly"===e&&!m.isLoggedIn())return!0;var t=!0;return"!"===e[0]&&(e=e.substr(1),t=!1),t===_.contains(this.get("featureList"),e)},setFeatures:function(e){m.utils.userIsLegacyUnregistered()||e.push("non-legacy"),this.set("featureList",e)},updateFeatures:function(e){localStorage.f3t6b23d=e,this.setFeatures(JSON.parse(atob(e))),this.checkUnregisteredFlag(),window.Cypress&&$("body").attr("data-test-ready-for-tests",""),m.trigger("feature:changed")},checkUnregisteredFlag:function(){var e=this.get("featureList");e.length&&!_.contains(e,"nosync")&&localStorage.removeItem("unregistered")},clearFeatures:function(){this.set({featureList:[]}),localStorage.removeItem("f3t6b23d")},checkFeatureAndMigrateData:function(e,t,n,i,o,s){var r=null,a=this;if(this.featureEnabled(e)){for(var l=!1,c=0;c<localStorage.length;c++){var u=localStorage.key(c);if(0===u.indexOf(n+"-")){l=!0;break}}if(l)try{var d=m.date(),h=d.getFullYear().toString()+"-"+m.utils.twoDigit(d.getMonth()+1)+"-"+m.utils.twoDigit(d.getDate())+"-"+m.utils.twoDigit(d.getHours())+":"+m.utils.twoDigit(d.getMinutes())+":"+m.utils.twoDigit(d.getSeconds()),g="migrated-"+n+"-"+h,p=[],f=[];for(c=0;c<localStorage.length;c++)if(0===(u=localStorage.key(c)).indexOf(n+"-")){f.push(u);var v=localStorage.getItem(u);if(v){var y=JSON.parse(v);y.id||(y.id=y.csid),p.push(y)}}var b={items:p},S=JSON.stringify(b);$.ajax({type:"POST",contentType:"application/json",data:S,url:m.globals.urlRootApi+"migrate/"+n}).done((function(){for(var e in localStorage.setItem(g,S),f)localStorage.removeItem(f[e]);localStorage.removeItem(n),m.trigger("sync:customization"),t&&!a.customization.getComputedSetting(t)||i()})).fail((function(){t&&!a.customization.getComputedSetting(t)||o()}))}catch(w){console.error(w)}else r=i}else r=o;r&&(!t||this.customization.getComputedSetting(t)?r():s?s(r):this.setPreferenceChangeListener(t,r))},setPreferenceChangeListener:function(e,t){var n=this;m.listenToOnce(this.customization,"change:"+e,(function(){n.customization.getComputedSetting(e)?t():n.setPreferenceChangeListener(e,t)}))},checkPreferenceForRender:function(e,t,n){t&&(!e||this.customization.getComputedSetting(e)?t():n&&n(t))}}),m.models.Widget=Backbone.Model.extend({shouldShowPane:function(){var e=!0;if(this.has("keepOpenSetting")&&(e=m.models.customization.get(this.get("keepOpenSetting"))&&!m.utils.isTouchDevice()),this.has("openState")){var t=localStorage[this.get("openState")];if(t)return JSON.parse(t)&&e}return!1}}),m.collect.Widgets=Backbone.Collection.extend({model:m.models.Widget}),m.views.BasePlaceholder=Backbone.View.extend({initialize:function(){this.render()},render:function(){var e=this.model.get("region"),t=(this.model.get("order")||"append")+"To";return this.$el[t]("."+e).mFadeIn().html(this.template(this.model.toJSON())),this},attributes:function(){return{id:this.model.get("elementId")||this.model.get("id"),class:this.model.get("class")}},detach:function(){this.unbind(),this.stopListening(),this.undelegateEvents()}}),m.views.PanePlaceholder=m.views.BasePlaceholder.extend({template:m.templates.widgetmanager.pane,open:!1,events:{"click .toggle":"toggleShow","click .touch-overlay":"hidePane"},initialize:function(){var e=this;this.open=!1,this.region=this.model.get("region"),this.openStateKey=this.model.get("openState"),this.render(),this.model.get("toggleEvent")&&this.listenTo(m,this.model.get("toggleEvent"),this.toggleShow),this.model.get("hideEvents")&&_.each(this.model.get("hideEvents"),(function(t){e.listenTo(m,t,e.onHideEvent)}));var t=this.model.get("visibleSetting");t&&this.listenTo(m.models.customization,"change:"+t,this.visibleChanged),this.model.shouldShowPane()&&this.showPane()},attributes:function(){return{id:this.model.get("id"),class:"app-container "+this.model.get("id"),"data-test":this.model.get("data-test")}},render:function(){var e=this.model.get("label"),t=(this.model.get("order")||"append")+"To";if(!this.renderedOnce){var n=this.model.get("width")+"px",i="70px";if(this.model.has("height"))i=this.model.get("height")+"px";else{var o=this.storedPaneHeight();o&&(i=o+"px")}this.$el.html(this.template({label:e,appClass:this.model.get("appClass")||"",isTodo:"todo"===this.model.get("id"),height:i,width:n})),this.$app=this.$(".app"),this.$dash=this.$(".app-dash"),this.$el.addClass(this.model.get("class")||""),0===this.region.indexOf("top")&&(this.$dash.remove(),r&&r.length?r.after(this.$el):this.$el.prepend(this.$dash)),this.$(".app-wrapper").addClass("nipple-"+this.region);var s=this.model.get("after"),r=s&&$(s),a=this;setTimeout((function(){r&&r.length?r.after(a.$el):a.$el[t]("."+a.region),a.$el.mFadeIn(),a.renderedOnce=!0}))}return this},storedPaneHeight:function(){if(this.model.has("storedHeight")){var e=this.model.get("storedHeight"),t=localStorage[e];if(t)return JSON.parse(t)}return null},toggleShow:function(e){if(this.realView&&this.realView.toggleHandler)return this.open=this.realView.toggleHandler(e),!0;e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault(),this.open?this.hidePane():(m.Analytics.capture("app show",{feature:this.model.get("feature")||this.model.get("id"),method:e instanceof MouseEvent?"click":"hotkey",is_paid_event:!!this.model.get("isPlus")}),this.showPane())},showPane:function(){if(!this.open){if(this.open=!0,localStorage.setItem(this.openStateKey,this.open),this.$el.addClass("show").width(),this.$el.addClass("show-fade-in"),this.realView)this.realView.onShowPane&&this.realView.onShowPane();else{if(this.loading)return;if(!this.model.has("addin"))return;this.loading=!0,m.addinManager.ensureAddinLoaded(this.model.get("addin"))}m.trigger("globalEvent:toggle:"+this.region,this),m.trigger("globalEvent:toggle",this),this.triggerLoaded()}},hidePane:function(){var e=this;this.open&&(this.open=!1,localStorage.setItem(this.openStateKey,this.open),this.$el.removeClass("show-fade-in"),setTimeout((function(){e.$el.hasClass("show-fade-in")||e.$el.removeClass("show")}),300),this.realView&&this.realView.onHidePane&&this.realView.onHidePane())},triggerLoaded:function(){this.loadTriggered||(m.widgetManager.appReady(this.model.get("id")),this.loadTriggered=!0)},addRealView:function(e){this.realView=e,this.open&&this.realView.onShowPane&&this.realView.onShowPane()},onHideEvent:function(e){e!=this&&this.hidePane()},visibleChanged:function(){var e=this.model.get("visibleSetting"),t=m.models.customization.getComputedSetting(e),n=this;t?this.renderedOnce?(this.$el.addClass("app-container"),setTimeout((function(){n.$el.mFadeIn()}),1)):this.render():(this.realView&&this.realView.tearDown&&this.realView.tearDown(),setTimeout((function(){n.$el.mFadeOut(null,null,(function(){n.$el.removeClass("app-container")}))}),1))}}),m.views.MetricPlaceholder=m.views.BasePlaceholder.extend({template:m.templates.widgetmanager.metric,initialize:function(){var e=this;this.render(),setTimeout((function(){m.addinManager.ensureAddinLoaded(e.model.get("addin"))}),25),this.model.get("toggleEvent")&&this.listenTo(m,this.model.get("toggleEvent"),this.toggleShow)},render:function(){if(!this.renderedOnce){this.renderedOnce=!0;var e={},t=this.model.get("cachedKey");t&&(e=JSON.parse(localStorage.getItem(t)));var n=this.model.get("after"),i=n&&$(n),o=this.model.get("region"),s=(this.model.get("order")||"append")+"To";i&&i.length?i.after(this.$el):o&&this.$el[s]("."+o),this.$el.html(this.template(e)),m.appsLoaded&&this.$el.mFadeIn()}return this},toggleShow:function(e){if(this.realView&&this.realView.toggleHandler)return this.open=this.realView.toggleHandler(e),!0},addRealView:function(e){this.realView=e}}),m.models.WidgetManager=m.models.Manager.extend({skippedWidgets:[],topCenterHasContent:!1,initialize:function(){this.regions={},this.regions.logo={widgets:[],overlappingRegion:"teamlinks"},this.regions["top-left"]={widgets:[{el:"links-app",view:"teamlinks"}],overlappingRegion:"bottom-left"},this.regions["top-right"]={widgets:[{el:"base-metric",view:"metric"},{el:"weather-app",view:"weather"}],overlappingRegion:"bottom-right"},this.regions["bottom-right"]={widgets:[{el:"todo-app",view:"todoPane"},{el:"notes-app",view:"notes"}],overlappingRegion:"top-right"},this.regions.bottom={widgets:[{el:"quote",view:"quote"}],overlappingRegion:"top-right"},this.regions["bottom-left"]={widgets:[{el:"settings",view:"settings"}],overlappingRegion:"top-left"},this.waitingFor=["background"],m.console.log(m.elapsed()+": initialized widgetManager")},setupWhenReady:function(){var e=this;m.models.customization.initialized?e.setup():this.listenToOnce(m.models.customization,"initialized",(function(){e.setup()}))},setup:function(){this.widgets&&this.widgets.each((function(e){e.placeholder&&e.placeholder.remove()})),this.widgets=m.collect.widgets=new m.collect.Widgets,this.listenTo(this.widgets,"add",this.onAdd),this.listenTo(m,"readyForWidgets",this.onSuccessfulLogin),this.listenTo(m,"feature:changed",this.onSuccessfulLogin),this.populateWidgets()},checkWidgetTimeout:function(){if(!m.reactive.appsReady){var e=m.elapsed(),t=this;e<1500?setTimeout((function(){t.checkWidgetTimeout()}),1500-e):(this.firstShow(!0),console.warn("Widget Timeout Exceeded: Ensure all waited on apps are calling widgetManager.appReady(). Waiting for: ",this.waitingFor),m.$e.$emit("widgets:timeoutExceeded"))}},populateWidgets:function(){m.console.log(m.elapsed()+": populating widgets");var e=this;_.forEach(m.addinManager.getWidgets(),(function(t){e.widgets.add(t)}))},onAdd:function(e){this.addWidget(e)},onSuccessfulLogin:function(){var e=this,t=this.skippedWidgets;this.destroyWidgetsWithPrecludingFeatures(),this.skippedWidgets=[],_.each(t,(function(t){e.addWidget(t)}))},destroyWidgetsWithPrecludingFeatures:function(){var e=this;this.widgets.forEach((function(t){t.has("precludingFeature")&&!e.skippedWidgets.includes(t)&&e.someFeaturesEnabled(t.get("precludingFeature"))&&m.trigger("destroyWidget:"+t.get("id"))}))},someFeaturesEnabled:function(e){var t=!1;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)if(m.conditionalFeatures.featureEnabled(e[n])){t=!0;break}return t},addWidget:function(e,t){var n=this;t=t||!1;var i=e.get("browserBlacklist");if(!i||!(i.includes(m.globals.platform)||i.includes("Mobile")&&m.utils.isTouchDevice()))if(m.readyForWidgets||e.get("immediateLoad")){var o=!0;if(e.has("requiredFeature")&&(o=this.someFeaturesEnabled(e.get("requiredFeature"))),o&&e.has("precludingFeature")&&(o=!this.someFeaturesEnabled(e.get("precludingFeature"))),o){var s=m.models.teamInfo.get("team");if(!e.has("emptyFlag")||!s||s.userIsAdmin||!s[e.get("emptyFlag")]){if(!t&&e.has("visibleSetting")){var r=e.get("visibleSetting");if(!m.models.customization.getComputedSetting(r)){let t=function(){var i=!!m.models.customization.getComputedSetting(r);n.addWidget(e,i),m.models.customization.off("change:"+r,t),m.models.customization.off("visibilityOverride:"+r,t)};return m.models.customization.once("change:"+r,t),void m.models.customization.once("visibilityOverride:"+r,t)}}if("metric"===e.get("placeholderType")?(e.placeholder=new m.views.MetricPlaceholder({model:e}),this.waitFor(e)):"pane"===e.get("placeholderType")?(e.shouldShowPane()&&this.waitFor(e),e.placeholder=new m.views.PanePlaceholder({model:e})):(e.get("autoLoad")||e.shouldShowPane())&&(e.get("waitFor")&&this.waitFor(e),m.addinManager.ensureAddinLoaded(e.get("addin"))),e.placeholder&&m.once("destroyWidget:"+e.get("id"),(function(){e.placeholder&&(e.placeholder.undelegateEvents(),e.placeholder.remove(),Backbone.View.prototype.remove.call(e.placeholder))})),!this.topCenterHasContent)"top-center"===(m.models.customization.get("appRegionOverrides")[e.get("id")]||e.get("region"))&&(this.topCenterHasContent=!0,$(".top-row").addClass("has-center"))}}else this.skippedWidgets.push(e)}else this.skippedWidgets.push(e)},waitFor:function(e){this.waitingFor.push(e.id)},loadWidget:function(e){var t=this.widgets.find({id:e});return t?new Promise((function(e,n){m.addinManager.ensureAddinLoaded(t.get("addin"),(function(t){e(t)}),null,(function(e){n(e)}))})):Promise.resolve()},getWidget:function(e){return this.widgets.find({id:e}).realview},getWidgetAsync:function(e){var t=this;return new Promise((function(n){var i=t.widgets.find({id:e});i.realview?n(i.realview):t.loadWidget(e).then((function(){n(i.realview)}))}))},registerWidget:function(e,t){this.widgets.add({id:e},{silent:!0}),this.widgets.find({id:e}).realview=t},handover:function(e,t,n){n=n||{};var i=this.widgets.find({id:e});if(i){var o=i.placeholder;if(o){var s=i.get("placeholderType");"pane"===s?n.el=o.$app:("metric"===s||"dashIcon"===s)&&(n.el=o.el)}var r,a=this;if(t)return r=new t(n),i.realview=r,i.shouldRender&&r.render(),a.updatePlaceHolder(i.placeholder,r,n.el),r;n.bootstrap&&(i.bootstrap=n.bootstrap,i.bootstrap&&m.readyForWidgets&&i.bootstrap(n.el,(function(e){i.realview=e,i.shouldRender&&e.render(),a.updatePlaceHolder(i.placeholder,e,n.el)})))}},updatePlaceHolder:function(e,t,n){$(n&&n[0]).closest(".app-placeholder").removeClass("app-placeholder"),e&&e.addRealView(t)},refocusOverlap:function(e){$("."+this.regions[e].overlappingRegion).removeClass("unfocus")},unfocusOverlap:function(e,t){var n=this;setTimeout((function(){var i=n.regions[e].overlappingRegion,o=n.regions[i],s=$("."+i);if(t){var r=[];o.widgets.forEach((function(e){var t=0,n=m.views[e.view];if(!n&&window.addin&&(n=addin.views[e.view]),n&&n.getCurrentHeight)t=n.getCurrentHeight();else{var i=$("."+e.el);t=i.length>0&&i.is(":visible")?i.height():0}r.push(t)}));var a=$("."+e).height()+s.height()+Math.max.apply(null,r),l=$(".bookmarks-wrapper"),c=0;l.css("transform")&&(c=parseInt(l.css("height"))-parseInt(l.css("transform").split(",")[5])),$("body").height()-(a+c+4)<t&&s.addClass("unfocus")}else s.addClass("unfocus")}),1)},hideApps:function(e){var t=(e=e||{}).exemptionSelectors,n=e.immediate,i=$(".app-container"),o=$(".apps");this.timeout&&clearTimeout(this.timeout),i.each((function(){$(this).css({opacity:""})})),e.layer&&e.layer!==m.hideAppExemptionLayerStack.getLayer().key&&(this.removeAppExemption(".apps .show-anyway","_"),m.hideAppExemptionLayerStack.addLayer(e.layer),this._applyExemptionsForTopLayer()),t&&this.addAppExemption(t,e.layer),n&&o.addClass("u--no-transition"),o.addClass("hide-apps"),n&&setTimeout((function(){o.removeClass("u--no-transition")}),10)},addAppExemption:function(e,t){this._toggleAppException(e,!0,t)},addVueAppExemption:function(e,t){e.forEach((function(e){m.showAnyway.show(e),m.hideAppExemptionLayerStack.addAppExemptionToLayer(e,t,!0)}))},removeAppExemption:function(e,t){this._toggleAppException(e,!1,t)},removeVueAppExemption:function(e,t){e.forEach((function(e){m.showAnyway.hide(e),m.hideAppExemptionLayerStack.removeAppExemptionFromLayer(e,t,!0)}))},_toggleAppException:function(e,t,n){$(e).each((function(){var e=$(this);if(!n||t||m.hideAppExemptionLayerStack.getLayer(n)||"_"===n){var i=e.data("show-anyway"),o=!0;if(i&&m.showAnyway[t?"show":"hide"](i),!i){e[t?"addClass":"removeClass"]("show-anyway");var s=e.attr("data-show-anyway-backbone");s?i=s:(i=m.utils.uuidv4(),e.attr("data-show-anyway-backbone",i)),o=!1}t?m.hideAppExemptionLayerStack.addAppExemptionToLayer(i,n,o):m.hideAppExemptionLayerStack.removeAppExemptionFromLayer(i,n,o)}}))},_applyExemptionsForTopLayer:function(){var e=m.hideAppExemptionLayerStack.getLayer();e.vueExemptions.size&&this.addVueAppExemption(Array.from(e.vueExemptions)),e.backboneExemptions.size&&this.addAppExemption(Array.from(e.backboneExemptions).map((function(e){return'[data-show-anyway-backbone="'+e+'"]'})).join(", "))},showApps:function(e){var t=(e=e||{}).hideFirst;if(t||this.backgroundIsReady){this.timeout&&clearTimeout(this.timeout);var n=$(".apps");if(t&&(n.addClass("u--no-transition"),n.removeClass("show-apps"),setTimeout((function(){n.removeClass("u--no-transition"),n.removeClass("hide-apps")}),10)),n.removeClass("hide-apps"),this.removeAppExemption(".apps .show-anyway",e.layer),e.layer)m.hideAppExemptionLayerStack.removeLayer(e.layer)&&m.hideAppExemptionLayerStack.getLayer().key&&(this.hideApps(),this._applyExemptionsForTopLayer(e.layer))}},appReady:function(e,t){m.console.log(m.elapsed()+": "+e+" is ready"),this[e+"IsReady"]=!0;var n=this.waitingFor.indexOf(e);n>=0&&(this.waitingFor.splice(n,1),t||this.firstShow())},showDashboard:function(){document.getElementById("main-view").style.visibility="visible"},firstShow:function(e){var t=this;m.reactive.appsReady||0!==this.waitingFor.length&&m.readyForWidgets&&!e||(this.showDashboard(),$("body").removeClass("blur show-otl"),setTimeout((function(){m.reactive.appsReady||(t.setBottomSideWidth(),w.introductionActive||""!==m.hideAppExemptionLayerStack.getLayer().key||t.showApps(),m.reactive.appsReady=!0,m.appsReadyAt=m.now(),m.trigger("appsReady"))}),1),setTimeout((function(){m.appsLoaded=!0,t.loadImages(),setTimeout((function(){m.models.activeBackground.preCacheFutureBackgroundImages(),window.chrome&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((function(e){"hot-reload"===e.type&&window.location.reload()}))}),50)}),500))},loadImages:function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++)e[t].getAttribute("data-src")&&e[t].setAttribute("src",e[t].getAttribute("data-src"))},setBottomSideWidth:function(){document.documentElement.style.setProperty("--bottom-side-width","auto");var e=$(".bottom-left").width();document.documentElement.style.setProperty("--bottom-side-width",Math.round(e)+"px")}}),m.models.Image=Backbone.Model.extend({loading:!1,success:!1,failed:!1,timeoutId:null,initialize:function(){},load:function(e,t){if(!this.loading){var n=this,i=this.get("url"),o=this.get("uuid");if(null===i)i="backgrounds/"+o+".jpg";else if(!i)return void l("imageUrl is missing");var s=this.get("variant");if(this.success)m.trigger("image:loaded",o,i,s,t);else{this.loading=!0;var r=new Image;if(r.onload=function(){n.success=!0,n.cleanup();var e=!1,r=n.get("height"),a=n.get("width");if(r&&a)this.height==r&&this.width==a||(e=!0);else{n.get("skip_check")||(this.height<750||this.width<1e3)&&(e=!0)}if(e){return n.failed=!0,localStorage.setItem("failed:"+i,"true"),s&&({errorType:"loadError",itemUuid:o,errorMessage:"size mismatch"}.variant=s),void m.trigger("image:error",o)}n.loading=!1,m.trigger("image:loaded",o,i,s,t)},r.onerror=l,e&&(this.timeoutId=setTimeout((function(){n.success||m.trigger("image:timeout")}),e)),m.utils.isChromium())i&&i.lastIndexOf("momo_cache_bg_uuid")<0&&(i=i+"?momo_cache_bg_uuid="+o);else if(i&&i.lastIndexOf("momo_cache_bg_uuid")>0){var a=i.split("?");a.pop(),i=a.join("?")}r.setAttribute("src",i)}}function l(e){n.failed=!0,n.loading=!1,n.cleanup(),e&&JSON.stringify(e),m.trigger("image:error",o)}},cleanup:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}),m.models.ImageManager=Backbone.Model.extend({images:{},initialize:function(){},loadImage:function(e,t,n){try{var i,o=e.uuid;return Object.prototype.hasOwnProperty.call(this.images,o)?i=this.images[o]:(i=new m.models.Image(e),this.images[o]=i),i.load(t,n),!0}catch(s){console.error(s)}return!1},preCacheFutureBackgroundImages:function(e){var t=this;if(e&&e.length>0){var n=e.findWhere({cached:!1});n&&(this.listenToOnce(m,"image:loaded",(function(){t.preCacheFutureBackgroundImages(e)})),t.preCacheBackgroundImage(n))}},preCacheBackgroundImage:function(e){if(e){var t=e.backgroundUuid(),n=e.get("filename"),i={uuid:t,url:n};i.height=e.get("height"),i.width=e.get("width"),i.skip_check=!!e.get("skip_check"),i.variant=e.get("variant"),n&&this.loadImage(i,null,!0)}}}),m.models.BackgroundBase=Backbone.Model.extend({defaults:{cached:!1},backgroundUuid:function(){var e=this.get("_id");if(e)return e;var t=this.get("filename");if(0===t.indexOf("http"))return null;var n=t.split("/");return 2==n.length&&2==(n=n[1].split(".")).length?n[0]:null}}),m.models.Background=m.models.BackgroundBase.extend({idAttribute:"forDate"}),m.models.ActiveBackground=Backbone.Model.extend({initialize:function(e,t){this.displayLogged=!1,this.backgrounds=t.backgrounds,this.legacyBackgrounds=t.legacyBackgrounds,this.listenTo(this.backgrounds,"reset",this.collectionReady),this.listenTo(this.legacyBackgrounds,"reset",this.legacyCollectionReady),this.listenTo(m,"newDay",this.handleNewDay,this),this.listenTo(m,"waitForPhotoActivation",this.waitForPhotoActivation,this),this.listenTo(this,"background:fallback",this.handleFallback,this)},handleNewDay:function(){var e=this;e.intervalId=setInterval((function(){e.backgrounds.length>0&&(e.checkActiveBackground(),clearInterval(e.intervalId))}),50)},handleFallback:function(){var e=this.fallbackKey(),t=localStorage.getItem(e),n=null;this.legacyBackgrounds.initialized?t?((n=this.legacyBackgrounds.getBackground(t))||(n=this.legacyBackgrounds.getCurrentLocalBackground())&&localStorage.setItem(e,n.backgroundUuid()),n&&(this.usingFallback=!0,this.setActiveBackground(n,!0))):n||(n=this.legacyBackgrounds.getCurrentLocalBackground())&&(localStorage.setItem(e,n.backgroundUuid()),this.usingFallback=!0,this.setActiveBackground(n,!0)):this.legacyBackgrounds.waitingForFallback=!0},waitForPhotoActivation:function(e){this.isWaitingForPhotoActivation=e},collectionReady:function(){this.checkActiveBackground(),this.isWaitingForPhotoActivation=!1},fallbackKey:function(){return"fallback-"+m.utils.getDateString()},legacyCollectionReady:function(){this.backgrounds.length>0?this.backgrounds.get(m.utils.getDateString())||this.checkActiveBackground():this.checkActiveBackground();m.trigger("legacybackgrounds:ready")},getWidgetColor:function(){if(!this.backgroundItem)return null;var e=this.backgroundItem.get("widgetColor");if(!this.isCustom()&&!e&&this.backgroundItem.get("isBuiltIn")&&this.legacyBackgrounds.length>0)return this.legacyBackgrounds.getBackground(this.activeBackgroundUuid()).get("widgetColor");var t=this.backgroundItem.get("filename");if(void 0===e&&t){var n=this;m.colorService.getAccentColor(t).then((function(e){n.backgroundItem.save({widgetColor:e}),m.models.themeManager.setAccentColor(m.models.customization.get("themeColour"))}))}return e},activeBackgroundUuid:function(){return this.backgroundItem?this.backgroundItem.backgroundUuid():null},checkActiveBackground:function(){var e=null;this.backgrounds&&this.backgrounds.length>0&&(e=this.backgrounds.getActiveItem())?this.setActiveBackground(e):this.trigger("background:fallback")},successfullyLoaded:function(e){this.backgroundItem.backgroundUuid()==e&&this.trigger("background:successfullyLoaded",this.backgroundItem)},setActiveBackground:function(e,t){this.legacyBackgrounds.waitingForFallback=!1,e&&(e.has("_id")&&this.lastBgId==e.get("_id")||(this.lastBgId=e.get("_id"),this.backgroundItem&&this.backgroundItem.cid==e.cid||(this.displayLogged=!1,this.backgroundItem=e,this.trigger("background:activeChanged",e,!!t))))},generateUUID:function(){var e=m.date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))},preCacheFutureBackgroundImages:function(){m.models.imageManager.preCacheFutureBackgroundImages(this.backgrounds)},isCustom:function(){if(this.backgroundItem)return this.backgroundItem.get("isCustom")}}),m.models.LegacyBackground=m.models.BackgroundBase.extend({parse:function(e){var t=e.id;if(!t){var n=e.filename.split("/");2==n.length&&2==(n=n[1].split(".")).length&&(t=n[0])}this.set({id:t,filename:e.filename,title:e.title,source:e.source,sourceUrl:e.sourceUrl,widgetColor:e.widgetColor})}}),m.collect.Fallbacks=Backbone.Collection.extend({model:Backbone.Model,beforeDate:function(e){var t=this.filter((function(t){return t.get("fallbackDate")<e}));return new m.collect.Fallbacks(t)}}),m.collect.LegacyBackgrounds=Backbone.Collection.extend({model:m.models.LegacyBackground,url:"backgrounds/backgrounds.json",parse:function(e){return e.backgrounds},initialize:function(){this.initialized=!1,this.listenTo(this,"reset",(function(){this.initialized=!0,this.waitingForFallback&&m.models.activeBackground.trigger("background:fallback")})),localStorage.firstSynchronized||this.listenTo(this,"reset",this.initializeBackground)},initializeBackground:function(){this.getCurrentLocalBackground(),m.trigger("sync:downloadIfNeeded")},getBackground:function(e){return this.get(e)},getCurrentLocalBackground:function(){if(0===this.models.length)return null;var e=null,t=m.models.activeBackground.fallbackKey(),n=localStorage.getItem(t);if(n&&(e=this.get(n)),!e){if(!this.parseRecentFallbacks())return null;var i=Math.floor(.75*this.models.length),o=this.fallbacks.sortBy((function(e){return-e.get("fallbackDate")})),s=_.first(o,i),r=_.map(s,(function(e){return e.get("backgroundGuid")})),a=this.pluck("id");if(m.collect.backgrounds){var l=m.collect.backgrounds.sortBy((function(e){return-Date.parse(e.get("forDate"))}));i=Math.floor(.25*this.models.length);var c=_.first(l,i),u=_.map(c,(function(e){return e.get("_id")}));r=_.union(r,u)}var d=_.difference(a,r);if(d.length>0){var h=_.sample(d);e=this.get(h)}else e=this.sample()}return e},parseRecentFallbacks:function(){if(this.fallbacks)return!0;this.fallbacks=new m.collect.Fallbacks;var e=this;return Object.keys(localStorage).forEach((function(t,n){if(0===t.indexOf("fallback-")){var i=t.slice(9),o=Date.parse(i),s=new Backbone.Model({fallbackDate:o,backgroundGuid:n});e.fallbacks.add(s)}})),!0}}),m.models.BackgroundManager=m.models.FeedManager.extend({initialize:function(){m.models.FeedManager.prototype.initialize.call(this,m.models.Background,"background"),m.models.imageManager=new m.models.ImageManager,m.collect.legacyBackgrounds=new m.collect.LegacyBackgrounds,m.models.activeBackground=new m.models.ActiveBackground({},{backgrounds:m.collect.backgrounds,legacyBackgrounds:m.collect.legacyBackgrounds}),this.listenTo(m,"image:loaded",this.markBackgroundAsCached),m.widgetManager.loadWidget("background")},firstFetch:function(){var e=m.collect.backgrounds,t=m.collect.legacyBackgrounds;m.firstLoadEver&&(e=m.collect.legacyBackgrounds,t=m.collect.backgrounds,m.firstLoadEver=!1),e.fetch({reset:!0}),setTimeout((function(){t.fetch({reset:!0})}),500)},getActiveItem:function(){return m.models.activeBackground.backgroundItem},markBackgroundAsCached:function(e,t,n){var i={_id:e};n&&(i.variant=n);var o=m.collect.backgrounds.where(i);o&&o.forEach((function(e){e&&e.get("testOnly")?e.destroy():e.save("cached",!0)}))}}),m.collect.SyncedCollection=Backbone.Collection.extend({loadedOnce:!1,initialize:function(e,t){(this.model=t.model,this.version=2,this.rate=0,this.rateLimit=5,this.sameTimeThreshold=100,this.backOffTime=1e4,this.lastCall=0,this.name=t.name,t.isDummy||t.onlineOnly)||(localStorage.getItem("syncedCollectionVersion-"+this.name)||(this.migrate(),localStorage.setItem("syncedCollectionVersion-"+this.name,this.version)));this.offlineOnly=t.offlineOnly,this.readOnly=t.readOnly,t.onlineOnly?(this.onlineOnly=!0,this.idAttribute=this.serverIdAttribute="id"):(this.idAttribute=t.idAttribute||"csid",this.serverIdAttribute=t.serverIdAttribute||"id",t.isDummy||(this.localStorage=new Backbone.LocalStorage(t.name))),this.apiUrl=t.apiUrl||m.globals.urlRootApi+t.name,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"change",this.onChange),this.listenTo(this,"reset",this.onReset),this.includeArchived=!1,this.transientProps=t.transientProps||[],this.transientProps.push("syncing"),this.localProps=t.localProps||[],this.localProps.push("serverSetId",this.serverIdAttribute),this.sorted=t.sorted,this.parent=t.parent},everLoaded:function(){return this.offlineOnly||this.onlineOnly||!!localStorage.getItem(this.name+"-loaded-once")},setLoadedOnce:function(){this.parent&&this.parent.set({loadedOnce:!0},{silent:!0,ignoreRender:!0,ignoreSave:!0});var e=!this.loadedOnce;return e&&this.trigger("loaded-from-server"),localStorage.setItem(this.name+"-loaded-once","true"),this.loadedOnce=!0,this.loading=!1,e},fetch:function(e){var t=this;((e=e||{}).skipLocalFetch||Backbone.Collection.prototype.fetch.call(this,e),this.offlineOnly||e.skipServerFetch||this.isComputed)?this.setLoadedOnce()&&this.trigger("refresh"):!e.skipLocalFetch&&e.reset||this.onlineOnly||this.isDummy||this.fetchFromServer(e.skipLocalFetch?function(){t.trigger("sync",t,t.models,e),e.success&&e.success()}:null,e.skipLocalFetch?e.error:null,e)},create:function(e,t){if(this.onlineOnly)return Backbone.Collection.prototype.create.call(this,e,t);t=t||{},e[this.idAttribute]||(e[this.idAttribute]=m.utils.uuidv4()),e.serverSetId||(e.serverSetId=!1);var n=this.add(e,t);return n.id=n.get(this.idAttribute),n.collection=this,n.save({},{silent:!0,ignoreSave:!0,ignoreRender:!0}),t.success&&t.success(n),n},migrate:function(){var e=this,t=localStorage.getItem(this.name);t&&0!==(t=t.split(",")).length&&t.map((function(t){var n=e.name+"-"+t,i=localStorage.getItem(n);i&&((i=JSON.parse(i))[e.idAttribute]||(i[e.idAttribute]=i.id,i=JSON.stringify(i),localStorage.setItem(n,i)))}))},activeItems:function(){return this.filter((function(e){return!e.get("deleted")}))},onReset:function(e,t){if(!this.onlineOnly&&!this.isDummy){if(this.fetchedOnce=!0,this.offlineOnly)this.setLoadedOnce()&&this.trigger("refresh");var n=this;this.models.forEach((function(e){e.id=e.get(n.idAttribute),n.transientProps&&n.transientProps.forEach((function(t){e.attributes[t]=!1})),e.get("serverSetId")||e.set("serverSetId",!1)})),this.offlineOnly||this.isDummy||this.syncToServer((function(){n.fetchFromServer(null,null,t)}))}},findHavingAttribute:function(e){return this.filter((function(t){return t.has(e)}))},hasAttribute:function(e){return!!this.find((function(t){return t.has(e)}))},onAdd:function(e,t,n,i){if((n=n||{}).ignoreSave||e.get("unsyncable")||e.get("syncing")&&e.get("syncing")>m.now()||e.get("serverSetId")||e.get("deleted")||this.isValidModel&&!this.isValidModel(e)||this.readOnly||this.offlineOnly||this.onlineOnly)i&&i();else if(this.shouldIgnoreSync&&this.shouldIgnoreSync(e))i&&i();else{var o=e.toJSON(),s=e.get(this.idAttribute);this.transientProps=this.transientProps||[],this.transientProps.push("syncing"),this.transientProps.forEach((function(e){delete o[e]})),this.localProps&&this.localProps.forEach((function(e){delete o[e]})),e.set({syncing:m.now()+1e4},{silent:!0});var r=this;this.syncInProgress=!0,r.idAttribute!==r.serverIdAttribute&&delete o[r.idAttribute];var a={};Object.assign(a,o,n.additionalData);var l=e.get("changed_props")&&e.get("changed_props").toString();a.csid=s,$.ajax({url:e.apiUrl||this.apiUrl,contentType:"application/json",type:"POST",data:JSON.stringify(a)}).done((function(t){t&&t[r.serverIdAttribute]&&(o=e.toJSON(),e.get("changed_props")&&e.get("changed_props").toString()===l&&(o.changed_props=null),o.serverSetId=!0,o.syncing=0,delete o[r.idAttribute],o[r.serverIdAttribute]=t[r.serverIdAttribute],(e=r.getModel(e,s))&&(e.save(o,{silent:!0}),e.saveHandler&&e.saveHandler(t))),n.serverSuccess&&n.serverSuccess(e)})).fail((function(t,n,i){if("Bad Request"===i){if(!(e=r.getModel(e,s)))return;e.id=e.get(e.idAttribute),e.destroy({silent:!0})}})).always((function(){(e=r.getModel(e,s))&&e.set({syncing:0},{silent:!0}),r.syncInProgress=!1,r.missedSync&&(r.missedSync=!1,r.syncToServer()),i&&i()}))}},getModel:function(e,t){var n={};n[this.idAttribute]=t;var i=this.findWhere(n);return i||((n={})[this.serverIdAttribute]=t,i=this.findWhere(n)),!i&&e&&e.mainContent&&(i=this.findWhere(e.mainContent())),i},onChange:function(e,t){if(!(this.readOnly||this.offlineOnly||this.onlineOnly||t&&t.skipServerSync)){var n=this;if(!(t=t||{}).ignoreSave){var i=e.changedAttributes();if(i&&!i[this.idAttribute]&&!t.createdNow){var o,s=null,r=!1;for(o in this.transientProps&&this.transientProps.forEach((function(e){delete i[e]})),this.localProps&&this.localProps.forEach((function(e){delete i[e]})),i)Object.prototype.hasOwnProperty.call(i,o)&&"changed_props"!==o&&(s||(s=e.get("changed_props")||[]),_.contains(s,o)||(o!==n.idAttribute&&s.push(o),r=!0));var a=!1;if(!e.get(this.serverIdAttribute)&&Object.keys(i).length){if(!(e.get("syncing")&&e.get("syncing")>m.now()))return void this.onAdd(e,this,t);a=!0,n.syncScheduled=!0,setTimeout((function(){n.syncToServer(t.serverSuccess)}),1e3)}r&&s&&s.length>0&&e.save({changed_props:s},{silent:!0,ignoreSave:!0,ignoreRender:!0,success:function(){t.postponeSync||a||n.syncToServer(t.serverSuccess)}})}}}},syncToServer:function(e){if(this.readOnly||this.offlineOnly||this.onlineOnly)e&&e();else if(this.syncInProgress)this.missedSync=!0;else{var t=this;this.syncInProgress=!0;var n=0,i=this.findHavingAttribute("changed_props"),o=this.where({serverSetId:!1});if(o?Array.isArray(o)||(o=[o]):o=[],o.forEach((function(e){t.onAdd(e,null,null,(function(){r()}))})),i&&0!==i.length){var s=!1;i.forEach((function(n){if(!s&&n.get(t.serverIdAttribute)){var i=n.get("changed_props"),o=i.toString();if(t.transientProps&&t.transientProps.forEach((function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)})),t.localProps&&t.localProps.forEach((function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)})),!i||0===i.length)return n.save({changed_props:null},{silent:!0}),void r();n.syncing=!0;var a={};if(_.each(i,(function(e){"changed_props"!==e&&e!==t.idAttribute&&(a[e]=n.get(e))})),!t.isWithinRateLimit()&&!t.syncScheduled)return t.syncScheduled=!0,setTimeout((function(){t.syncScheduled=!1,t.syncToServer(e)}),t.backOffTime),t.syncInProgress=!1,void(s=!0);if(!t.syncScheduled){n.getSupplementaryData&&Object.assign(a,n.getSupplementaryData());var l=n.get(t.serverIdAttribute),c=(n.apiUrl||t.apiUrl)+"/"+encodeURIComponent(l),u=n.get(t.idAttribute);$.ajax({url:c,contentType:"application/json",type:"PATCH",data:JSON.stringify(a)}).done((function(e,i){(n=t.getModel(n,u))&&(e&&e.success||"success"===i)&&(n.collection&&n.get("deleted")?n.destroy({silent:!0}):n.get("changed_props")&&n.get("changed_props").toString()===o&&n.collection&&n.save({changed_props:null},{silent:!0}),"T"===l[0]&&t.fetch({reset:!0,skipLocalFetch:!0}))})).always((function(){r()}))}}}))}else 0===o.length&&(this.syncInProgress=!1,e&&e())}function r(){++n===i.length+o.length&&(t.syncInProgress=!1,n=0,t.missedSync&&(t.missedSync=!1,t.syncToServer()),e?e():t.fetchFromServer(null,null,t.lastFetchOptions))}},isWithinRateLimit:function(){var e=m.now();if(e<this.lastCall+this.sameTimeThreshold){if(this.lastCall=e,this.rate++,this.rate>this.rateLimit)return!1}else this.rate=0;return this.lastCall=e,!0},fetchFromServer:function(e,t,n){if(this.lastFetchOptions=n,!this.syncScheduled){n=n||{};var i=m.now()-this.lastFetch<500;if(this.offlineOnly||n.skipServerFetch||i)e&&e();else{this.lastFetch=m.now();var o=n.data,s=this;$.ajax({url:this.apiUrl+(this.includeArchived?"?includeArchived=true":""),contentType:"application/json",type:"GET",data:o}).done((function(e){var t=!1;if(e)if("authRequired"===e.status&&s.handleAuthRequired)s.handleAuthRequired(e);else{if(s.parse&&(e=s.parse(e)),!Array.isArray(e))for(var i in e)Array.isArray(e[i])&&(e=e[i]);var o=[];_.each(e,(function(e){if(e){o.push(e[s.serverIdAttribute]);var n={};n[s.serverIdAttribute]=e[s.serverIdAttribute]+"";var i=s.findWhere(n);if(e.serverSetId=!0,i){e[s.idAttribute]||(e[s.idAttribute]=i.get(s.idAttribute));var r=Math.max(i.get("modifiedServer")&&Date.parse(i.get("modifiedServer"))||0,i.get("modified")||0);(s.readOnly||!e.modifiedServer||Date.parse(e.modifiedServer)>r)&&i.save(e,{ignoreSave:!0,ignoreRender:!0})}else e[s.idAttribute]||(e[s.idAttribute]=e[s.serverIdAttribute]),s.create(e,{ignoreSave:!0,ignoreRender:!0}),e.archived||(t=!0)}}));var r=s.models.slice();if(!1!==n.remove&&r.forEach((function(e){if(e.get("serverSetId")&&o.indexOf(e.get(s.serverIdAttribute))<0&&!e.get("isDummy")&&!e.get("unsyncable")){var n={};n[s.idAttribute]=e.get([s.idAttribute])+"";var i=s.findWhere(n);i.id=i.get(i.idAttribute),i.destroy({silent:!0}),t=!0}})),s.readOnly)return s.set(e,{silent:!0,remove:!0}),s.trigger("refresh"),void s.setLoadedOnce();s.trigger("change",null,{ignoreSave:!0}),(t=s.setLoadedOnce()||t)&&s.trigger("refresh"),s.trigger("server-sync"),s.handleOrdering&&s.handleOrdering(e)}})).fail((function(e){e.responseJSON&&"authRequired"===e.responseJSON.status&&s.handleAuthRequired?s.handleAuthRequired(e.responseJSON):e.responseJSON&&"Microsoft Todo is not enabled for this account."===e.responseJSON.message.detail?m.$e.$emit("flashMessage",{icon:"data:image/svg+xml,%3Csvg viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M64 32C64 49.6731 49.6731 64 32 64C14.3269 64 0 49.6731 0 32C0 14.3269 14.3269 0 32 0C49.6731 0 64 14.3269 64 32ZM28 46C28 43.7909 29.7909 42 32 42C34.2091 42 36 43.7909 36 46C36 48.2091 34.2091 50 32 50C29.7909 50 28 48.2091 28 46ZM32 15C29.7909 15 28 16.7909 28 19V33C28 35.2091 29.7909 37 32 37C34.2091 37 36 35.2091 36 33V19C36 16.7909 34.2091 15 32 15Z' /%3E%3C/svg%3E",contact:!1,message:"Oops, your Microsoft account does not support tasks",button:{text:"Learn more",action:function(){m.utils.getBrowser().tabs.create({url:"https://go.microsoft.com/fwlink/?linkid=2153209"})}}}):t?t():!s.fetchedOnce&&n.error&&n.error(e)})).always((function(){e&&e()}))}}}}),m.models.TeamInfo=Backbone.Model.extend({localStorage:new Backbone.LocalStorage("team-info"),defaults:{team:null,id:1},initialize:function(){this.fetch()}}),m.models.Message=Backbone.Model.extend({defaults:function(){return{title:null,message:"",recurringInterval:null,priority:5,views:0,viewLimit:3,deleted:!1,createdDate:m.now(),visible:!1,loginOnClick:!1,targetArea:null,important:!1,fromServer:!1,image_url:""}},showMessage:function(e,t,n,i){m.commandManager.execute("notification.show.enhanced",{title:e,message:t,views:0,viewLimit:n,visible:!0,loginOnClick:i})},isTeamNotification:function(){return"team"===this.get("notification_type")},dismissMessage:function(){m.commandManager.execute("notification.dismiss")},save:function(e,t){if(t||(t={}),e||(e=_.clone(this.attributes)),Object.prototype.hasOwnProperty.call(e,"dismissed")&&e.dismissed&&(e.deleted=!0),!t.download_save&&this.get("fromServer"))try{var n=null;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&"changed_props"!=i&&"sync_success"!=i&&(n||(n=this.get("changed_props")||[]),_.contains(n,i)||n.push(i));n&&(e.changed_props=n,e.sync_success=!1,t.silent=!1)}catch(o){console.error(o)}return Backbone.Model.prototype.save.call(this,e,t)}}),m.collect.Messages=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("momentum-messages"),model:m.models.Message,cleaned:!1,initialize:function(){this.listenTo(this,"reset",this.cleanupMessagesIfRequired)},cleanupMessagesIfRequired:function(){if(!this.cleaned){this.cleaned=!0;var e=[];this.each((function(t){if(t.get("deleted")||t.get("expiry")&&!(Date.parse(t.get("expiry"))>m.now()))t.get("fromServer")&&t.get("sync_success")&&!t.get("changed_props")&&e.push(t);else{var n=t.get("filter");n&&m.conditionalFeatures.featureEnabled(n)?t.save({deleted:!0,filtered:!0}):5==t.get("priority")?t.get("fromServer")?t.save({deleted:!0}):e.push(t):t.get("visible")||t.save({deleted:!0})}})),e.length>0&&_.each(e,(function(e){e.destroy()}))}}}),m.models.NotificationSync=Backbone.Model.extend({baseUrl:m.globals.urlRootApi+"notifications",initialize:function(e){this.collection=e.collection,this.listenTo(this.collection,"change:changed_props",this.onChange),this.listenTo(this.collection,"reset",this.onReset)},findHavingAttribute:function(e,t){return e.filter((function(e){return e.has(t)}))},hasAttribute:function(e,t){return!!e.find((function(e){return e.has(t)}))},onReset:function(){this.syncToServer()},onChange:function(e,t){if(!t.ignoreSave){var n=e.changedAttributes();n&&Object.prototype.hasOwnProperty.call(n,"changed_props")&&n.changed_props&&this.syncToServer()}},syncToServer:function(e){var t=this,n=this.findHavingAttribute(this.collection,"changed_props");Promise.all(n.map((function(e){if(e.get("fromServer")){var n=e.get("changed_props");if(!n||0==n.length)return Promise.resolve();var i={};if(_.each(n,(function(t){"changed_props"!=t&&"sync_success"!=t&&(i[t]=e.get(t))})),1==Object.keys(i).length&&Object.prototype.hasOwnProperty.call(i,"views"))return Promise.resolve();var o=t.baseUrl+"/"+encodeURIComponent(e.id);return new Promise((function(t){$.ajax({url:o,contentType:"application/json",type:"PATCH",data:JSON.stringify(i)}).done((function(t){t&&t.success&&e.save({changed_props:null,sync_success:!0},{silent:!0})})).fail((function(){e.save({sync_success:!1},{silent:!0})})).always(t)}))}}))).then((function(){e&&e()}))}}),m.models.NotificationManager=Backbone.Model.extend({backgroundLoaded:!1,_notificationView:null,settingsVisible:!1,initialize:function(){this.displayed=[],this.collection=new m.collect.Messages,m.models.message=new m.models.Message,this.listenTo(this.collection,"add reset",this.displayPendingMessages),this.listenToOnce(m,"background:loadSuccessful",this.onBackgroundLoaded),this.listenTo(m,"settings:hidden",this.settingsHidden),this.listenTo(m,"settings:visible",this.onSettingsVisible),this.listenTo(m,"notifications:timestamp",this.onAvailableTimestamp),this.listenTo(m,"appsReady",this.displayPendingMessages),m.conditionalFeatures.featureEnabled("notifySyncOff")||(this.notifySync=new m.models.NotificationSync({collection:this.collection})),this.collection.fetch({reset:!0})},onBackgroundLoaded:function(){this.backgroundLoaded||(this.backgroundLoaded=!0,this.displayPendingMessages(),m.commandManager.execute("clean.localstorage"))},displayPendingMessages:function(){var e=this;if(this.collection.cleanupMessagesIfRequired(),w.appsReady&&!w.introductionActive&&!this.settingsVisible){var t=this.notificationView();if(t&&!(t.notifying||m.modal.locked||m.reactive.onboardingRefreshing)){var n=this.collection.where({deleted:!1,visible:!0}).filter((function(t){var n=t.get("filter"),i=t.get("recurringInterval"),o=t.get("lastDismissed");if((!n||!m.conditionalFeatures.featureEnabled(n))&&!(i&&o+i>(new Date).getTime())&&!(t.get("expiry")&&Date.parse(t.get("expiry"))<m.now())&&(!t.get("fromServer")||t.get("group_notification_id")))return!e.displayed.includes(t)})).sort((function(e,t){return e.get("priority")>t.get("priority")?1:e.get("priority")<t.get("priority")?-1:t.get("createdDate")-e.get("createdDate")}));if(n&&0!==n.length){var i=n[0];this.displayed.push(i),t.showMessage(i)}}}},onAvailableTimestamp:function(e){if(e){var t=localStorage.getItem("ts_notifications");(!t||e>t)&&this.downloadNotifications()}},downloadNotifications:function(){var e=this,t=localStorage.getItem("ts_notifications"),n=m.globals.urlRootApi+"notifications";t&&(t=parseInt(t,10),Number.isInteger(t)&&(n=n+"?ts="+t));try{$.ajax({type:"GET",contentType:"application/json",url:n}).done((function(t){t&&t.timestamp&&(t.notifications&&t.notifications.length>0&&(e.collection.reset(t.notifications),e.collection.invoke("save",null,{download_save:!0})),localStorage.setItem("ts_notifications",t.timestamp))}))}catch(i){console.error(i)}},showMessage:function(e,t,n,i){var o={title:e,message:t,visible:!0};void 0!==n&&(o.viewLimit=n),void 0!==i&&(o.loginOnClick=i),this.collection.create(o)},showMessageEnhanced:function(e,t,n){Object.prototype.hasOwnProperty.call(e,"visible")||(e.visible=!0);var i={};t&&(i.success=t),n&&(i.silent=!0),this.collection.create(e,i)},dismissMessage:function(){this._notificationView&&this.notificationView().hideNotification()},settingsHidden:function(){this.settingsVisible=!1,this.displayPendingMessages()},onSettingsVisible:function(){this.settingsVisible=!0},notificationView:function(){return this._notificationView||(this._notificationView=new m.views.Notification),this._notificationView}}),m.views.Notification=Backbone.View.extend({attributes:{class:"notification"},notifying:!1,timeoutId:null,analytics:new O({feature:"notifications"}),areaMap:{settings:{selector:".app-container.settings .toggle-icon",targetDistance:15,position:"top"},teamLogo:{position:"bottom",targetDistance:10,selector:"#team-logo"},addWidget:{selector:'[data-ob="add-metric"]',targetDistance:5,position:"bottom",alignment:"right",customCss:'[data-ob="add-metric"] { opacity: 1 !important; }'},soundscapes:{selector:'[data-ob="soundscapes"] [data-ob="app-dash"]',targetDistance:-10,position:"bottom"},notes:{selector:".app-container.notes",position:"top",alignment:"right"},askAi:{selector:".app-container.chat",position:"top",alignment:"right"},searchCenter:{selector:".app-container.big.search .search-icon-container .icon-search",targetDistance:25,position:"top"},tabStash:{selector:".app-container.tabs",position:"bottom"},links:{selector:".app-container.links",position:"bottom"}},initialize:function(){this.renderedOnce=!1,this.listenTo(m,"notification:hide",this.hideNotification),this.listenTo(m,"notification:dismiss",this.dismissNotification)},showMessage:function(e){if(!this.model||this.model.cid!=e.cid){this.model=e;var t=this;["cta_cmd","secondary_cmd"].forEach((function(e){var n=t.model.get(e);n&&m.commandManager.beforeExecute(n)})),this.render()}},render:function(){var e=this;this.notifying=!0,this.incrementViews();var t=this.model.get("targetArea"),n=this.model.get("notification_type");t||(t=n&&"momentum"!==n?"teamLogo":"settings");var i=this.areaMap[t],o={id:this.model.get("id"),headerText:this.model.get("title"),bodyText:this.model.get("message"),position:i.position,region:i.region,targetDistance:i.targetDistance,targetElementSelector:i.selector,ctaText:this.model.get("cta_text"),ctaCallback:this.model.get("cta_cmd")?this.ctaButtonClicked.bind(this):void 0,secondaryText:this.model.get("secondary_text"),secondaryCallback:this.model.get("secondary_text")?this.secondaryTextClicked.bind(this):void 0,secondaryClasses:"button-tertiary",hideCallback:this.hideNotificationClicked.bind(this),customCss:i.customCss,pulseAnimation:this.model.get("important"),imageUrl:this.model.get("image_url"),notificationStyling:{image_has_white_background:this.model.get("image_has_white_background")},onLeave:function(){m.models.notificationManager.displayPendingMessages()}};m.cmd("modal.open",o),this.showNotification();var s=this.model.get("display_time");!s||s<=0||(this.timeoutId=setTimeout((function(){e.hideNotification()}),s))},incrementViews:function(){var e=this.model.get("views")+1;this.setModelCollection(),null!==this.model.get("viewLimit")&&(e>=this.model.get("viewLimit")?this.model.save({visible:!1,views:e}):this.model.save({views:e},{silent:!0}))},dismissNotification:function(){this.model&&(this.saveDismissal(),this.hideNotification())},showNotification:function(){this.analytics.capture("notification show",this.getIdsForAnalytics(this.model))},hideNotification:function(){clearTimeout(this.timeoutId),this.notifying&&(m.trigger("modal:close"),this.notifying=!1)},hideNotificationClicked:function(e){e&&e.stopPropagation(),this.hideNotification(),this.setModelCollection(),this.saveDismissal(),this.analytics.capture("notification dismiss",this.getIdsForAnalytics(this.model))},ctaButtonClicked:function(e){e&&e.stopPropagation();var t=this.model.get("cta_cmd"),n=this.model.get("cta_options");t&&t.length>0&&(this.setModelCollection(),this.hideNotification(),this.saveDismissal(!0),m.commandManager.execute(t,null,n),this.analytics.capture("primary cta click",this.getIdsForAnalytics(this.model)))},saveDismissal:function(e){var t=this.model.get("recurringInterval")?{lastDismissed:(new Date).getTime()}:{state:"dismissed",visible:!1};e&&(t.ctaClicked=m.now()),this.model.save(t,{silent:!0})},secondaryTextClicked:function(e){e&&e.stopPropagation();var t=this.model.get("secondary_cmd"),n=this.model.get("secondary_options");t&&t.length>0&&(this.setModelCollection(),this.model.save({secondaryClicked:m.now()},{silent:!0}),m.commandManager.execute(t,null,n),this.analytics.capture("secondary cta click",this.getIdsForAnalytics(this.model))),this.model.get("secondary_hide")&&this.hideNotification()},setModelCollection:function(){this.model.collection||(this.model.collection=m.models.notificationManager.collection)},getIdsForAnalytics:function(e){var t=e.get("group_notification_id"),n=e.get("title")?Array.from(e.get("title")).slice(0,19).join(""):"";return{title:e.isTeamNotification()?"[Redacted]":n,notification_id:t,group_id:e.get("campaign_group_id"),labels:(e.get("labels")||[]).join(", "),group_name:e.get("campaign_group_name")}}}),m.commands.NotificationShow=m.models.Command.extend({defaults:{id:"notification.show"},execute:function(e,t){m.models.notificationManager&&m.models.notificationManager.showMessage(e,t)}}),m.commands.NotificationShowEnhanced=m.models.Command.extend({defaults:{id:"notification.show.enhanced"},execute:function(e,t,n){m.models.notificationManager&&m.models.notificationManager.showMessageEnhanced(e,t,n)}}),m.commands.NotificationDismiss=m.models.Command.extend({defaults:{id:"notification.dismiss"},execute:function(){m.models.notificationManager&&m.models.notificationManager.dismissMessage()}}),m.commands.DismissSafariNotificationPermanently=m.models.Command.extend({defaults:{id:"notification.safariUpdate.dismissPermanently"},execute:function(){localStorage.setItem("notification:safariUpdate:dismissedPermanently",!0),m.models.notificationManager.dismissMessage();var e=m.models.notificationManager.collection.where({name:"safariUpdate"});e&&e.forEach((function(e){e.save({state:"dismissed",visible:!1},{silent:!0})}))}}),m.commands.ShouldShowSafariVersionNotification=m.models.Command.extend({defaults:{id:"notification.safariUpdate.shouldShow"},execute:function(){var e=m.devTools&&m.devTools.forceSafariVersionNotificationCheck;if("Safari"!==m.globals.platform&&!e)return!1;if(localStorage.getItem("notification:safariUpdate:dismissedPermanently"))return!1;if(e)return!0;var t=/Version\/([0-9.]+)/.exec(navigator.userAgent);if(!t)return!1;if((t=parseFloat(t[1]))&&!(t>=14.1)){var n=m.models.notificationManager.collection.where({name:"safariUpdate",deleted:!1});return!n||!n.length}}}),m.commands.ShowSafariVersionNotification=m.models.Command.extend({defaults:{id:"notification.safariUpdate.show"},execute:function(){m.commandManager.execute("notification.show.enhanced",{name:"safariUpdate",id:"safariUpdate",title:"Not seeing Momentum as your start page?",message:"Update to the latest version of Safari to get the full experience.",priority:2,visible:!0,viewLimit:null,cta_text:"How to update",cta_cmd:"window.open",cta_options:{url:"https://support.apple.com/en-us/HT204416"},secondary_text:"Don't show this again",secondary_cmd:"notification.safariUpdate.dismissPermanently",recurringInterval:m.constants.msPerHour})}}),m.commands.EnableSearchInCenter=m.models.Command.extend({defaults:{id:"notification.searchInCenter.enable"},execute:function(){function e(){m.trigger("modal:show",Object.assign({},m.modals.definitions.searchInCenterNotification,{bodyText:"If you prefer to see your daily goal here, switch back using this button."}))}m.models.customization.get("centerBelowNavVisible")&&m.models.customization.get("searchVisible")?e():m.once("centerBelow:afterEnter",e),m.models.customization.save({searchVisible:!0,centerBelowNavVisible:!0,focusVisible:!1})}});var Oa={flashInputLengthError:function(e){m.utils.toggleClassTwice(e,m.utils.mConst("classInputLengthError"))},checkForInputMaxLengthError:function(e){e.is("input")&&e.val().length>=e.attr("maxlength")&&m.settingsUtils.flashInputLengthError(e)},updateCharCount:function(e,t,n,i){var o=$(e.delegatedTarget.form);i=i||o.find("input");var s=o.find(".char-count"),r=i.val().length,a=t.inputLengthMaxDatabase-r;s.text(a).removeClass("warn over"),s.mToggle("inline",r>=t.inputLengthShow),i.removeClass("over"),r>t.inputLengthMaxDatabase?(s.addClass("over"),i.addClass("over")):r>=t.inputLengthWarn&&s.addClass("warn"),n&&n(o,r,a)},moveCursorToEndOfInput:function(e){var t=e[0];t.selectionStart=t.selectionEnd=t.value.length},scrollToEndOfInput:function(e){var t=e[0];t.scrollWidth>t.clientWidth&&(0!==e.scrollLeft()&&e.scrollLeft(0),e.scrollLeft(t.scrollWidth-t.clientWidth))},toggleAdvanced:function(e){var t=e.$(".wrapper-advanced"),n=e.$(".smooth-height-content");e.resizeSensorSet||(this.initializeResizeSensor(e,n,e.$(".smooth-height-wrapper")),e.resizeSensorSet=!0),n.toggleClass("active"),!e.wrapperAdvancedIsInFlow&&n.hasClass("active")&&(e.wrapperAdvancedIsInFlow=!0,t.css("display","block"))},initializeResizeSensor:function(e,t,n){e.resizeSensor&&e.resizeSensor.detach(),n.css("height",t.height()),e.resizeSensor=new ResizeSensor(t,(function(){t.hasClass("active")?n.css("height",t.height()):n.css("height",0)}))},getInitialFeedSettings:function(e){var t=!0,n=!1;return"false"===localStorage.getItem(e.feedMomentumName)&&(t=!1),"true"===localStorage.getItem(e.feedCustomName)&&(n=!0),{feedMomentumClass:t?"on":"",feedCustomClass:n?"on":""}},setFeedVars:function(e){e.$feedMomentumSlider=e.$("#feed-momentum-slider"),e.$feedCustomSlider=e.$("#feed-custom-slider")},updateFeedSettings:function(e){var t=e.settings.get(e.manager.feedMomentumName),n=e.settings.get(e.manager.feedCustomName);e.$("#feed-momentum-slider").toggleClass("on",t),e.$("#feed-custom-slider").toggleClass("on",n),localStorage.setItem(e.manager.feedMomentumName,t),localStorage.setItem(e.manager.feedCustomName,n)},subnavAddAll:function(e,t,n,i,o){_.each(e.subViews,(function(e){e.destroy()})),e.subViews=[],e.collection.each((function(n){e.addOne(n,t)})),e.$empty.removeClass("loading"),e.handleCollectionUpdate(),void 0!==i&&i(e),n.removeClass("hidden"),void 0!==o&&o()},subnavAddOne:function(e,t,n,i,o){var s=t.render().$el;e.subViews.push(t),i?n.prepend(s):n.append(s),o&&s.addClass("animate-item"),setTimeout((function(){s.removeClass("animate-item")}),300)},renderSubnav:function(e,t,n){e.$(".list-body").hide(),t.render(),e.$(".subnav-titles").find("h4").removeClass("active").siblings("."+n).addClass("active"),t.$el.css("display","block"),e.subnav=n},updateEmptyState:function(e){e.$empty.mToggle("block",0===e.collection.length)},subnavHistoryLoadMore:function(e,t,n){e.stopPropagation(),n.LoadMoreHistory(),m.settingsUtils.subnavHistoryUpdateLoadMore(t)},subnavHistoryUpdateLoadMore:function(e){void 0===e&&(e=this),e.$(".load-more").mToggle("inline-block",!!e.collection.load_more)},handleCollectionUpdateCustom:function(e,t,n){e.deletingFinalItem?setTimeout((function(){e.deletingFinalItem=!1,e.cancelAdd(),m.settingsUtils.displayEmptyStateAndAddForm(e,t,n)}),m.utils.mConst("timeContentItemAnimation")):m.settingsUtils.displayEmptyStateAndAddForm(e,t,n)},displayEmptyStateAndAddForm:function(e,t,n){t.mToggle("block",n),m.settingsUtils.updateAddFormBorder(e.$addForm,n)},updateAddFormBorder:function(e,t){e.toggleClass("no-top-border",t)},cancelAddGeneral:function(e,t){t&&t.preventDefault(),e.$addForm.is(":visible")&&(e.resetAdd(!0),e.toggleAddForm())},changeToEditMode:function(e,t){m.settingsUtils.triggerItemEditing(e),e.$el.addClass("editing"),t.trigger("focus"),m.settingsUtils.moveCursorToEndOfInput(t),m.settingsUtils.scrollToEndOfInput(t)},handleKeypressEnter:function(e,t,n){13===e.keyCode?(e.preventDefault(),e.shiftKey||e.ctrlKey||e.metaKey||e.altKey||t()):void 0!==n&&m.settingsUtils.checkForInputMaxLengthError(n)},handleKeyupEsc:function(e,t){27===e.keyCode&&(e.stopPropagation(),t())},triggerItemEditing:function(e){e.main.itemEditingId=e.model.id,e.manager.trigger("item-editing")},preventMultipleEdits:function(e){void 0===e&&(e=this),e.model.id!==e.main.itemEditingId&&m.settingsUtils.returnToViewMode(e)},getOutOfEditMode:function(e){e.$el.removeClass("editing"),e.updateTooltip&&e.updateTooltip()},returnToViewMode:function(e){void 0===e&&(e=this),e.$el.hasClass("editing")&&e.processEditForm(),e.$(".delete-group").is(":visible")&&e.toggleDeleteConf()},onDestroyModel:function(){if(1===this.main.collection.length)this.main.deletingFinalItem=!0,_.bind(this.destroy,this)();else{this.$el.addClass("animate-item reverse");var e=this;setTimeout((function(){_.bind(e.destroy,e)(),e.main.syncHelper&&e.main.syncHelper()}),300)}},toggleDeleteConf:function(e){var t=e.$(".controls"),n=e.$(".controls > .control"),i=e.$(".delete-group");i.css("display",i.is(":visible")?"none":"flex"),i.is(":visible")&&m.settingsUtils.triggerItemEditing(e),t.toggleClass("delete-clicked"),n.mToggle("inline-flex")},processEditFormBasic:function(e,t){var n=t?"set":"save",i=e.$input.val().trim();return m.utils.betweenInclusive(i.length,1,e.main.inputLengthMaxDatabase)?(e.model[n]({body:i},{wait:!0,patch:!0,success:function(){m.settingsUtils.getOutOfEditMode(e),e.manager.handleItemEdit(e.model)},error:function(){console.error("edit content item error for view:",e)}}),!0):(m.settingsUtils.flashInputLengthError(e.$input),!1)},abortEditBasic:function(e){e.$input.val(e.model.get("body")),m.settingsUtils.getOutOfEditMode(e)}};for(var Pa in Oa)m.settingsUtils[Pa]=Oa[Pa];function La(e,t){(t=t||{}).source&&t.url&&(t.url+="&utm_campaign="+encodeURIComponent(t.source));var n=localStorage.getItem("offered-plan");t.url&&n&&m.conditionalFeatures.featureEnabled("notes-degraded")&&(t.url+="&resubscribe="+n)}function Ra(e){if(!e)return null;var t=null;return"string"==typeof e?t=e:"object"==typeof e&&e.path&&(t=e.path),t?(t.startsWith("/")&&(t=t.substring(1)),t):null}async function Na(){await(await i((async()=>{const{default:e}=await import("./SubscriptionSummary-eTeXKiGw.js");return{default:e}}),__vite__mapDeps([17,2,3,4,5,18,19]))).default().refresh(),await m.widgetManager.loadWidget("modal"),await(await i((async()=>{const{default:e}=await import("./onboardingStepCollection-BKBgZU5n.js").then((e=>e.h));return{default:e}}),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))).default.loadOnboarding()}m.models.PersistentSettings=Backbone.Model.extend({localStorage:new Backbone.LocalStorage("momentum-customization"),defaultForTeamIfNotSet:{themeColour:"photo"},defaultForPlusIfNotSet:{themeColour:"photo"},defaultIfNotSet:{mantraVisible:!1,greetingVisible:!0,quoteVisible:!0,bookmarksVisible:!1,linksVisible:!0,focusVisible:!0,todoVisible:!0,metricVisible:!0,weatherVisible:!0,searchVisible:!1,requestSync:!1,keepTodoState:!0,countdownVisible:!0,notesVisible:!0,notesFullscreen:!1,percentClock:!1,multiClockVisible:!0,soundscapesVisible:!0,askAiVisible:!1,linksKeepOpen:!1,themeColour:"system",autoFocus:!1,balanceModeStr:"",mantraSettingsStr:"",bookmarksSettingsStr:"",weatherDetail:!0,weatherHourly:!0,searchProvider:"bing",appRegionOverrides:{},hour12clock:"M"===(new Date).toLocaleString(window.navigator.userLanguage||window.navigator.language||"en-US").substr(-1),pomodoroSettingsStr:JSON.stringify({autoplay:!0,hideSeconds:!1,focusDuration:25,restDuration:5,sounds:!0,browserNotifications:!1,mode:"timer"}),clockVisible:!0,centerBelowNavVisible:!1,launchpadVisible:!1,linksMode:"list",tabsVisible:!0,tabsDefaultStashSetting:"all",focusModeVisible:!0,focusModeSettingsStr:JSON.stringify({apps:{siteBlocker:{enabled:!0},tabStash:{enabled:!0},soundscapes:{enabled:!0,preset:"Random"}},blurBackground:!1,linksVisible:!0,searchVisible:!1,focusInsightVisible:!0,metricsVisible:!1,countdownsVisible:!1,worldClocksVisible:!1,mantrasVisible:!0,askAiVisible:!1,notesVisible:!1,todoVisible:!0,goalMinutes:60,goalDays:[1,2,3,4,5],goalEnabled:!0,pomodoroTimerMode:"timer"}),siteBlockerVisible:!1,focusInsightVisible:!0},initialize:function(){var e=this;e.fetching=!1,window.addEventListener("storage",(function(t){t.key&&0===t.key.indexOf("momentum-customization-1")&&(e.fetching=!0,e.fetch({success:function(){e.fetching=!1},error:function(){e.fetching=!1},reset:!0,fromStorage:!0}))})),this.on("change:hour12clock",(function(){m.models.date.set("date",m.date())}))},get:function(e){var t=this.constructor.__super__.get.apply(this,arguments);if(null==t){var n=m.conditionalFeatures.featureEnabled("team"),i=m.conditionalFeatures.featureEnabled("plus"),o=Object.prototype.hasOwnProperty.call(this.defaultIfNotSet,e),s=n&&Object.prototype.hasOwnProperty.call(this.defaultForTeamIfNotSet,e),r=i&&Object.prototype.hasOwnProperty.call(this.defaultForPlusIfNotSet,e);if(!o&&!s&&!r)return t;s?t=this.defaultForTeamIfNotSet[e]instanceof Function?this.defaultForTeamIfNotSet[e]():this.defaultForTeamIfNotSet[e]:r&&(t=this.defaultForPlusIfNotSet[e]instanceof Function?this.defaultForPlusIfNotSet[e]():this.defaultForPlusIfNotSet[e]),null==t&&o&&(t=this.defaultIfNotSet[e]instanceof Function?this.defaultIfNotSet[e]():this.defaultIfNotSet[e])}return t},save:function(){for(var e=!1,t=0;t<arguments.length;t++){var n=arguments[t];n&&n.fromStorage&&(e=!0)}e||Backbone.Model.prototype.save.apply(this,arguments)}}),m.models.MantraManager=m.models.FeedManager.extend({activatingFirstMantra:!1,dateInitialized:null,defaults:{momo:!0,custom:!1},durationGreetingFirstTabOfDay:4e3,frequencyData:{durationGreeting:6e4,durationMantra:3e4,tabFrequency:2},frequencyLevels:[{level:0,label:"Rarely",durationGreeting:18e4,durationMantra:2e4,tabFrequency:8},{level:2,label:"Often",durationGreeting:45e3,durationMantra:3e4,tabFrequency:2},{level:3,label:"Always",durationGreeting:null,durationMantra:null,tabFrequency:null}],frequencyVariation:.25,keyHasSeenGreetingPrefix:"momentum-mantra-has-seen-greeting-",keyTabCountLegacy:"momentum-mantra-tab-count",keyTabCountPrefix:"momentum-mantra-tab-count-",showNameFrequency:.3,stringsThatPrecludeNames:[" I "," ME "," MINE "," MY ",". ",", ","; "],initialize:function(){m.models.FeedManager.prototype.initialize.call(this,m.models.Mantra,"mantra"),this.firstFetch(),this.settings=m.models.mantraSettings=new m.models.MantraSettings({id:1}),this.initializeMantraDailyData(),this.randomizeFrequency(),this.listenTo(this.itemCollection,"reset",this.onItemCollectionReset),this.listenTo(this,"mantra:deleted",this.handleMantraDelete),this.listenTo(m,"readyForWidgets",this.onSuccessfulLogin),this.listenTo(m,"newDay",this.onNewDayMantras),this.listenTo(m.models.mantraSettings,"change:frequency",this.onChangeFrequency),this.listenTo(m.models.customization,"change:mantraVisible",this.onChangeMantraVisible)},onItemCollectionReset:function(){this.trigger("mantra-active-change")},isEnabled:function(){return m.models.customization.getComputedSetting("mantraVisible")},toggleEnabled:function(){m.models.customization.toggle("mantraVisible")},hasSeenGreetingToday:function(){return JSON.parse(localStorage.getItem(this.keyHasSeenGreetingToday))},markGreetingAsSeenToday:function(){localStorage.setItem(this.keyHasSeenGreetingToday,"true")},isInAlternatingMode:function(){return!this.isFrequencyAlways()&&!this.isMantraPinned()},isFrequencyAlways:function(){return this.settings.getFrequency()===this.settings.frequencies.always},isMantraPinned:function(){return!!this.getPinnedMantra()},activeFeedsEmpty:function(){return this.itemCollection.empty()},updateInFeed:function(e){var t=this.itemCollection.findWhere({_id:e.get("_id")||e.get("id")});t&&(t.save({is_favorite:e.get("is_favorite"),body:e.get("body")}),t.get("_id")===this.getActiveItem().get("_id")&&(this.getActiveItem().isPinned()&&this.savePinnedVars(t),this.trigger("mantra-active-edit")))},setActive:function(e){this.unpinMantra();var t=m.globals.urlRootApi+"settings/mantra/active",n=e.get("_id")||e.get("id"),i=this;return new Promise((function(o,s){$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify({mantra_id:n}),url:t}).done((function(t){t&&t.success?(i.getActiveItem().set({body:e.get("body"),_id:n,is_custom:e.get("is_custom"),is_favorite:e.get("is_favorite")}),m.trigger("sync:download","mantra"),o(e)):s(e)})).fail((function(){s(e)}))}))},onChangeMantraVisible:function(){if(this.activeFeedsEmpty())return this.trigger("wait-for-mantra"),void this.getActiveItem();if(this.isEnabled())this.randomizeFrequency();else{if(!0===this.mantraDisablingInProgress)return;this.mantraDisablingInProgress=!0,this.unpinMantra(),this.mantraDisablingInProgress=!1,this.trigger("mantra-active-change")}},getDuration:function(e){return"greeting"===e?this.frequencyData.durationGreeting:"mantra"===e?this.frequencyData.durationMantra:void 0},getDurationTotal:function(){return this.frequencyData.durationGreeting+this.frequencyData.durationMantra},checkIfMantraShouldBeShown:function(){return!!localStorage.getItem("mantra:force")||!localStorage.getItem("greeting:force")&&(!(!this.mantrasEnabledAndAvailable()||!this.hasSeenGreetingToday())&&(this.activatingFirstMantra?(this.activatingFirstMantra=!1,!0):!this.isInAlternatingMode()||this.checkMantraTabFrequency()))},shouldShowMantraAfterGreetingFirstTabOfDay:function(){return this.mantrasEnabledAndAvailable()&&!this.hasSeenGreetingToday()&&!this.isInAlternatingMode()},mantrasEnabledAndAvailable:function(){return this.getActiveItem()&&this.isEnabled()},checkMantraTabFrequency:function(){var e=localStorage.getItem(this.keyTabCountToday)>=this.frequencyData.tabFrequency;return e&&this.resetTabCount(),e},onChangeFrequency:function(){this.resetAndRandomize(),this.isMantraPinned()&&this.unpinMantra(!0)},randomizeFrequency:function(){var e=this.lookupFrequencyBaseline();if(this.isFrequencyAlways())this.frequencyData.tabFrequency=e.tabFrequency,this.frequencyData.durationGreeting=e.durationGreeting,this.frequencyData.durationMantra=e.durationMantra;else{var t=1-this.frequencyVariation,n=1+this.frequencyVariation;this.frequencyData.tabFrequency=this.randomizeTabFrequency(e.tabFrequency),this.frequencyData.durationGreeting=m.utils.getRandomIntBetween(t*e.durationGreeting,n*e.durationGreeting),this.frequencyData.durationMantra=m.utils.getRandomIntBetween(t*e.durationMantra,n*e.durationMantra)}},lookupFrequencyBaseline:function(){return _.where(this.frequencyLevels,{level:this.settings.getFrequency()})[0]},randomizeTabFrequency:function(e){var t=e*(1-this.frequencyVariation),n=e*(1+this.frequencyVariation);return n-t<2&&(t=2===e?2:e-1,n=e+1),m.utils.getRandomIntBetween(t,n)},initializeMantraDailyData:function(){m.models.cleanupManager.registerKey(this.keyTabCountLegacy),m.models.cleanupManager.registerKeyPrefix(this.keyTabCountPrefix,{pastDaysToKeep:0}),m.models.cleanupManager.registerKeyPrefix(this.keyHasSeenGreetingPrefix,{pastDaysToKeep:0});var e=m.utils.getDateString();this.dateInitialized=e,this.keyTabCountToday=this.keyTabCountPrefix+e,this.keyHasSeenGreetingToday=this.keyHasSeenGreetingPrefix+e;var t,n=parseInt(localStorage.getItem(this.keyTabCountToday));isNaN(n)?(t=1,localStorage.setItem(this.keyHasSeenGreetingToday,"false")):t=n+1,localStorage.setItem(this.keyTabCountToday,t)},resetTabCount:function(){localStorage.setItem(this.keyTabCountToday,"0")},resetAndRandomize:function(){this.resetTabCount(),this.randomizeFrequency()},onNewDayMantras:function(){this.tabWasLeftOvernight()&&(this.initializeMantraDailyData(),this.trigger("show-greeting"))},tabWasLeftOvernight:function(){return this.dateInitialized!==m.utils.getDateString()},getActiveItem:function(){var e,t=this,n=this.getPinnedMantra();if(n)return(e=this.itemCollection.findWhere({forDate:"pinned"}))&&e.get("_id")===n.id?e:this.itemCollection.create({forDate:"pinned",_id:n.id,body:n.body,is_custom:n.isCustom,is_favorite:n.isFavorite});if(m.collect.mantras&&this.isEnabled()){if(!(e=m.collect.mantras.getActiveItem()))return m.trigger("sync:download","mantra"),null;if(e.get("hardSkip"))return this.noMantra=!0,null;var i=!1;return this.currentMantra&&this.currentMantra.get("_id")===e.get("_id")?this.currentMantra.get("body")!==e.get("body")&&(this.currentMantra=e,i=!0):(this.currentMantra=e,i=!0),i&&setTimeout((function(){m.trigger("mantra:active_changed",t.currentMantra.get("_id"))}),50),e}return null},activateFirstMantra:function(){m.models.customization.save("mantraVisible",!0),this.settings.save({firstMantraActivated:!0}),this.getActiveItem(),this.activatingFirstMantra=!0,this.trigger("wait-for-mantra")},getPinnedMantra:function(){return this.settings?this.settings.get("pinnedMantra"):null},pinMantra:function(e,t){var n=this.getPinnedMantra(),i=e.get("_id")||e.get("id");return n&&i===n.id?(this.unpinMantra(!0),this.resetAndRandomize(),!1):(this.savePinnedVars(e,t),this.trigger("mantra-pin"),!0)},unpinMantra:function(e){this.isMantraPinned()&&this.settings.save({pinnedMantra:null});var t=m.collect.mantras.get("pinned");t&&t.destroy(),e&&this.trigger("mantra-un-pin")},savePinnedVars:function(e,t){var n=this.settings.get("pinnedMantra");n&&(t=t||n.showName),this.settings.save({pinnedMantra:{id:e.get("_id")||e.get("id"),body:e.get("body"),isFavorite:e.get("is_favorite"),isCustom:e.get("is_custom"),showName:t}})},toggleFav:function(e){var t=e.get("id")||e.get("_id");return this.feedContains(t)?this.toggleFavFeedItem(t):this.toggleFavorite(e.get("is_favorite"),e)},toggleFavFeedItem:function(e){var t=this,n=this.itemCollection.where({_id:e}),i=n[0].get("is_favorite"),o=!i,s=this.getPinnedMantra(),r=this.getActiveItem();return n.map((function(e){e.save({is_favorite:o})})),s&&e===s.id&&this.setPinnedProperty("isFavorite",o),r&&e===r.get("_id")&&this.trigger("mantra-active-fav"),new Promise((function(a,l){t.toggleFavorite(o,n[0]).then((function(){a()})).catch((function(){n.map((function(e){e.save({is_favorite:i})})),s&&e===s.id&&t.setPinnedProperty("isFavorite",i),r&&e===r.get("_id")&&t.trigger("mantra-active-fav"),l()}))}))},setPinnedProperty:function(e,t){var n=Object.assign({},this.settings.get("pinnedMantra"));n[e]=t,this.settings.save({pinnedMantra:n})},feedContains:function(e){return!!this.itemCollection.findWhere({_id:e})},handleMantraDelete:function(e){var t=this.getActiveItem();t&&t.get("_id")===e&&(t.isPinned()&&this.unpinMantra(),this.trigger("showGreeting"),m.trigger("sync:download","mantra"))},getMantraForDisplay:function(e,t){return e?(void 0!==this.showName&&t||(this.isMantraPinned()?this.showName=this.getPinnedMantra().showName:this.showName=m.utils.getRandomBoolByFrequency(this.showNameFrequency)),localStorage.getItem("mantra:forceName")&&(this.showName="true"===localStorage.getItem("mantra:forceName")),this.formatMantraForDisplay(e.get("body"),this.showName)):null},formatMantraForDisplay:function(e,t){e=e.trim();var n=m.utils.getEndPunctuationString(e),i=e.slice(0,e.length-n.length),o="";return t&&this.mantraWorksWithName(i)&&m.models.customization.get("displayname")&&(i+=", ",o=m.models.customization.get("displayname"),m.utils.endsWithEndPunctuation(o)&&(n="")),{bodyFormatted:i+o+n,start:i,name:o,end:n}},mantraWorksWithName:function(e){var t,n=!0,i=m.models.customization.get("displayname").toUpperCase();if(!i)return!1;e=e.toUpperCase();for(var o=0;o<this.stringsThatPrecludeNames.length;o++)if(t=this.stringsThatPrecludeNames[o],-1!==e.indexOf(i)||-1!==e.indexOf(t)||e.startsWith(t.trim()+" ")||e.endsWith(" "+t.trim())){n=!1;break}return n},skipItem:function(e){return e&&!m.conditionalFeatures.featureEnabled("plus")&&(this.noMantra=!0),this.isMantraPinned()&&this.unpinMantra(),m.models.FeedManager.prototype.skipItem.apply(this,arguments)}}),m.models.MantraSettings=Backbone.Model.extend({defaults:{pinnedMantra:null,firstMantraActivated:!1,frequency:2},frequencies:{low:0,medium:2,high:2,always:3},initialize:function(){this.listenTo(m.models.customization,"change:mantraSettingsStr",this.customizationChanged),m.models.customization.initialized?this.customizationChanged():this.listenTo(m.models.customization,"initialized",this.customizationChanged)},customizationChanged:function(e,t){if(!t||!t.savingMantraSettings){var n=m.models.customization.get("mantraSettingsStr");n&&n!==this.mantraSettingsStr&&n.length>0&&this.reset()}},getFrequency:function(){var e,t=this.get("frequency");return e="string"==typeof t&&isNaN(1*t)?this.frequencies[t]:"string"!=typeof t||isNaN(1*t)?t:parseInt(t),void 0===_.find(this.frequencies,(function(t){return t===e}))&&(e=this.defaults.frequency),e},reset:function(){this.mantraSettingsStr=m.models.customization.get("mantraSettingsStr");if(this.mantraSettingsStr&&this.mantraSettingsStr.length>0){var e=JSON.parse(this.mantraSettingsStr),t=this;["pinnedMantra","firstMantraActivated","frequency"].forEach((function(n){t.set(n,void 0===e[n]?t.defaults[n]:e[n])}))}},save:function(){Backbone.Model.prototype.set.apply(this,arguments),m.models.customization.initialized&&m.models.customization.save({mantraSettingsStr:JSON.stringify(this.attributes)},{savingMantraSettings:!0})},getFrequencyName:function(){var e=this.getFrequency(),t=this.frequencies;return Object.keys(t).find((function(n){return t[n]===e}))}}),m.models.Settings=Backbone.Model.extend({defaults:{},initialize:function(){}}),m.models.GenericSettings=Backbone.Model.extend({initialize:function(e){this.feedType=e,this.urlPath="settings/"+e,this.url=m.globals.urlRoot+this.urlPath;var t=localStorage.getItem("cached-"+this.urlPath);t&&this.set(JSON.parse(t)),this.listenTo(this,"sync",this.saveLocal)},saveLocal:function(){localStorage.setItem("cached-"+this.urlPath,JSON.stringify(this.attributes))},save:function(e,t){(t=t||{}).patch=!0;var n=this,i=t.success;t.success=function(e,t,o){n.saveLocal(),i&&i(e,t,o)},m.isLoggedIn()?Backbone.Model.prototype.save.call(this,e,t):Backbone.Model.prototype.set.call(this,e,t),n.saveLocal()},toggle:function(e){var t={};this.has(e)?t[e]=!this.get(e):t[e]=!0;var n={},i=this;e.indexOf("feed")>=0&&(n.success=function(){m.trigger("sync:download",i.feedType)}),this.save(t,n)}}),m.models.BalanceMode=Backbone.Model.extend({defaults:{enabled:!1,active:!1,balanceClock:!1,balanceTodo:!1,balancePercentClock:!1,balanceFocus:!0,balanceNotes:!1,balanceGreeting:!1,customTime:!1,customDays:!1,start:{hour:9,minute:"00",noon:"AM"},end:{hour:5,minute:"00",noon:"PM"},startCustom:{hour:9,minute:"00",noon:"AM"},endCustom:{hour:5,minute:"00",noon:"PM"},days:[!1,!0,!0,!0,!0,!0,!1],daysCustom:[!1,!0,!0,!0,!0,!0,!1],percent:""},initialize:function(e,t){this.customization=t.customization||m.models.customization,this.updatePercent(),this.listenTo(this.customization,"change:balanceModeStr",this.customizationChanged),this.listenTo(this,"change:enabled",this.balanceChanged),this.listenTo(m.models.date,"change:date",this.checkBalance)},checkBalance:function(){var e=m.date(),t=this.getStart(),n=this.getEnd(),i=this.getDays(),o=t.hour+":"+t.minute+t.noon,s=n.hour+":"+n.minute+n.noon,r=this.get("active"),a=m.utils.toTodaysTime(s),l=m.utils.toTodaysTime(o),c=new Date(l.getTime());c.setDate(l.getDate()-1);var u=new Date(a.getTime());u.setDate(a.getDate()+1),this.set("active",this.get("enabled")&&(!i[e.getDay()]||a.getTime()>l.getTime()&&(l.getTime()>e.getTime()||e.getTime()>a.getTime())||a.getTime()<l.getTime()&&!(c.getTime()<e.getTime()&&e.getTime()<a.getTime()||l.getTime()<e.getTime()&&e.getTime()<u.getTime()))),r!==this.get("active")&&this.balanceChanged(),this.updatePercent()},customizationChanged:function(){var e=this.customization.get("balanceModeStr");e&&e!==this.balanceModeStr&&e.length>0&&this.resetBalanceMode()},resetBalanceMode:function(){if(this.balanceModeStr=this.customization.get("balanceModeStr"),this.balanceModeStr&&this.balanceModeStr.length>0){var e=JSON.parse(this.balanceModeStr);this.set("enabled",void 0===e.enabled?this.defaults.enabled:e.enabled),this.set("start",e.start||this.defaults.start),this.set("end",e.end||this.defaults.end),this.set("days",e.days||this.defaults.days),this.set("customDays",void 0===e.customDays?this.defaults.customDays:e.customDays),this.set("customTime",void 0===e.customTime?this.defaults.customTime:e.customTime),this.set("startCustom",e.startCustom||this.defaults.startCustom),this.set("endCustom",e.endCustom||this.defaults.endCustom),this.set("daysCustom",e.daysCustom||this.defaults.daysCustom),this.set("balanceClock",void 0===e.balanceClock?this.defaults.balanceClock:e.balanceClock),this.set("balanceFocus",void 0===e.balanceFocus?this.defaults.balanceFocus:e.balanceFocus),this.set("balanceTodo",void 0===e.balanceTodo?this.defaults.balanceTodo:e.balanceTodo),this.set("balanceGreeting",void 0===e.balanceGreeting?this.defaults.balanceGreeting:e.balanceGreeting),this.set("balancePercentClock",void 0===e.balancePercentClock?this.defaults.balancePercentClock:e.balancePercentClock),this.set("balanceNotes",void 0===e.balanceNotes?this.defaults.balanceNotes:e.balanceNotes),this.initCompleted=!0,this.checkBalance()}},getDays:function(){return this.get("customDays")?this.get("daysCustom"):this.get("days")},getStart:function(){return this.get("customTime")?this.get("startCustom"):this.get("start")},getEnd:function(){return this.get("customTime")?this.get("endCustom"):this.get("end")},get:function(e){return!!("customDays"!==e&&"customTime"!==e||m.conditionalFeatures.featureEnabled("plus"))&&Backbone.Model.prototype.get.call(this,e)},balanceChanged:function(){this.initCompleted&&this.customization.save({balanceModeStr:JSON.stringify(this.attributes)})},updatePercent:function(){var e=this.getStart(),t=this.getEnd(),n=parseInt(e.hour);12===n&&(n=0);var i=parseInt(t.hour);12===i&&(i=0);var o=n+("PM"===e.noon?12:0),s=parseInt(e.minute),r=i+("PM"===t.noon?12:0),a=parseInt(t.minute)-1;r-o>24&&(r-=24);var l=m.date(),c=m.date();c.setHours(o,s,0,0);var u=m.date();u.setHours(r,a,0,0),c.getTime()>u.getTime()&&(l.getTime()<=u.getTime()?o-=24:r+=24),c.setHours(o,s,0,0),u.setHours(r,a,0,0);var d=60*(r+a/60-(o+s/60))*60,h=(l.getTime()-c.getTime())/1e3,g=Math.floor(h/d*100);g>100&&(g="+"+(g-100)),this.set("percent",g)}}),m.models.BookmarksSettings=Backbone.Model.extend({defaults:{guided:!1,iconsOnly:!1,openInNewTab:!1,includeBookmarks:!1,includeOtherBookmarks:!1,defaultMostVisited:!1,includeMostVisited:!0,chromeTabLocation:"links"},initialize:function(){this.listenTo(m.models.customization,"change:bookmarksSettingsStr",this.customizationChanged),this.permissions={permissions:["bookmarks","topSites"]},m.utils.isChrome()&&this.permissions.permissions.push("favicon")},customizationChanged:function(){var e=m.models.customization.get("bookmarksSettingsStr");e&&e!=this.bookmarksSettingsStr&&e.length>0&&this.reset()},reset:function(){this.bookmarksSettingsStr=m.models.customization.get("bookmarksSettingsStr");if(this.bookmarksSettingsStr&&this.bookmarksSettingsStr.length>0){var e=JSON.parse(this.bookmarksSettingsStr),t=this;["iconsOnly","openInNewTab","includeBookmarks","includeOtherBookmarks","defaultMostVisited","includeMostVisited","chromeTabLocation","guided"].forEach((function(n){t.set(n,null==e[n]?t.defaults[n]:e[n])})),localStorage.setItem("bookmarksEnabled",m.models.customization.get("bookmarksVisible"))}},optionsChanged:function(e,t){var n=m.models.customization;n.save({bookmarksSettingsStr:JSON.stringify(this.attributes)}),e&&n.save(e,t)}}),m.models.ComputedSettings=Backbone.Model.extend({defaults:{percentClock:!1,todoVisible:!1,focusVisible:!1,greetingVisible:!1,autoFocus:!1,clockVisible:!0,notesVisible:!1},settingOverriders:{TEAM:0,BALANCE:1},overrides:{},initializeSettings:function(){var e=this;this.persistentSettings=new m.models.PersistentSettings({id:1}),this.listenTo(this.persistentSettings,"change",this.computeProperties),this.listenTo(this.persistentSettings,"sync",(function(){var t=e.persistentSettings.get("balanceModeStr");t&&t.length>0&&(m.models.balanceMode.resetBalanceMode(),e.computeProperties()),e.initialized||(e.initialized=!0,e.updateSearchSettings(),e.trigger("initialized"))})),m.conditionalFeatures=new m.models.ConditionalFeatures({},{customization:this}),m.models.balanceMode=this.balanceMode=new m.models.BalanceMode({id:1},{customization:this}),m.models.bookmarksSettings=new m.models.BookmarksSettings({id:1}),this.persistentSettings.fetch({error:function(e,t){"Record Not Found"==t&&e.save()}})},updateSearchSettings:function(){if(!m.isLoggedIn()){var e=localStorage.getItem("client_uuid");if(e&&0!==e.length&&("0"===(e=e.toLowerCase())[0]||"1"===e[0])){if(this.persistentSettings.get("searchUpdated"))return;var t={searchUpdated:!0,searchVisible:null},n=this.persistentSettings.get("searchProvider");"google"!==n&&"bing"!==n&&(t.searchProvider=null),this.persistentSettings.save(t)}}},checkBalanceMode:function(e,t,n){var i=this.attributes[e],o=!!n||(!this.persistentSettings.has(e)||this.persistentSettings.get(e));this.attributes[e]=o&&!(m.models.balanceMode.get("active")&&m.models.balanceMode.get(t)),this.persistentSettings.get(e)!==this.attributes[e]&&(this.overrides[e]=this.settingOverriders.BALANCE),i!==this.attributes[e]&&this.trigger("change:"+e)},checkTeamOverride:function(e,t){var n=m.models.teamInfo.get("team");if(n){var i=this.attributes[e],o=this.persistentSettings.get(e);this.attributes[e]=o||!n[t],o!==this.attributes[e]&&(this.overrides[e]=this.settingOverriders.TEAM),i!==this.attributes[e]&&this.trigger("change:"+e)}},checkAutoFocus:function(){var e="autoFocus",t=this.attributes[e];return this.attributes[e]=this.persistentSettings.get(e)&&this.persistentSettings.get("todoVisible")&&m.conditionalFeatures.featureEnabled("plus"),t!==this.attributes[e]},checkTemporaryOverride:function(){var e=this;Object.entries(m.reactive.visibilityOverride).forEach((function(t){e.attributes[t[0]]=t[1],e.trigger("visibilityOverride:"+t[0])}));var t=[];Object.keys(this.attributes).forEach((function(n){"id"!==n&&(Object.keys(m.reactive.visibilityOverride).includes(n)||Object.keys(e.defaults).includes(n)||delete e.attributes[n],t.push(n))})),m.trigger("customization:update",t)},computeProperties:function(e,t,n){var i=this;this.checkBalanceMode("todoVisible","balanceTodo"),this.checkBalanceMode("greetingVisible","balanceGreeting"),this.checkBalanceMode("percentClock","balancePercentClock"),this.checkBalanceMode("clockVisible","balanceClock"),this.checkBalanceMode("focusVisible","balanceFocus"),this.checkBalanceMode("notesVisible","balanceNotes"),this.checkTeamOverride("focusVisible","focusEmpty"),this.checkTeamOverride("multiClockVisible","clocksEmpty"),this.checkTeamOverride("metricVisible","metricsEmpty"),this.checkTeamOverride("countdownVisible","countdownsEmpty"),this.checkTemporaryOverride();var o=this.persistentSettings.changedAttributes();o||(o={}),this.checkAutoFocus()&&!o.autoFocus&&(o.autoFocus=this.attributes.autoFocus),_.keys(o).forEach((function(o){i.trigger("change:"+o,e,t,n)})),this.trigger("change",e,t,n)},get:function(e){return this.persistentSettings.get(e)},getPersistentSettings:function(){return this.persistentSettings},getComputedSetting:function(e){var t=Backbone.Model.prototype.get.call(this,e);return void 0!==t?t:this.persistentSettings.get(e)},set:function(){arguments[0].id?Backbone.Model.prototype.set.apply(this,arguments):this.persistentSettings.set.apply(this.persistentSettings,arguments)},save:function(){this.persistentSettings.save.apply(this.persistentSettings,arguments)},clear:function(){this.persistentSettings.clear.apply(this.persistentSettings,arguments)},fetch:function(){this.persistentSettings.fetch.apply(this.persistentSettings,arguments)},toggle:function(e){if(e){var t=!this.get(e),n={};n[e]=t,this.save(n)}}}),m.collect.Mantras=Backbone.Collection.extend({loadedOnce:!1,initialize:function(){this.model=m.models.Mantra,this.collectionName="momentum-mantra",this.localStorage=new Backbone.LocalStorage(this.collectionName),this.listenToOnce(this,"reset",this.onReset)},getActiveItem:function(){if(this.length>0){var e=m.utils.getDateString();return this.get(e)}},onReset:function(){this.loadedOnce=!0},empty:function(){return 0===this.models.length}}),m.collect.Settings=Backbone.Collection.extend({saveOptions:{patch:!0},initialize:function(){this.model=m.models.Settings}}),m.views.settings=m.views.settings||{},m.views.settings.SettingsPane=Backbone.View.extend({attributes:{id:"settings",class:"app-container settings","data-test":"settings"},renderedOnce:!1,events:{"click .toggle":"toggleShow"},libraryLoadStarted:!1,initialize:function(){this.subViews=[],this.render(),this.listenTo(m,"globalEvent:esc globalEvent:toggle",this.hideSettings),this.listenTo(m,"globalEvent:toggleSettings",this.toggleShow),this.listenTo(m,"settings:visible",this.settingsVisible),this.listenTo(m,"settings:hidden",this.settingsHidden),this.visible=!1,this.$el.clickOutside(this,this.hideSettings)},render:function(){if(!this.renderedOnce){var e='<span class="app-dash toggle" data-test="settings-toggle" data-ob="settings-toggle">'+(m.utils.isSafari()?'<svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white"><path d="M490.667 405.333h-56.811C424.619 374.592 396.373 352 362.667 352s-61.931 22.592-71.189 53.333H21.333C9.557 405.333 0 414.891 0 426.667S9.557 448 21.333 448h270.144c9.237 30.741 37.483 53.333 71.189 53.333s61.931-22.592 71.189-53.333h56.811c11.797 0 21.333-9.557 21.333-21.333s-9.535-21.334-21.332-21.334zm-128 53.334c-17.643 0-32-14.357-32-32s14.357-32 32-32 32 14.357 32 32-14.358 32-32 32zM490.667 64h-56.811c-9.259-30.741-37.483-53.333-71.189-53.333S300.736 33.259 291.477 64H21.333C9.557 64 0 73.557 0 85.333s9.557 21.333 21.333 21.333h270.144C300.736 137.408 328.96 160 362.667 160s61.931-22.592 71.189-53.333h56.811c11.797 0 21.333-9.557 21.333-21.333S502.464 64 490.667 64zm-128 53.333c-17.643 0-32-14.357-32-32s14.357-32 32-32 32 14.357 32 32-14.358 32-32 32zM490.667 234.667H220.523c-9.259-30.741-37.483-53.333-71.189-53.333s-61.931 22.592-71.189 53.333H21.333C9.557 234.667 0 244.224 0 256c0 11.776 9.557 21.333 21.333 21.333h56.811c9.259 30.741 37.483 53.333 71.189 53.333s61.931-22.592 71.189-53.333h270.144c11.797 0 21.333-9.557 21.333-21.333.001-11.776-9.535-21.333-21.332-21.333zM149.333 288c-17.643 0-32-14.357-32-32s14.357-32 32-32 32 14.357 32 32-14.357 32-32 32z"/></svg>':'<svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 340.274 340.274"><path d="M293.629 127.806l-5.795-13.739c19.846-44.856 18.53-46.189 14.676-50.08l-25.353-24.77-2.516-2.12h-2.937c-1.549 0-6.173 0-44.712 17.48l-14.184-5.719c-18.332-45.444-20.212-45.444-25.58-45.444h-35.765c-5.362 0-7.446-.006-24.448 45.606l-14.123 5.734C86.848 43.757 71.574 38.19 67.452 38.19l-3.381.105-27.27 26.737c-4.138 3.891-5.582 5.263 15.402 49.425l-5.774 13.691C0 146.097 0 147.838 0 153.33v35.068c0 5.501 0 7.44 46.585 24.127l5.773 13.667c-19.843 44.832-18.51 46.178-14.655 50.032l25.353 24.8 2.522 2.168h2.951c1.525 0 6.092 0 44.685-17.516l14.159 5.758c18.335 45.438 20.218 45.427 25.598 45.427h35.771c5.47 0 7.41 0 24.463-45.589l14.195-5.74c26.014 11 41.253 16.585 45.349 16.585l3.404-.096 27.479-26.901c3.909-3.945 5.278-5.309-15.589-49.288l5.734-13.702c46.496-17.967 46.496-19.853 46.496-25.221V151.88c-.005-5.519-.005-7.446-46.644-24.074zM170.128 228.474c-32.798 0-59.504-26.187-59.504-58.364 0-32.153 26.707-58.315 59.504-58.315 32.78 0 59.43 26.168 59.43 58.315-.006 32.177-26.656 58.364-59.43 58.364z" fill="#FFF"/></svg>')+"</span>",t=(this.options.order||"append")+"To";this.$el[t]("."+this.options.region).html(e),this.renderedOnce=!0}return this},toggleShow:function(e){e&&(e.preventDefault(),e.stopPropagation()),m.trigger("globalEvent:click",this),this.visible?m.commandManager.execute("settings.toggle"):this.initializeSettings().then((function(){m.commandManager.execute("settings.toggle")}))},initializeSettings:function(){var e=this;return new Promise((function(t){e.initialized?t():(e.initialized=!0,m.commandManager.ensureCommandLoaded("settings.initialize",(function(){e.mainSettings=m.commandManager.execute("settings.initialize",e.$el),setTimeout((function(){t()}),50)})))}))},hideSettings:function(e){m.upsellModalActive||e!=this&&(e&&e.originalEvent&&"click"===e.type&&e.target&&this.mainSettings&&$.contains(this.mainSettings.el,e.target)||(m.commandManager.execute("settings.hide"),this.visible=!1))},settingsVisible:function(){this.$el.addClass("show").width(),this.$el.addClass("show-fade-in"),this.visible=!0},settingsHidden:function(e){if(e&&e.preventDefault(),this.$el.hasClass("show")){let e=function(){t.$el.removeClass("show"),t.$el.off("transitionend webkitTransitionEnd",e)};this.visible=!1;var t=this;this.$el.removeClass("show-fade-in").on("transitionend webkitTransitionEnd",e)}}}),m.commands.UpsellMessage=m.models.Command.extend({defaults:{id:"upsell.message"},execute:function(e){return m.widgetManager.getWidget(e.targetRegion).showUpsell(e)}}),m.commands.UpsellWebsite=m.models.Command.extend({defaults:{id:"upsell.website"},execute:function(e,t){t||(t=e&&e.source?e:{}),t.url="https://momentumdash.com/plus?utm_source=extension&utm_medium=organic",La(0,t),D(t.url)}}),m.commands.UpsellModal=m.models.Command.extend({defaults:{id:"upsell.modal"},execute:function(e,t){La(0,t),m.trigger("modal:showUpgrade")}}),m.commands.UpsellUpgrade=m.models.Command.extend({defaults:{id:"upsell.upgrade"},execute:function(e){m.commandManager.execute("upsell.modal",null,e),m.Analytics.capture("upsell click",{feature:"settings"})}}),m.models.Mantra=Backbone.Model.extend({idAttribute:"forDate",defaults:function(){return{body:"New Mantra",type:"mantra",is_favorite:!1}},save:function(e,t){(t=t||{}).update=!0,Backbone.Model.prototype.save.call(this,e,t)},isPinned:function(){var e=m.models.mantraManager.getPinnedMantra();return!!e&&this.get("_id")===e.id}}),m.commands.AuthConnect=m.models.Command.extend({defaults:{id:"auth.connect"},execute:function(e){m.commandManager.execute("auth.connect.provider",e.actionParameter,(function(){m.trigger("todoListManager:fetch")}))}}),m.commands.AuthConnectProvider=m.models.Command.extend({defaults:{id:"auth.connect.provider"},execute:function(e,t,n){if(e&&e.status&&"authRequired"===e.status&&e.authorizationUrl){var i=e.winWidth?e.winWidth:600,o=e.winHeight?e.winHeight:510,s=e.windowFeatures?e.windowFeatures:"titlebar,resizable,status",r=window.screen.width/2-i/2,a=window.screen.height/2-o/2,l=window.open(e.authorizationUrl,"MomentumAuthWindow",s+",left="+r+",top="+a+",width="+i+",height="+o),c=function(){l.closed||setTimeout((function(){l.closed||l.close()}),1e3),t&&t()},u=e.authorizationUrl.split("/"),d="";u.length>1&&(d=u[u.length-1]);var h=m.globals.urlRootApi+"user/auth/status/"+d,g=0,p=1e3,f=function(){l.closed?c():++g>100||(g%30&&(p+=1e3),$.ajax({type:"GET",contentType:"application/json",url:h}).done((function(e){e&&e.token_obtained?c():setTimeout((function(){f()}),p)})).fail((function(){setTimeout((function(){f()}),p)})))};f()}else n&&n()}}),m.commands.ToggleAutoFocus=m.models.Command.extend({defaults:{id:"todo.toggle.autofocus"},execute:function(e,t){if(m.conditionalFeatures.featureEnabled("pinfocus"))return m.Analytics.capture(m.models.customization.get("autoFocus")?"autofocus disable":"autofocus enable",{feature:"focus",location:t.sourceApp.toLowerCase(),is_paid_event:!0}),m.models.customization.toggle("autoFocus"),m.trigger("toggleAutoFocus",m.models.customization.get("autoFocus")),!1;m.cmd("modal.open","UPSELL_AUTOFOCUS",{eventSource:t&&t.eventSource})}}),m.commands.CleanLocalStorage=m.models.Command.extend({defaults:{id:"clean.localstorage"},initialize:function(){this.twoDaysAgo=m.now()-1728e5},execute:function(){var e=this;if(!(localStorage.getItem("last_cleanup")>this.twoDaysAgo))var t=setTimeout((function(){try{if(!m||!m.collect||!m.collect.backgrounds)return;clearTimeout(t);for(var n=[],i=!1,o=null,s=0;s<localStorage.length;s++)i=!1,"archived-"==(o=localStorage.key(s)).substring(0,9)&&(i=!0),"fallback-"==o.substring(0,9)&&(i=!0),"image_displayed-"==o.substring(0,16)&&(i=!0),"weather-loc-"==o.substring(0,12)?i=!0:"ddl-bg-"==o.substring(0,7)?localStorage.getItem(o)<e.twoDaysAgo&&(i=!0):"ddl-qt-"==o.substring(0,7)&&localStorage.getItem(o)<e.twoDaysAgo&&(i=!0),i&&n.push(o);for(s=0;s<n.length;s++)localStorage.removeItem(n[s]);m.commandManager.execute("clean.localstorage.addin"),localStorage.setItem("last_cleanup",m.now())}catch(r){console.error(r)}}),500)},collectionCleaner:function(e,t){var n=this;if(e){t=t||"forDate";var i=[];e.each((function(e){var o=e.get(t);Date.parse(o)<n.twoDaysAgo&&i.push(o)}));for(var o=0;o<i.length;o++){e.get(i[o]).destroy()}return i.length}return 0}}),m.commands.CleanupUserData=m.models.Command.extend({defaults:{id:"user.cleanup"},execute:function(e,t){e&&e.type&&("notifications"==e.type?this.cleanNotifications():"all"==e.type&&(this.cleanUserData(),this.managerCleanup(m),this.managerCleanup(m.models))),t&&t()},managerCleanup:function(e){var t=Object.keys(e);for(var n in t){var i=t[n];if(Object.prototype.hasOwnProperty.call(m,i)){var o=m[i];(o instanceof m.models.Manager||o instanceof m.collect.Manager)&&o.cleanup&&o.cleanup()}}},cleanNotifications:function(){for(var e=[],t=!1,n=null,i=0;i<localStorage.length;i++)t=!1,((n=localStorage.key(i)).startsWith("momentum-messages")||"ts_notifications"==n)&&(t=!0),t&&e.push(n);for(i=0;i<e.length;i++)localStorage.removeItem(e[i])},cleanUserData:function(){for(var e=[],t=!1,n=null,i=0;i<localStorage.length;i++)t=!1,("notes"==(n=localStorage.key(i))||n.endsWith("-loaded-once")||n.startsWith("teamFocus")||n.startsWith("team-info")||n.startsWith("cached-steam")||n.startsWith("no-background")||n.startsWith("no-quote")||n.startsWith("no-mantra")||n.startsWith("quicklinks")||n.startsWith("teamlinks")||n.startsWith("todo")||n.startsWith("focus")||n.startsWith("countdown")||n.startsWith("clock")||n.startsWith("metrics")||n.startsWith("momentum-messages")||n.startsWith("momentum-mantra")||n.startsWith("momentum-quote")||n.startsWith("momentum-background")||n.startsWith("momentum-pinned")||n.startsWith("ddl-")||n.startsWith("cached-settings")||n.startsWith("activeTodo")||n.startsWith("cached-team")||n.startsWith("listCache")||"notes-"==n.substring(0,6)||"cachedTodoProviders"==n||"cachedFocus"==n||"f3t6b23d"==n||"current-countdown"==n||"loginParams"==n||"pendingLoginState"==n||"clocks"==n||"clocks-"==n.substring(0,7)||"activeTodoProvider"==n||"activeTodoListId-"==n.substring(0,17)||"font-"==n.substring(0,5)||"listCache-"==n.substring(0,10)||"projectCache-"==n.substring(0,13)||"tsCachedTodoProviders"==n||"ts_notifications"==n||"todos-updated"==n||n.includes("activeTodo")||"showTodoList"===n)&&(t=!0),t&&e.push(n);var o=JSON.parse(localStorage.getItem("momentum-customization-1"));delete o.etag,localStorage.setItem("momentum-customization-1",JSON.stringify(o));for(i=0;i<e.length;i++)localStorage.removeItem(e[i])}}),m.commands.LoadAddins=m.models.Command.extend({defaults:{id:"addins.load"},execute:function(e){if(e){if(!this.addInsLoaded){this.addInsLoaded=!0;for(var t=0;t<e.length;t++){var n=e[t];n&&m.addinManager.loadAddin(n)}}m.trigger("processAddIns")}}}),m.commands.AccountLogin=m.models.Command.extend({defaults:{id:"account.login"},execute:function(){m.isLoggedIn()?m.commandManager.execute("notification.show.enhanced",{message:"You are already logged in.",display_time:5e3,viewLimit:1,priority:2}):(m.commandManager.execute("user.cleanup",{type:"notifications"}),localStorage.doLoginOnNextLoad=!0,window.location.reload())}}),m.commands.Logout=m.models.Command.extend({defaults:{id:"logout"},execute:function(e){var t={token:localStorage.token,token_uuid:localStorage.token_uuid};function n(){m.user.uuid=null,e&&e.keepData?(localStorage.removeItem("token"),localStorage.removeItem("token_uuid"),localStorage.removeItem("userId"),localStorage.removeItem("user_uuid"),m.conditionalFeatures.clearFeatures(),function(e){localStorage.setItem("loggedOut",m.now());var t=e||"You have been logged out.";m.commandManager.execute("notification.show.enhanced",{message:t,display_time:5e3,viewLimit:1,priority:2},(function(){window.location.reload()}),!0)}(e&&e.token_invalid_reason)):m.utils.clearStorage().finally((function(){m.$e.sendCrossTabMessage("reload"),window.location.reload()}))}$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(t),url:m.globals.urlRootLogin+"user/logout"}).always((function(){m.utils.isSafari()&&window.browser&&window.browser.runtime?browser.runtime.sendNativeMessage("com.momentumdash.momentum.safari",{eventName:"removeUserTokenInfo"}).then((function(){n()})):n()}))}}),m.commands.openModal=m.models.Command.extend({defaults:{id:"modal.open"},execute:function(e,t){void 0===t&&(t={});var n=t.subStepIndex,i=t.force,o=t.addExperimentDefinitions;function s(){var s="object"==typeof e?e:{...m.modals.definitions,...o?m.modals.getAllocatedDefinitions():{}}[m.modals.stepsEnum[e]];s?(Object.assign(s,t),(s.id.startsWith("upsell")||["plusGate","permissionRequest","upgrade","freeTrial","freeTrialCard"].includes(s.id))&&(i=!0,m.modal.hidden=!1),m.trigger("modal:show",s,{subStepIndex:n,force:i})):console.warn("No step: "+e+" found in onboarding definitions")}delete t.subStepIndex,delete t.force,delete t.addExperimentDefinitions,m.modals?s():m.on("modalContainer:created",s)}}),m.commands.openModalFromNotification=m.models.Command.extend({defaults:{id:"modal.openFromNotification"},execute:function(e,t){void 0===t&&(t={}),void 0===t.options&&(t.options={}),t.options.force=!0,m.cmd("modal.open",t.step,t.options)}}),m.commands.SyncEnable=m.models.Command.extend({defaults:{id:"sync.enable"},execute:function(){m.conditionalFeatures.featureEnabled("serverfocus")||m.conditionalFeatures.featureEnabled("servertodos")||m.conditionalFeatures.featureEnabled("serverlinks")||m.isLoggedIn()&&m.syncCoordinator.submitFeatureAccessRequest("sync-early-access",(function(){window.location.reload()}),(function(){m.commandManager.execute("notification.show.enhanced",{message:"Unable to enable account sync. Reload the tab and try again, or check our help site.",viewLimit:1,priority:2})}))}}),m.commands.ThirdPartyAuthConnect=m.models.Command.extend({defaults:{id:"auth.thirdparty"},execute:function(e,t){this.initiateThirdPartyLogin(e,t)},initiateThirdPartyLogin:function(e,t){var n,i=m.utils.getPlatformName(),o="chrome-extension";"Chrome"===i&&(n=chrome.runtime.getURL("/login.html")),"Firefox"===i&&(o="firefox-extension",n=browser.runtime.getURL("/login.html")),this.loading||(this.loading=!0,$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify({email:e,medium:o,mediumURL:n}),url:m.globals.urlRootLogin+"login/sso"}).done((function(e){if(e){if(localStorage.setItem("pendingLoginState",JSON.stringify(e)),e.redirectUrl)return void(window.location.href=e.redirectUrl)}else t&&t()})).fail((function(){t&&t()})))}}),m.commands.WindowNavigate=m.models.Command.extend({defaults:{id:"window.navigate"},execute:function(e,t){if(t){var n=null;t.url&&(n=t.url),e&&t.urlField&&(n=e.get(t.urlField)),n&&(window.location.href=n)}}}),m.commands.WindowOpen=m.models.Command.extend({defaults:{id:"window.open"},execute:function(e,t){if(t){var n=null;t.url&&(n=t.url),e&&t.urlField&&(n=e.get(t.urlField)),n&&D(n)}}}),m.commands.WindowAccountOpen=m.models.Command.extend({defaults:{id:"window.account.open"},execute:function(e){var t,n=Ra(e);null!=n&&(t=m.globals.urlRootAccount+n,D(t))}}),m.commands.WindowAccountOpenLogin=m.models.Command.extend({defaults:{id:"window.account.open.login"},execute:function(e){var t=Ra(e);if(null!=t){var n=m.utils.getUserUuid(),i="Safari"===m.utils.getPlatformName()?D("loading.html"):null;if(!n)return o();m.miscDb.get("authState").then((function(s){if(s&&s.account===n)return o();var r=localStorage.getItem("unregistered");$.ajax({type:"POST",beforeSend:m.helpers.auth.setMomentumAuthHeader,data:JSON.stringify({medium:"account"}),url:m.globals.urlRootApi+"login/onetime"}).done((function(e){var o;o=e&&e.otp?m.globals.urlRootAccount+(r?"onetime?uuid="+n:"onetime?email="+encodeURIComponent(e.email))+"&otp="+encodeURIComponent(e.otp)+"&redirect="+t:m.globals.urlRootAccount,i?i.location=o:D(o)})).fail((function(){o()})).always(e&&e.callback)}))}function o(){var e=m.globals.urlRootAccount+t;D(e)}}});class Da{constructor(e,t={}){this.lockName=e,this.isLeader=d(!!t.ifAvailable&&null);const n=function(e,t,n={}){let i;const o=new Promise((e=>{i=e}));return navigator.locks.request(e,n,(e=>(t(e),null===e?i():o))),()=>i()}(e,(e=>{this.isLeader.value=!!e}),t);this.stepDown=()=>{this.isLeader.value=!1,n()}}}const Fa=new Da("dashboardExperiment",{ifAvailable:!0}),Ba=async()=>{await U.delete(F),null==Fa||Fa.stepDown()};m.models.Date=Backbone.Model.extend({defaults:function(){var e=m.date();return{date:e,seconds:e,hour:e}},initialize:function(){this.listenTo(this,"change:date",this.updateTime,this),this.listenTo(m,"globalEvent:pageShown",this.onPageShown)},setDateUpdateTimer:function(){var e=this,t=6e4,n=m.date();t=t-1e3*n.getSeconds()-n.getMilliseconds(),setTimeout((function(){e.set("date",m.date()),e.setDateUpdateTimer()}),t)},setHourUpdateTimer:function(){var e=this,t=36e5,n=m.date();t=t-60*n.getMinutes()*1e3-1e3*n.getSeconds()-n.getMilliseconds(),setTimeout((function(){e.set("hour",m.date()),e.setHourUpdateTimer()}),t)},setSecondsUpdateTimer:function(){const e=()=>{const t=Date.now(),n=1e3*Math.floor(t/1e3);this.set("seconds",new Date(n));setTimeout(e,n-t+1e3)};e()},getTimeString:function(e){var t=m.models.customization.get("hour12clock"),n=(e=e||this.get("date")).getHours(),i=e.getMinutes();return 1==t&&(n=(n+11)%12+1),n<10&&!t&&(n="0"+n),i<10&&(i="0"+i),n+":"+i},getTimePeriod:function(){return this.get("date").getHours()>=12?"PM":"AM"},updateTime:function(){var e=this.getTimeString();this.get("time")!==e&&this.set("time",e)},onPageShown:function(){var e=this.get("time"),t=this.getTimeString(new Date);void 0!==e&&e!==t&&this.set("date",m.date())}}),m.views.Dashboard=Backbone.View.extend({initialize:function(){this.$loading=$('<span class="message-fill"><i class="loading-icon"></i> Loading...</span>'),m.console.log(m.elapsed()+": Dashboard Init"),m.models.themeManager=new m.models.ThemeManager,m.models.customization.fetch({error:function(){m.models.customization.save(),m.models.themeManager.initializeThemes()},success:function(){m.models.themeManager.initializeThemes()}}),this.listenTo(m,"processAddIns",this.processAddIns),m.models.backgroundManager=new m.models.BackgroundManager,m.conditionalFeatures.featureEnabled("team")&&$("body").addClass("has-team"),m.models.backgroundManager.firstFetch(),m.models.notificationManager=new m.models.NotificationManager,m.models.date&&(m.models.date.setDateUpdateTimer(),m.models.date.setSecondsUpdateTimer(),m.models.date.setHourUpdateTimer()),this.trackPageVisibility(),this.newDayIntervalId=setInterval((function(){if(window.Cypress&&document.body.setAttribute("data-test-new-day-interval-check-has-run",""),localStorage.activeDate){if(localStorage.activeDate!=m.utils.getDateString()){var e=9e3*Math.random()+1e3;setTimeout((function(){localStorage.activeDate=m.utils.getDateString(),m.trigger("newDay")}),e)}}else localStorage.activeDate=m.utils.getDateString()}),1e4);var e=this.getOneTimeLoginParams();e.otpUuid&&e.otp?(m.widgetManager.loadWidget("modal"),m.widgetManager.showDashboard(),w.oneTimeLoginActive=!0,m.cmd("modal.open","ONE_TIME_LOGIN",{otlParams:e})):m.utils.shouldShowIntroduction()?(async()=>{if(!(await U.get(F)))return!1;if(await p(Fa.isLeader).not.toBeNull(),!Fa.isLeader.value)return!1;const e=await V(j),t=Number(e??"0")/2,n=Math.random(),i=n<t?"experimental":n<2*t?"control":void 0;return i&&localStorage.setItem(B,i),"experimental"===i})().then((e=>{m.widgetManager.loadWidget("modal"),m.widgetManager.showDashboard(),w.introductionActive=!0,m.cmd("modal.open",e?"SETUP_UNREGISTERED_DASHBOARD":"LOGIN")})):m.utils.userIsLegacyUnregistered()||localStorage.getItem(m.constants.LEGACY_USER_MIGRATION_KEYS.TIME)?m.legacyUserMigration.migrateIfEligible().then(this.loadWidgets.bind(this)):this.loadWidgets(),m.versionDeprecationWarningCheck();var t=$("body"),n=m.utils.getPlatformName().toLowerCase(),i=m.utils.getRenderingEngine().toLowerCase();t.addClass("engine--"+i+" platform--"+n),m.utils.isTouchDevice()&&t.addClass("touch"),this.initializeCompleted=!0},loadWidgets:function(){m.readyForWidgets=!0,m.trigger("readyForWidgets"),this.render()},trackPageVisibility:function(){var e,t;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),void 0!==e&&this.addEventHandler(document,t,(function(){m.trigger(document[e]?"globalEvent:pageHidden":"globalEvent:pageShown")}))},addEventHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},processAddIns:function(){var e=this;e.processAddInsIntervalId=setInterval((function(){e.initializeCompleted&&(clearInterval(e.processAddInsIntervalId),m.addinManager.processPending())}),50)},render:function(){this.renderedOnce||(this.renderedOnce=!0,m.views.backgroundInfo&&m.widgets.push(m.views.backgroundInfo),m.views.settingsPane=new m.views.settings.SettingsPane({region:"bottom-left",order:"prepend"}),m.widgets.push(m.views.settingsPane))},getViewById:function(e){var t=null;return _.each(m.widgets,(function(n){n.el.id===e&&(t=n)})),t},removeView:function(e){_.each(m.widgets,(function(t){t.el.id===e&&t.$el.mFadeOut(500,!1,(function(){t.remove(),m.widgets.splice(m.widgets.indexOf(t),1)}))}))},removeAllViews:function(e){_.each(m.widgets,(function(e){e&&e.$el.mFadeOut(500,!1,(function(){e.remove()}))})),m.widgets=[],_.delay(e,475)},getOneTimeLoginParams:function(){return m.utils.getAndRemoveParamsFromUrl("otp","otpUuid","email","legacy")}});var ja=function(){if(setTimeout((function(){try{var e="";for(s=0;s<100;s++)e+="aaaaaaaaaa";localStorage.setItem("capacityTest",e),localStorage.removeItem("capacityTest")}catch(r){try{localStorage.removeItem("capacityTest");for(var t=m.now()-1728e5,n=[],i=!1,o=null,s=0;s<localStorage.length;s++)i=!1,"no-mantra"==(o=localStorage.key(s)).substring(0,9)&&(i=!0),"no-quote"==o.substring(0,8)&&(i=!0),"no-background"==o.substring(0,13)&&(i=!0),"last_cleanup"==o.substring(0,12)&&(i=!0),"archived-"==o.substring(0,9)&&(i=!0),"fallback-"==o.substring(0,9)&&(i=!0),"listCache-"==o.substring(0,10)&&(i=!0),"font-"==o.substring(0,5)&&(i=!0),"image_displayed-"==o.substring(0,16)&&(i=!0),"weather"==o.substring(0,7)&&(i=!0),"bookmarks"==o.substring(0,9)?i=!0:"ddl-bg-"==o.substring(0,7)?localStorage.getItem(o)<t&&(i=!0):"ddl-qt-"==o.substring(0,7)&&localStorage.getItem(o)<t&&(i=!0),i&&n.push(o);for(s=0;s<n.length;s++)localStorage.removeItem(n[s])}catch(a){console.error(a)}}}),3e3),m.isLoggedIn()){if(!m.utils.getUserUuid()){var e=localStorage.getItem("token"),t=m.utils.parseJwt(e);if(t){var n=t.user_uuid||t.user_guid;n&&(localStorage.setItem("user_uuid",n.toLowerCase()),m.user.uuid=n)}}localStorage.removeItem("pendingLoginState")}m.models.date=new m.models.Date,m.models.customization=new m.models.ComputedSettings({id:1}),m.listenToOnce(m.models.customization,"initialized",m.onSettingsInitialized),m.console.log(m.elapsed()+": Settings requested"),m.models.teamInfo=new m.models.TeamInfo,m.models.customization.initializeSettings()};try{window.chrome&&window.chrome.extension&&window.chrome.extension.inIncognitoContext&&!m.utils.isSafari()?$("body").html(""):m.utils.domReady(ja)}catch(al){m.utils.domReady(ja)}function za(){null===localStorage.getItem("analytics:batchEventNames")&&m.Analytics.capture("tab load",{count:0}),m.Analytics.sendBatchEventsIfNeeded(),m.Analytics.batchCapture("tab load")}function Va(){document.getElementById("introduction")||document.body.classList.remove("hide-overlay")}function $a(){m.listenersRegistered||(m.$e.addCrossTabMessageListener("reload",(function(){location.reload()})),window.addEventListener("storage",(function(e){if("activeDate"==e.key&&e.oldValue!=e.newValue){var t=9e3*Math.random()+1e3;setTimeout((function(){m.trigger("newDay")}),t)}})),$(window).on("resize",(function(){m.trigger("globalEvent:window:resize"),m.$e.$emit("globalEvent:window:resize")})),window.onblur=function(){m.trigger("globalEvent:windowBlur")},$(document).on("click",(function(e){m.trigger("globalEvent:click",e)})),$(document).on("keyup",(function(e){m.trigger("globalEvent:keyup"),m.tourActive||m.reactive.dashboardOverlayActive||(27==e.keyCode&&m.trigger("globalEvent:esc",e),"Alt"==e.key&&m.trigger("globalEvent:altUp",e))})),$(document).on("keydown",(function(e){if(m.trigger("globalEvent:keydown"),!m.tourActive&&!m.reactive.dashboardOverlayActive){if(9===e.keyCode&&(m.trigger("globalEvent:key:tab"),"BODY"===document.activeElement.tagName)){e.preventDefault();var t=$("#search-input");if(t.length)t.trigger("focus");else{var n=$("#focuses").find("input");n.length?n.trigger("focus"):$("a").filter(":visible").first().trigger("focus")}}if(8==e.keyCode&&e.shiftKey&&e.metaKey&&m.trigger("globalEvent:metaBackspace",e),13==e.keyCode&&e.metaKey&&m.trigger("globalEvent:metaEnter",e),78==e.keyCode&&e.ctrlKey&&m.trigger("globalEvent:ctrlN",e),70==e.keyCode&&e.altKey&&m.trigger("globalEvent:altF",e),76==e.keyCode&&e.altKey&&m.trigger("globalEvent:altL",e),e.altKey&&38==e.keyCode&&m.trigger("globalEvent:altArrowUp",e),e.altKey&&40==e.keyCode&&m.trigger("globalEvent:altArrowDown",e),!e.metaKey||e.shiftKey||e.ctrlKey||e.altKey||("["===e.key&&m.trigger("globalEvent:metaBracketLeft",e),"]"===e.key&&m.trigger("globalEvent:metaBracketRight",e),"/"===e.key&&m.trigger("globalEvent:metaForwardSlash",e),"\\"===e.key&&m.trigger("globalEvent:metaBackSlash",e),"k"===e.key&&m.trigger("globalEvent:metaK",e)),"n"===e.key&&e.metaKey&&e.ctrlKey&&m.trigger("globalEvent:metaCtrlN",e),["`","~"].includes(e.key)&&e.ctrlKey&&e.shiftKey&&m.trigger("globalEvent:ctrlShiftBacktick",e),!e.ctrlKey&&!e.metaKey&&!(e.altKey&&78!=e.keyCode||m.utils.isInputOrTextAreaActive())){var i;if(76==e.keyCode)m.trigger("globalEvent:key:L",e);else if(70==e.keyCode)i="Focus";else if(84==e.keyCode)m.trigger("globalEvent:key:T",e);else if(83==e.keyCode)i="Search";else if(188==e.keyCode){if(e.metaKey)return;i="Settings"}else{if(67==e.keyCode&&m.utils.isChromium())return void m.utils.getBrowser().tabs.update({url:m.utils.getChromeNewTabPageUrl()});if(8==e.keyCode)m.trigger("globalEvent:key:backspace",e);else if(13==e.keyCode)m.trigger("globalEvent:key:enter",e);else if(32==e.keyCode)m.trigger("globalEvent:spacebar",e);else if(38==e.keyCode)m.trigger("globalEvent:arrowUp",e);else if(40==e.keyCode)m.trigger("globalEvent:arrowDown",e);else if(37==e.keyCode)m.trigger("globalEvent:arrowLeft",e);else if(39==e.keyCode)m.trigger("globalEvent:arrowRight",e);else if(65==e.keyCode)m.trigger("globalEvent:key:A",e);else if(73==e.keyCode)m.trigger("globalEvent:key:I",e);else if(78==e.keyCode&&e.shiftKey)m.trigger("globalEvent:key:shiftN",e);else if(78!=e.keyCode||e.shiftKey)if(80==e.keyCode)m.trigger("globalEvent:key:P",e);else if(86==e.keyCode)m.trigger("globalEvent:key:V",e);else if(87==e.keyCode)m.trigger("globalEvent:key:W",e);else if(66==e.keyCode){if(m.utils.bookmarksNotSupported())return;if(void 0===m.utils.getBrowser().bookmarks||void 0===m.utils.getBrowser().topSites)return;m.widgetManager.loadWidget("bookmarks");var o=!m.models.customization.get("bookmarksVisible");m.models.customization.save("bookmarksVisible",o),m.Analytics.capture("feature "+(o?"enable":"disable"),{feature:"bookmarks",location:"hotkey"})}else e.shiftKey&&191==e.keyCode&&m.commandManager.execute("settings.toggle",null,{section:"help"});else m.trigger("globalEvent:key:N",e)}i&&(m.trigger("globalEvent:toggle"+i.replace(/\s+/g,"")),e.preventDefault())}}})),m.utils.isSafari()&&$("a").on("click",(function(){safari.self.tab.dispatchMessage("sendClick",{link:this.href,time:(new Date).getTime()})})),m.listenTo(m,"user:successfulLogout",(function(){m.appView.removeAllViews((function(){m.appView=new m.views.Dashboard}))})),m.listenersRegistered=!0)}function Ua(){if(!m.customBackgroundListenersRegistered){var e=$("body");!m.utils.isTouchDevice()&&m.conditionalFeatures.featureEnabled("custom-bg")&&(m.appView.addEventHandler(document.body,"dragover",(function(e){e.stopPropagation(),e.preventDefault(),_.contains(e.dataTransfer.types,"Files")?e.dataTransfer.dropEffect="copy":e.dataTransfer.dropEffect="none"})),window.addEventListener("dragenter",(function(t){_.contains(t.dataTransfer.types,"Files")&&(m.appView.lastTarget=t.target,e.addClass("blur show-drop"))})),window.addEventListener("dragleave",(function(t){t.preventDefault(),t.target!==document&&t.target!==m.appView.lastTarget||e.removeClass("blur show-drop")}),!1),window.addEventListener("dragover",(function(e){e.preventDefault()})),m.appView.addEventHandler(document.body,"drop",(function(t){if(t&&t.dataTransfer.files.length&&Array.prototype.some.call(t.dataTransfer.files,(function(e){return e&&e.name.match(/\.(gif|jpg|jpeg|tiff|png)$/i)}))){if(t.stopPropagation(),t.preventDefault(),e.removeClass("blur show-drop"),!_.contains(t.dataTransfer.types,"Files"))return;if(!m.conditionalFeatures.featureEnabled("custom-bg"))return void m.cmd("modal.open","UPSELL_PHOTOS",{eventSource:"dash"});var n=t.dataTransfer.files;n&&n.length>0&&m.commandManager.ensureCommandLoaded("background.custom.uploadfiles",(function(){m.commandManager.execute("background.custom.uploadfiles",n)}),null,(function(){}))}else e.removeClass("blur show-drop")})),m.customBackgroundListenersRegistered=!0)}}m.onSettingsInitialized=function(){m.console.log(m.elapsed()+": Settings initialized");var e="installed-"+m.globals.version;if(localStorage.getItem(e)||localStorage.setItem(e,Date.now()),m.models.cleanupManager=new m.models.CleanupManager,m.addinManager=new m.models.AddinManager,m.commandManager=new m.CommandManager,m.cmd=m.commandManager.execute.bind(m.commandManager),(void 0===m.models.customization.get("displayname")&&!m.isLoggedIn()||localStorage.doLoginOnNextLoad)&&(m.prelogin=!0),m.models.mantraManager=new m.models.MantraManager,m.widgetManager=new m.models.WidgetManager,m.widgetManager.setupWhenReady(),m.appView=new m.views.Dashboard,!localStorage.getItem("offered-plan")&&m.conditionalFeatures.featureEnabled("notes-degraded")&&$.ajax({type:"GET",contentType:"application/json",url:m.globals.urlRootLogin+"account/history"}).done((function(e){e.offeredPlan&&localStorage.setItem("offered-plan",e.offeredPlan)})),localStorage.client_uuid?window.Cypress&&$("body").attr("data-test-ready-for-tests",""):$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify({action:"registerClient"}),url:m.globals.urlRootLogin+"user/client"}).done((function(e){e.client_uuid&&localStorage.client_uuid!==e.client_uuid&&(localStorage.getItem("token")||localStorage.setItem("registrationStatePending",!0),localStorage.client_uuid=e.client_uuid,window.Cypress&&$("body").attr("data-test-ready-for-tests",""))})).fail(console.error),m.syncCoordinator=new m.models.SyncCoordinator,localStorage.firstSynchronized&&m.trigger("sync:downloadIfNeeded"),!Mr())if(m.syncCoordinator.syncSettings(null,!0),localStorage.getItem("token")){const e=R.getTimestamps().then().catch(console.error);m.appView.listenTo(m,"appsReady",(async()=>{await e,Na()}))}else m.appView.listenToOnce(m,"appsReady",(async()=>{m.widgetManager.loadWidget("modal")}));m.appView.listenToOnce(m,"appsReady",$a),m.appView.listenTo(m,"appsReady",Ua),m.appView.listenTo(m,"appsReady",Va),m.appView.listenToOnce(m,"appsReady",za)};class Ha{constructor(e,t){this.localStorageKey=e,this.propertyGetter=d(null);const n=localStorage.getItem(e),i=("string"==typeof t?n:JSON.parse(n||"null"))||t;this.property=d(i),f((()=>this.currentValue),(e=>localStorage.setItem(this.localStorageKey,"string"==typeof e?e:JSON.stringify(e))))}get currentValue(){return this.propertyGetter.value?this.propertyGetter.value():this.property.value}get synced(){return null!==this.propertyGetter.value}switchOverToWatchedStoreItem(e){this.propertyGetter.value=e}}var Wa=(e=>(e.Idle="idle",e.Transition="transition",e.Focusing="focusing",e.Celebration="celebration",e))(Wa||{});const qa="Focus Mode ended due to inactivity.",Ga=500,Ka=4e3,Ja=["tabs","soundscapes","notes","focus-mode","focus-mode-app","pomodoro","clock","greeting","mantra","focus","big-search","launchpad","links","focus-mode-mantras","chat","baseMetric","add-metric","site-blocker"],Ya=".todo, .settings",Xa="soundscapes:shoudResumeOnReload",Qa="focusInsights:lastGoalCompleted",Za=36e5,el=108e5,tl=1e3,nl=2500,il=["I am centered and focused on my next task.","Deep focus is the key to meaningful work.","I'm focused on my most meaningful work.","Deep work leads to mindful productivity .","I'm connected to my why and focused on the next step.","I choose to focus to create my best work.","I'm moving forward on what matters.","Focus is the key to satisfying work.","Distractions have no power over me.","Unstoppable focus powers success.","I'll let distracting thoughts float away.","This is my intentional work time.","This is my mindful productivity time.","This is my time to access flow state.","This is my time for deep work.","This is my time to move toward my why.","This is my time to complete important tasks.","I will take on each task one at a time.","I give myself permission to focus on only one thing.","This is my time to take action on essential tasks.","Block out everything but your next task.","I give myself permission to zone in and ignore distractions.","I claim this time to focus on what matters.","I am connected to my purpose.","I am connected to the bigger vision.","Focus is my superpower.","Deep work is my superpower.","Now is the time to tune out the world and focus.","Now is the time to move toward my goals.","Now is the time to take the next step.","Now is the time to move on what matters.","I am an unstoppable force of focus.","I commit to mindful productivity.","Narrow your focus for extraordinary results.","I give my undivided attention to what matters most.","“Until my ONE Thing is done — everything else is a distraction.” - Gary Keller",'"Multitasking is a lie." - Gary Keller',"With undivided attention, I can get it done.","The time I invest with 100% focus yields the most success.","I'm honoring what's important with undivided attention.","I will reach the next milestone with 100% focus.","With practice, I can cultivate lasting deep focus.","I give the best I have to the task at hand.","I am focused on a single direction and one task at a time.","Ignore everything but your most essential task.","One focused step every day creates extraordinary results.","“Focus is a matter of deciding what things you’re not going to do.” —John Carmack","I dedicate my willpower to accomplish one task.","My purpose guides my focus.","My ritual for success is deep work."],ol=["Well done! Each moment of deep focus helps you build a stronger, more resilient mind.","Incredible work! Your focus muscle is getting stronger, paving the way to a brighter reality.","Bravo! With each focus session, you're expanding your mental capacity for greatness.","Just as muscles get stronger, your capacity for deep work expands with every effort. Keep building!","Because of your efforts today, Future You has a greater capacity for deep focus. Well done!","Way to go! Your deeper focus today is the foundation for a more fulfilling future.","You're limitless. Deep focus is making your vision more achievable than ever before."],sl=new Ha("focusMode:activeState",!1),rl=new Ha("focusMode:transitionState",!1);m.once("appsReady",(()=>{m.commandManager.registerCommandModel(m.models.Command.extend({defaults:{id:"settings.takeATour"},execute:function(){m.Analytics.capture("onboarding take a tour click",{feature:"settings"}),m.commandManager.execute("settings.toggle");const e=()=>{const e=m.conditionalFeatures.featureEnabled("plus");m.cmd("modal.open",e?"PLUS_INTRODUCTION":"FREE_INTRODUCTION",{force:!0,addExperimentDefinitions:!0})};sl.currentValue?C.$emit("flashMessage",{message:"Taking a tour will stop Focus Mode",icon:z,buttons:[{text:"Continue",action:async()=>{m.trigger("focusMode:stop"),await E.delay(5e3),e()},dismissOnClick:!0}],closeButtonEnabled:!0,persist:8e3}):e()}}))}));export{Ga as A,Ya as B,Za as C,Da as D,qr as E,Wa as F,vr as G,yr as H,qa as I,Ba as J,ji as K,Ur as L,el as M,gr as P,Xa as S,fa as T,Ja as V,nl as a,tl as b,Ka as c,Ha as d,sl as e,rl as f,br as g,Ir as h,Tr as i,Er as j,Sr as k,Na as l,il as m,$r as n,Or as o,wr as p,ol as q,Wr as r,fr as s,Hr as t,wa as u,Vr as v,Qa as w,Fi as x,Bi as y,pr as z};