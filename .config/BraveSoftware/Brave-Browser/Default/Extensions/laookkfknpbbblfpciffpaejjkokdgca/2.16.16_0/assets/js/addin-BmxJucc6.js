import{h as t}from"./handlebarLoader-xbtIzd6B.js";const e={compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){var a,o=null!=e?e:t.nullContext||{},l=t.hooks.helperMissing,c="function",r=t.escapeExpression,d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="pop-body settings-detail settings-detail-background">\n\t<div class="settings-detail-header">\n\t\t<span class="icon-wrapper back" title="Back"><i class="icon icon-left"></i></span>\n\t\t<h3>Edit Photo</h3>\n\t</div>\n\n\t<div class="settings-detail-body">\n\t\t<form class="settings-background-edit">\n\t\t\t<div class="image" align="center">\n\t\t\t\t<img class="img-uploaded" align="center" alt="Uploaded Image"/>\n\t\t\t</div>\n\n\t\t\t<h4>Photo Info <span class="optional">Optional</span></h4>\n\n\t\t\t<div class="input-group">\n\t\t\t\t<label>Title</label>\n\t\t\t\t<input type="text" name="title" class="input-title" placeholder="e.g. Location" value="'+r(typeof(a=null!=(a=d(i,"title")||(null!=e?d(e,"title"):e))?a:l)===c?a.call(o,{name:"title",hash:{},data:n,loc:{start:{line:17,column:91},end:{line:17,column:100}}}):a)+'" maxlength="'+r(typeof(a=null!=(a=d(i,"inputLengthMaxHtml")||(null!=e?d(e,"inputLengthMaxHtml"):e))?a:l)===c?a.call(o,{name:"inputLengthMaxHtml",hash:{},data:n,loc:{start:{line:17,column:113},end:{line:17,column:135}}}):a)+'" data-test="detail-custom-input-title">\n\t\t\t</div>\n\n\t\t\t<div class="input-group">\n\t\t\t\t<label>Source</label>\n\t\t\t\t<input type="text" name="source" class="input-source" placeholder="e.g. Photographer Name" value="'+r(typeof(a=null!=(a=d(i,"source")||(null!=e?d(e,"source"):e))?a:l)===c?a.call(o,{name:"source",hash:{},data:n,loc:{start:{line:22,column:102},end:{line:22,column:112}}}):a)+'" maxlength="'+r(typeof(a=null!=(a=d(i,"inputLengthMaxHtml")||(null!=e?d(e,"inputLengthMaxHtml"):e))?a:l)===c?a.call(o,{name:"inputLengthMaxHtml",hash:{},data:n,loc:{start:{line:22,column:125},end:{line:22,column:147}}}):a)+'" data-test="detail-custom-input-source">\n\t\t\t</div>\n\n\t\t\t<div class="actions">\x3c!--\n\t\t\t\t--\x3e<span class="button submit"><i class="loading-icon"></i><i class="error-icon" title="Trouble connecting... Click to retry">!</i>Save</span>\x3c!--\n\t\t\t\t--\x3e<span class="button button-secondary cancel">Cancel</span>\x3c!--\n\t\t\t\t--\x3e<div class="u--right">\x3c!--\n\t\t\t\t\t--\x3e<span class="actions-right button button-secondary button-set-active">Set Active</span>\x3c!--\n\t\t\t\t\t--\x3e<span class="actions-right button button-secondary button-delete">Delete</span>\x3c!--\n\t\t\t\t\t--\x3e<span class="delete-group">\x3c!--\n\t\t\t\t\t\t--\x3e<span class="button button-secondary delete-msg u--not-clickable">Delete?</span>\x3c!--\n\t\t\t\t\t\t--\x3e<span class="button control button-secondary delete-yes">\n\t\t\t\t\t\t\t<i class="icon icon-checkmark">\n\t\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 577.95 469.42"><polygon points="195.09 469.42 137.44 424.64 140.4 421.42 0 298 46.22 245.43 187.68 369.79 526.33 0 577.95 47.28 229.72 427.53 195.09 469.42"/></svg>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</span>\x3c!--\n\t\t\t\t\t\t--\x3e<span class="button control button-secondary delete-no">\n\t\t\t\t\t\t\t<i class="icon icon-x">\n\t\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.97 47.97"><path d="M28.23,24,47.09,5.12A3,3,0,0,0,42.85.88L24,19.74,5.12.88A3,3,0,0,0,.88,5.12L19.74,24,.88,42.85a3,3,0,1,0,4.24,4.24L24,28.23,42.85,47.09a3,3,0,0,0,4.24-4.24Z" transform="translate(0 0)"/></svg>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</span>\x3c!--\n\t\t\t\t\t--\x3e</span>\x3c!--\n\t\t\t\t--\x3e</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n'},useData:!0},i={1:function(t,e,i,s,n){return'<span class="background-stock-source">This photo has been removed and is no longer available to be set active</span>'},3:function(t,e,i,s,n){var a,o=null!=e?e:t.nullContext||{},l=t.hooks.helperMissing,c="function",r=t.escapeExpression,d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<span class="background-stock-source clickable-hack"><a class="background-stock-source-link" href="'+r(typeof(a=null!=(a=d(i,"sourceUrl")||(null!=e?d(e,"sourceUrl"):e))?a:l)===c?a.call(o,{name:"sourceUrl",hash:{},data:n,loc:{start:{line:16,column:103},end:{line:16,column:116}}}):a)+'" target="_blank">'+r(typeof(a=null!=(a=d(i,"attribution")||(null!=e?d(e,"attribution"):e))?a:l)===c?a.call(o,{name:"attribution",hash:{},data:n,loc:{start:{line:16,column:134},end:{line:16,column:149}}}):a)+"</a></span>\n"},5:function(t,e,i,s,n){var a,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<span class="background-stock-source u--selectable">'+t.escapeExpression("function"==typeof(a=null!=(a=o(i,"attribution")||(null!=e?o(e,"attribution"):e))?a:t.hooks.helperMissing)?a.call(null!=e?e:t.nullContext||{},{name:"attribution",hash:{},data:n,loc:{start:{line:18,column:56},end:{line:18,column:71}}}):a)+"</span>\n\t\t\t"},7:function(t,e,i,s,n){var a,o,l=null!=e?e:t.nullContext||{},c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t<span class="button button-clear button-set-active button-set-active-stock clickable-hack">\n\t\t\t\t'+t.escapeExpression("function"==typeof(o=null!=(o=c(i,"labelSelect")||(null!=e?c(e,"labelSelect"):e))?o:t.hooks.helperMissing)?o.call(l,{name:"labelSelect",hash:{},data:n,loc:{start:{line:23,column:4},end:{line:23,column:19}}}):o)+"\n\t\t\t\t"+(null!=(a=c(i,"unless").call(l,null!=e?c(e,"plusUser"):e,{name:"unless",hash:{},fn:t.program(8,n,0),inverse:t.noop,data:n,loc:{start:{line:24,column:4},end:{line:24,column:77}}}))?a:"")+"\n\t\t\t</span>\n"},8:function(t,e,i,s,n){return'<span class="badge badge-plus">PLUS</span>'},compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){var a,o,l=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,r="function",d=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="pop-body settings-detail settings-detail-background">\n\t<div class="settings-detail-header">\n\t\t<span class="icon-wrapper back" title="Back"><i class="icon icon-left"></i></span>\n\t\t<h3>Photo Info</h3>\n\t\t'+(null!=(a=u(i,"unless").call(l,null!=e?u(e,"active"):e,{name:"unless",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n,loc:{start:{line:5,column:2},end:{line:5,column:147}}}))?a:"")+'\n\t</div>\n\n\t<div class="settings-detail-body">\n\t\t<div class="image" align="center">\n\t\t\t<img class="img-uploaded" align="center" alt="Uploaded Image"/>\n\t\t</div>\n\n\t\t<div class="background-stock-info">\n\t\t\t<span class="background-stock-title u--selectable">'+d(typeof(o=null!=(o=u(i,"title")||(null!=e?u(e,"title"):e))?o:c)===r?o.call(l,{name:"title",hash:{},data:n,loc:{start:{line:14,column:54},end:{line:14,column:63}}}):o)+"</span><br>\n"+(null!=(a=u(i,"if").call(l,null!=e?u(e,"sourceUrl"):e,{name:"if",hash:{},fn:t.program(3,n,0),inverse:t.program(5,n,0),data:n,loc:{start:{line:15,column:3},end:{line:19,column:10}}}))?a:"")+'<br>\n\t\t\t<span class="background-stock-date">Last seen '+d(typeof(o=null!=(o=u(i,"displayDate")||(null!=e?u(e,"displayDate"):e))?o:c)===r?o.call(l,{name:"displayDate",hash:{},data:n,loc:{start:{line:20,column:49},end:{line:20,column:64}}}):o)+"</span>\n"+(null!=(a=u(i,"if").call(l,null!=e?u(e,"active"):e,{name:"if",hash:{},fn:t.program(7,n,0),inverse:t.noop,data:n,loc:{start:{line:21,column:3},end:{line:26,column:10}}}))?a:"")+"\t\t</div>\n\t</div>\n</div>\n\n"},useData:!0},s={1:function(t,e,i,s,n){return'<span class="badge badge-plus">Plus</span>'},compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){var a,o,l=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,r="function",d=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\x3c!-- Header --\x3e\n<div class="subpanel-header">\n\t<span class="button-advanced">Settings<i class="icon icon-angle-down"></i></span>\n\t<h3>Photos</h3>\n\t<p class="description">See a new inspiring photo each day</p>\n</div>\n\n\n\x3c!-- Feeds --\x3e\n<div class="smooth-height-wrapper">\n\t<div class="smooth-height-content">\n\t\t<div class="wrapper-advanced">\n\t\t\t<h4>Feeds</h4>\n\t\t\t<ul class="settings-list">\n\t\t\t\t<li class="slide-toggle has-toggle '+d(typeof(o=null!=(o=u(i,"feedMomentumClass")||(null!=e?u(e,"feedMomentumClass"):e))?o:c)===r?o.call(l,{name:"feedMomentumClass",hash:{},data:n,loc:{start:{line:15,column:39},end:{line:15,column:60}}}):o)+'" id="feed-momentum-slider">\n\t\t\t\t\t<span class="toggle-slider"><svg class="toggle-switch" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/></svg></span>\n\t\t\t\t\t<span class="setting-name">Momentum Photos</span>\n\t\t\t\t\t<span class="option-message">See a daily photo from our curated feed</span>\n\t\t\t\t</li>\n\t\t\t\t<li class="slide-toggle has-toggle '+d(typeof(o=null!=(o=u(i,"feedCustomClass")||(null!=e?u(e,"feedCustomClass"):e))?o:c)===r?o.call(l,{name:"feedCustomClass",hash:{},data:n,loc:{start:{line:20,column:39},end:{line:20,column:58}}}):o)+'" id="feed-custom-slider">\n\t\t\t\t\t<span class="toggle-slider"><svg class="toggle-switch" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/></svg></span>\n\t\t\t\t\t<span class="setting-name">'+d(typeof(o=null!=(o=u(i,"labelCustom")||(null!=e?u(e,"labelCustom"):e))?o:c)===r?o.call(l,{name:"labelCustom",hash:{},data:n,loc:{start:{line:22,column:32},end:{line:22,column:47}}}):o)+'</span>\n\t\t\t\t\t<span class="badge badge-plus">PLUS</span>\n\t\t\t\t\t<span class="option-message">Add your own photos and change the photo anytime</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n\n\n\x3c!-- Subnav + add button --\x3e\n<nav class="settings-subnav">\n\t<div class="subnav-titles">\n\t\t<h4 class="custom" data-test="custom-photos-tab">'+d(typeof(o=null!=(o=u(i,"labelCustom")||(null!=e?u(e,"labelCustom"):e))?o:c)===r?o.call(l,{name:"labelCustom",hash:{},data:n,loc:{start:{line:35,column:51},end:{line:35,column:66}}}):o)+'</h4>\x3c!--\n\t\t--\x3e<h4 class="favorites">Favorites</h4>\x3c!--\n\t\t--\x3e<h4 class="history">History</h4>\n\t</div>\n\t<div class="button-add-container">\n\t\t<input type="file" multiple class="add-background file-input">\n\t\t<span class="button button-choose fake-file-input list-add-button">+ Add<span class="u--touch-hide"> Photo '+(null!=(a=u(i,"unless").call(l,null!=e?u(e,"isPlus"):e,{name:"unless",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n,loc:{start:{line:41,column:109},end:{line:41,column:180}}}))?a:"")+'</span>\n\t</div>\n</nav>\n<div class="settings-subnav-placeholder"></div>\n\n\n\x3c!-- Lists --\x3e\n<div class="list-wrapper has-subnav">\n\t<div class="list-body list-body-custom"></div>\n\t<div class="list-body list-body-favorites"></div>\n\t<div class="list-body list-body-history"></div>\n</div>\n\n\n\x3c!-- Submit photo CTA --\x3e\n<div class="submit-photo">\n\t<h4>Submit your photos</h4>\n\t<p class="description">Want to showcase your photography in Momentum?</p>\n\t<div><a href="http://moda.sh/submit-photos" class="button button-small see-photo-guidelines" target="_blank">See photo guidelines</a></div>\n</div>\n'},useData:!0},n={1:function(t,e,i,s,n){return'<span class="photo-removed-text">Photo Removed</span>'},3:function(t,e,i,s,n){var a,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<span class="control control-select" title="'+t.escapeExpression("function"==typeof(a=null!=(a=o(i,"labelSelect")||(null!=e?o(e,"labelSelect"):e))?a:t.hooks.helperMissing)?a.call(null!=e?e:t.nullContext||{},{name:"labelSelect",hash:{},data:n,loc:{start:{line:4,column:66},end:{line:4,column:81}}}):a)+'"><i class="icon-check"></i></span>'},compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){var a,o,l=null!=e?e:t.nullContext||{},c=t.hooks.helperMissing,r="function",d=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<span class="tile-list-image"></span>\n'+(null!=(a=u(i,"unless").call(l,null!=e?u(e,"showSetActive"):e,{name:"unless",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n,loc:{start:{line:2,column:0},end:{line:2,column:89}}}))?a:"")+'\n<span class="tile-list-actions" data-test="tile-list-actions">\n\t'+(null!=(a=u(i,"if").call(l,null!=e?u(e,"showSetActive"):e,{name:"if",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n,loc:{start:{line:4,column:1},end:{line:4,column:123}}}))?a:"")+'\n\t<span class="control control-select-error" title="'+d(typeof(o=null!=(o=u(i,"labelSelectError")||(null!=e?u(e,"labelSelectError"):e))?o:c)===r?o.call(l,{name:"labelSelectError",hash:{},data:n,loc:{start:{line:5,column:51},end:{line:5,column:71}}}):o)+'">\n\t\t<span class="icon-error-wrapper">\n\t\t\t<svg class="icon-error" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" viewBox="0 0 24 24" xml:space="preserve"><g><path d="M12,0C5.373,0,0,5.373,0,12s5.373,12,12,12s12-5.373,12-12S18.627,0,12,0z M12,19.66   c-0.938,0-1.58-0.723-1.58-1.66c0-0.964,0.669-1.66,1.58-1.66c0.963,0,1.58,0.696,1.58,1.66C13.58,18.938,12.963,19.66,12,19.66z    M12.622,13.321c-0.239,0.815-0.992,0.829-1.243,0c-0.289-0.956-1.316-4.585-1.316-6.942c0-3.11,3.891-3.125,3.891,0   C13.953,8.75,12.871,12.473,12.622,13.321z" fill="#D80027" /></g></svg>\n\t\t</span>\n\t</span>\n\t<span class="control control-edit" title="'+d(typeof(o=null!=(o=u(i,"editIconTitle")||(null!=e?u(e,"editIconTitle"):e))?o:c)===r?o.call(l,{name:"editIconTitle",hash:{},data:n,loc:{start:{line:10,column:43},end:{line:10,column:60}}}):o)+'" data-test="control-edit"><i class="'+d(typeof(o=null!=(o=u(i,"editIconClass")||(null!=e?u(e,"editIconClass"):e))?o:c)===r?o.call(l,{name:"editIconClass",hash:{},data:n,loc:{start:{line:10,column:97},end:{line:10,column:114}}}):o)+'" data-test="control-edit-icon"></i></span>\n</span>\n<span class="tile-list-loading"><i class="loading-icon"></i></span>\n'},useData:!0};t({addin:"d52f5584-5033-4a16-866f-e97c7d7ac826",id:"settings_backgrounds",dependencies:["settings"],commands:["background.custom.uploadfiles","settings.panels.backgrounds"]},Object.assign({"./collections/backgrounds.js":t=>{t.collect.Backgrounds=Backbone.Collection.extend({loadedOnce:!1,initialize:function(){this.model=t.models.Background,this.listenTo(this,"reset",this.onReset)},onReset:function(){this.loadedOnce=!0},comparator:function(t,e){var i=this.sortAttribute||"sort_order",s=t.get(i),n=e.get(i);return s==n?0:s<n?this.reverse_sort?1:-1:s>n?this.reverse_sort?-1:1:void 0}})},"./models/background.js":t=>{t.models.Background=Backbone.Model.extend({save:function(t,e){(e=e||{}).patch=!0,Backbone.Model.prototype.save.call(this,t,e)},getThumbnailUrl:function(t){if(t)if(this.blobUrl)t(this.blobUrl);else{var e=this.get("file");if(e){var i=new FileReader,s=this;i.onload=function(e){s.blobUrl=e.target.result,t(s.blobUrl)},i.readAsDataURL(e)}else{var n=this.get("thumbnail_url");n&&t(n)}}},getPreviewUrl:function(t){if(t){var e=this.get("file");if(e){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsDataURL(e)}else{var s=this.get("preview_url");s&&t(s)}}},setActive:function(t,e){var i=m.globals.urlRootApi+"settings/background/active",s={},n=this.get("_id")||this.get("id"),a=this;this.get("is_custom")?s.custom_background_id=n:s.background_id=n,$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(s),url:i}).done((function(i){i&&i.success?(m.trigger("sync:download","background",!0),m.trigger("waitForPhotoActivation",!0),a.get("is_custom")&&m.trigger("background:set-active-custom"),e&&e()):t&&t()})).fail((function(){t()}))}})},"./models/backgroundSettingsManager.js":t=>{t.models.BackgroundSettingsManager=Backbone.Model.extend({feedCustomName:"background-feed-custom",feedMomentumName:"background-feed-momentum",panelTitle:"Background Settings",labelCustom:"My Photos",newModels:[],analytics:new m.Analytics({feature:"photos",is_paid_event:!0}),initialize:function(){m.uploadManager||(m.uploadManager=new m.models.UploadManager),this.settings=new m.models.GenericSettings("background"),this.lastActiveBackground=m.models.activeBackground.activeBackgroundUuid(),this.plusUser=m.conditionalFeatures.featureEnabled("plus"),this.skippedFiles=new Backbone.Collection,this.CustomBackgrounds(),this.listenTo(this.collection,"change:file_upload_uri",this.uploadDestinationReady),this.listenTo(this.collection,"add",this.onCollectionAdd),this.listenTo(this.collection,"reset",this.onCollectionReset),this.listenTo(m,"background:loadSuccessful",this.onBackgroundLoad),this.listenTo(m,"background:favorite",this.onBackgroundFavorited)},onCollectionAdd:function(t){_.findWhere(this.newModels,{id:t.id})||this.newModels.push(t)},onCollectionReset:function(){var t=this;_.each(this.newModels,(function(e){t.collection.contains(e)||t.collection.add(e)}))},onBackgroundLoad:function(t){if(this.lastActiveBackground!==t&&this.history){var e=this.history.at(0);if(e&&e.get("_id")!==t){var i=this.history.findWhere({_id:t});if(!i&&this.collection&&(i=this.collection.findWhere({id:t})),!i&&this.favorites&&(i=this.favorites.findWhere({id:t})),i){var s=i.clone();s.has("_id")||s.set("id",t),s.set("sort_order",s.get("sort_order")+"-"+m.now()),s.prepend=!0,this.history.add(s),this.history.sort(),this.lastActiveBackground=t}}}},onBackgroundFavorited:function(t){if(this.favorites){var e=this.favorites.get(t.id);e?(e.set({is_favorite:t.is_favorite,last_updated:m.date().toISOString()}),this.favorites.sort()):this.favorites.fetch({remove:!1})}},CustomBackgrounds:function(){return this.collection||(this.collection=new t.collect.Backgrounds,this.collection.url=m.globals.urlRoot+"settings/background/backgrounds",this.collection.reverse_sort=!0),this.collection},Favorites:function(){return this.favorites||(this.favorites=new t.collect.Backgrounds,this.favorites.url=m.globals.urlRoot+"backgrounds/favorites",this.favorites.sortAttribute="last_updated",this.favorites.reverse_sort=!0),this.favorites},History:function(){var e=this;return this.history||(this.history=new t.collect.Backgrounds,this.history.url=m.globals.urlRoot+"backgrounds/history",this.history.reverse_sort=!0,this.history.load_more=m.utils.getDateString(),this.history.parse=function(t){return e.history.load_more=t.load_more,t.history}),this.history},LoadMoreHistory:function(){this.history.load_more&&this.history.fetch({remove:!1,data:{priorToDate:this.history.load_more}})},toggleFeedMomentum:function(){this.plusUser&&(this.settings.toggle(this.feedMomentumName),this.analytics.capture("photo feed toggle",{feed:"momentum",new_value:this.settings.get(this.feedMomentumName)}))},toggleFeedCustom:function(){this.plusUser?(this.settings.toggle(this.feedCustomName),this.analytics.capture("photo feed toggle",{feed:"custom",new_value:this.settings.get(this.feedCustomName)})):this.showPlusUpsellNotif()},showPlusUpsellNotif:function(){m.cmd("modal.open","UPSELL_PHOTOS",{eventSource:"settings"})},uploadDestinationReady:function(t){m.uploadManager.uploadFile(t)},uploadFile:function(t,e){var i=this;if(t.type.startsWith("image/"))i.collection.create({filename:t.name,type:t.type,size:t.size,file:t,upload_completed:!1,is_custom:!0,display_date:m.date(),sort_order:m.now()},{success:function(t){e&&e(t)}});else{var s={name:t.name,type:t.type};i.skippedFiles.add(s),i.trigger("fileSkipped",s)}},uploadFiles:function(t,e){var i=this;_.each(t,(function(t){i.uploadFile(t,e)}),this)}})},"./models/uploadManager.js":()=>{m.models.UploadManager=Backbone.Model.extend({initialize:function(){var t=t||{};this.filesUrl=m.globals.urlRootApi+"files",this.collection=new Backbone.Collection,this.listenTo(this.collection,"change:upload_completed",this.uploadCompleted),this.maxBlockSize=null==t.maxBlockSize?262144:t.maxBlockSize,this.blockIdPrefix="block-",this.filesUploading=0,this.totalBytes=0,this.totalBytesUploaded=0,this.bytesPerFile={},this.files={}},uploadCompleted:function(t){var e=this,i=t.get("file_uuid");$.ajax({url:e.filesUrl+"/"+i,contentType:"application/json",type:"PATCH",data:JSON.stringify({upload_completed:!0}),success:function(i){t.set(i),e.collection.remove(t)},error:function(){t.set({upload_failed:!0})}})},uploadFile:function(t){this.collection.add(t);var e=this,i=t.get("file"),s=new FileReader,n=t.get("file_upload_uri"),a=this.maxBlockSize,o=0,l=0,c=[],r=0,d=t.get("size");function u(){if(l>0){var r=i.slice(o,o+a),d=e.blockIdPrefix+e.pad(c.length,6);c.push(btoa(d)),s.readAsArrayBuffer(r),o+=a,(l-=a)<a&&(a=l)}else!function(){var e,s=n+"&comp=blocklist",a="<?xml version='1.0' encoding='utf-8'?><BlockList>";for(e=0;e<c.length;e++)a+="<Latest>"+c[e]+"</Latest>";a+="</BlockList>",$.ajax({url:s,type:"PUT",data:a,modifyHeaders:function(t){return delete t.Authorization,delete t["X-Momentum-ClientDate"],delete t["X-Momentum-ClientId"],delete t["X-Momentum-Version"],t["x-ms-blob-content-type"]=i.type,t},success:function(){t.set("upload_completed",!0)},error:function(){t.set({upload_failed:!0})}})}()}this.totalBytes+=d,d<a&&(a=d),l=d,s.onloadend=function(e){if(e.target.readyState==FileReader.DONE){var s=n+"&comp=block&blockid="+c[c.length-1],a=new Uint8Array(e.target.result),o=a.length;$.ajax({url:s,type:"PUT",data:a,processData:!1,modifyHeaders:function(t){return delete t.Authorization,delete t["X-Momentum-ClientDate"],delete t["X-Momentum-ClientId"],delete t["X-Momentum-Version"],t["x-ms-blob-type"]="BlockBlob",t["x-ms-blob-content-type"]=i.type,t},success:function(){r+=o,t.set({fileprogress:parseInt(r/d*100)}),u()},error:function(){t.set({upload_failed:!0})}})}},u()},pad:function(t,e){for(var i=""+t;i.length<e;)i="0"+i;return i}})},"./views/custom.js":t=>{t.views.Custom=Backbone.View.extend({template:t.templates.custom,initialize:function(e){this.main=e.main,this.subViews=[],m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.collection=m.backgroundSettingsManager.CustomBackgrounds(),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.onCollectionAdd),this.listenTo(this.collection,"update",this.handleCollectionUpdate)},render:function(){return this.$el.html(this.template()),this.main.setSubnavViewVars(this),this.main.expiredPlusUser||this.main.plusUser?this.collection.loadedOnce?this.addAll():this.collection.fetch({reset:!0}):this.$empty.removeClass("loading"),this},addAll:function(){m.settingsUtils.subnavAddAll(this,!1,this.$backgroundsList,this.main.syncActiveItem.bind(this.main))},addOne:function(e,i){var s=new t.views.Tile({model:e,main:this.main,parent:this,subnav:"custom"});m.settingsUtils.subnavAddOne(this,s,this.$backgroundsList,i,!1),s.$el.toggleClass("uploading",!e.get("upload_verified")||!e.get("upload_completed"))},onCollectionAdd:function(t){this.addOne(t,!0)},handleCollectionUpdate:function(){m.settingsUtils.updateEmptyState(this)}})},"./views/detailCustom.js":t=>{var e=t.dependencies.settings;t.views.DetailCustom=e.views.SettingsPanel.extend({attributes:{id:"background-detail-custom-panel",class:"settings-view settings-online settings-background-detail","data-test":"settings-backgrounds"},panelid:"backgrounds-detail-custom",template:t.templates.detailCustom,analytics:new m.Analytics({feature:"photos",is_paid_event:!0}),events:{"click .back":"handleClickBack","keyup .settings-background-edit":"handleKeyupEsc","keypress .input-title":"handleKeypressEnterTitle","keypress .input-source":"handleKeypressEnterSource","click .submit":"processEditForm","click .cancel":"handleClickCancel","click .button-set-active":"handleClickSetActive","click .button-delete":"toggleDeleteConf","click .delete-yes":"deleteItem","click .delete-no":"toggleDeleteConf"},initialize:function(e){m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.main=e.main,this.model=e.backgroundModel,this.listenTo(m,"background:loadSuccessful",this.onBackgroundLoadSuccessful)},render:function(){var t={inputLengthMaxHtml:this.main.inputLengthMaxHtml,source:this.model.get("source"),title:this.model.get("title")};return this.$el.html(this.template(t)),this.setViewVars(),this.focusFirstInput(),this.main.detailUpdateSetActiveButton(this),this.model.getPreviewUrl(this.main.detailShowUploadedImage.bind(this)),this},setViewVars:function(){this.$backgroundEditForm=this.$(".settings-background-edit"),this.$inputTitle=this.$(".input-title"),this.$inputSource=this.$(".input-source"),this.$actionsRight=this.$(".actions-right"),this.$deleteGroup=this.$(".delete-group")},focusFirstInput:function(){var t=this;setTimeout((function(){t.$inputTitle.trigger("focus")}),0),m.settingsUtils.moveCursorToEndOfInput(this.$inputTitle)},handleClickBack:function(t){this.main.detailHandleClickBack(t)},handleKeyupEsc:function(t){m.settingsUtils.handleKeyupEsc(t,this.main.detailGotoMain.bind(this))},handleKeypressEnterTitle:function(t){m.settingsUtils.handleKeypressEnter(t,this.processEditForm.bind(this),this.$inputTitle)},handleKeypressEnterSource:function(t){m.settingsUtils.handleKeypressEnter(t,this.processEditForm.bind(this),this.$inputSource)},processEditForm:function(t){if(t&&t.preventDefault(),!this.$backgroundEditForm.hasClass("loading")){var e=this,i=this.$inputTitle.val().trim(),s=this.$inputSource.val().trim();this.$backgroundEditForm.removeClass("failed").addClass("loading"),this.model.save({title:i,source:s},{wait:!0,success:function(){e.$backgroundEditForm.removeClass("loading"),m.trigger("sync:download","background",!0),m.trigger("photoDetailsChanged",{id:e.model.get("id"),title:i,source:s}),e.main.detailGotoMain()},error:function(){e.$backgroundEditForm.removeClass("loading").addClass("failed")}}),this.analytics.capture("photo edit")}},handleClickCancel:function(t){t.stopPropagation(),this.main.detailGotoMain()},handleClickSetActive:function(){this.main.detailSetActive(this)},toggleDeleteConf:function(){this.$actionsRight.mToggle("inline-block"),this.$deleteGroup.mToggle("inline-block")},deleteItem:function(t){var e=this;t.stopPropagation(),this.model.destroy({success:function(){m.trigger("sync:download","background",!0),e.main.detailGotoMain()}}),this.analytics.capture("photo delete")},onBackgroundLoadSuccessful:function(){this.main.detailUpdateSetActiveButton(this)}})},"./views/detailStock.js":t=>{var e=t.dependencies.settings;t.views.DetailStock=e.views.SettingsPanel.extend({attributes:{id:"background-detail-stock-panel",class:"settings-view settings-background-detail"},panelid:"backgrounds-detail-stock",template:t.templates.detailStock,events:{"click .back":"handleClickBack","click .button-set-active":"handleClickSetActive","click .background-stock-source-link":"captureSourceClick"},initialize:function(e){m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.main=e.main,this.model=e.backgroundModel,this.listenTo(m,"background:loadSuccessful",this.onBackgroundLoadSuccessful)},render:function(){var t={attribution:this.model.get("attribution"),displayDate:m.utils.getFriendlyDate(this.model.get("display_date")),labelSelect:this.main.labelSelect,plusUser:this.main.plusUser,sourceUrl:this.model.get("sourceUrl"),title:this.model.get("title"),active:this.model.get("active")};return this.$el.html(this.template(t)),this.main.detailUpdateSetActiveButton(this),this.model.getPreviewUrl(this.main.detailShowUploadedImage.bind(this)),this},handleClickBack:function(t){this.main.detailHandleClickBack(t)},handleClickSetActive:function(){this.main.detailSetActive(this)},onBackgroundLoadSuccessful:function(){this.main.detailUpdateSetActiveButton(this)},captureSourceClick:function(){m.Analytics.capture("photo source click",{custom:!1,photo_location:this.model.get("title").toLowerCase(),has_flight_link:!!this.model.get("flight_link"),location:"settings"})}})},"./views/favorites.js":t=>{t.views.Favorites=Backbone.View.extend({template:t.templates.favorites,initialize:function(e){this.main=e.main,this.subViews=[],m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.collection=m.backgroundSettingsManager.Favorites(),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.onCollectionAdd),this.listenTo(this.collection,"change:is_favorite",this.favoriteStateChanged)},render:function(){return this.$el.html(this.template()),this.main.setSubnavViewVars(this),this.collection.loadedOnce?this.addAll():this.collection.fetch({reset:!0}),this},addAll:function(){m.settingsUtils.subnavAddAll(this,!1,this.$backgroundsList,this.main.syncActiveItem.bind(this.main))},addOne:function(e,i){var s=new t.views.Tile({model:e,main:this.main,parent:this,subnav:"favorites"});m.settingsUtils.subnavAddOne(this,s,this.$backgroundsList,i,!1)},onCollectionAdd:function(t){this.addOne(t,!0),this.main.syncActiveItem()},handleCollectionUpdate:function(){m.settingsUtils.updateEmptyState(this)},favoriteStateChanged:function(t){if(t.get("is_favorite"))this.addOne(t,!0),this.main.syncActiveItem();else{var e=null;if(_.find(this.subViews,(function(i){return!(!i||i.model!==t)&&(e=i,i.destroy(),!0)})),e){var i=this.subViews.indexOf(e);i&&this.subViews.splice(i,1)}}}})},"./views/history.js":t=>{t.views.History=Backbone.View.extend({template:t.templates.history,events:{"click .load-more-button":"loadMore"},initialize:function(e){this.main=e.main,this.subViews=[],m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.collection=m.backgroundSettingsManager.History(),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"update",this.handleCollectionUpdate)},render:function(){var t={plusUser:this.main.plusUser};return this.$el.html(this.template(t)),this.main.setSubnavViewVars(this),this.collection.loadedOnce?this.addAll():this.collection.fetch({reset:!0}),this},addAll:function(){m.settingsUtils.subnavAddAll(this,!0,this.$backgroundsList,this.main.syncActiveItem.bind(this.main),m.settingsUtils.subnavHistoryUpdateLoadMore.bind(this))},addOne:function(e){var i=new t.views.Tile({model:e,main:this.main,parent:this,subnav:"history"});m.settingsUtils.subnavAddOne(this,i,this.$backgroundsList,e.prepend,!1)},onCollectionAdd:function(t){this.addOne(t)},handleCollectionUpdate:function(){m.settingsUtils.updateEmptyState(this),this.main.syncActiveItem()},loadMore:function(t){m.settingsUtils.subnavHistoryLoadMore(t,this,m.backgroundSettingsManager)}})},"./views/main.js":t=>{var e=t.dependencies.settings;t.views.Main=e.views.SettingsPanel.extend({attributes:{id:"settings-backgrounds",class:"settings-view settings-content settings-backgrounds","data-test":"settings-backgrounds"},inputLengthMaxHtml:75,labelDeselect:"(Already Active)",labelSelect:"Set Active",labelSelectError:"Error activatingâ€¦ Click to retry",panelid:"backgrounds",subnav:void 0,template:t.templates.main,analytics:new m.Analytics({feature:"photos"}),events:{"click .button-advanced":"toggleAdvanced","click #feed-momentum-slider":"toggleFeedMomentum","click #feed-custom-slider":"toggleFeedCustom","click .add-background":"handleClickAdd","change .file-input":"fileInputChanged","click .subnav-titles .custom":"selectCustom","click .subnav-titles .favorites":"selectFavorites","click .subnav-titles .history":"selectHistory","click .see-photo-guidelines":"onSeePhotoGuidelinesClick"},initialize:function(e){e&&(this.subnav=e.subnav),m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),this.manager=m.backgroundSettingsManager,this.settings=this.manager.settings,this.plusUser=m.conditionalFeatures.featureEnabled("custom-bg"),this.expiredPlusUser=m.conditionalFeatures.featureEnabled("custom-bg-degraded"),this.listenTo(this.settings,"change",this.updateSettings),this.listenTo(this.settings,"change:allocation_changed",this.allocationChanged),this.listenTo(m,"background:loadSuccessful",this.onBackgroundLoadSuccessful),this.listenTo(m,"background:set-active-custom",this.onBackgroundSetActiveCustom),this.plusUser&&this.settings.fetch(),void 0===this.subnav&&this.analytics.capture("settings panel show")},render:function(){var t={isPlus:this.plusUser,labelCustom:this.manager.labelCustom};return this.$el.html(this.template($.extend(t,m.settingsUtils.getInitialFeedSettings(this.manager)))),this.setViewVars(),"favorites"===this.subnav?this.renderFavorites():"history"===this.subnav?this.renderHistory():"custom"===this.subnav||this.plusUser?this.renderCustom():this.renderHistory(),this.plusUser||this.updateForFreeUser(),this},setViewVars:function(){m.settingsUtils.setFeedVars(this),this.$customList=this.$(".list-body-custom"),this.$favoritesList=this.$(".list-body-favorites"),this.$historyList=this.$(".list-body-history")},setSubnavViewVars:function(t){t.$empty=t.$(".settings-empty"),t.$backgroundsList=t.$(".backgrounds-list")},selectCustom:function(t){this.selectSubnav("custom",t,this.renderCustom.bind(this))},selectFavorites:function(t){this.selectSubnav("favorites",t,this.renderFavorites.bind(this))},selectHistory:function(t){this.selectSubnav("history",t,this.renderHistory.bind(this))},selectSubnav:function(t,e,i){e.stopPropagation(),this.subnav!==t?i():m.utils.toggleClassTwice($(e.delegatedTarget),"active")},renderCustom:function(){this.customView||(this.customView=new t.views.Custom({el:this.$customList,main:this})),m.settingsUtils.renderSubnav(this,this.customView,"custom")},renderFavorites:function(){this.favoritesView||(this.favoritesView=new t.views.Favorites({el:this.$favoritesList,main:this})),m.settingsUtils.renderSubnav(this,this.favoritesView,"favorites")},renderHistory:function(){this.historyView||(this.historyView=new t.views.History({el:this.$historyList,main:this})),m.settingsUtils.renderSubnav(this,this.historyView,"history")},updateSettings:function(){m.settingsUtils.updateFeedSettings(this)},allocationChanged:function(){this.settings.has("allocation_changed")&&m.trigger("sync:download","background",!0)},onBackgroundLoadSuccessful:function(){this.syncActiveItem()},syncActiveItem:function(){var t=m.models.activeBackground.activeBackgroundUuid();this.syncActiveItemHelper(this.customView,t),this.syncActiveItemHelper(this.favoritesView,t),this.syncActiveItemHelper(this.historyView,t)},syncActiveItemHelper:function(t,e){void 0!==t&&(t.$el.find(".tile-list-item.active").removeClass("active").find(".control-select").attr("title",this.labelSelect),t.$el.find('[data-background-id="'+e+'"]').first().addClass("active").find(".control-select").attr("title",this.labelDeselect),t.setActiveInProgress&&(t.setActiveInProgress=!1))},onBackgroundSetActiveCustom:function(){this.settings.set(this.manager.feedCustomName,!0)},toggleAdvanced:function(){m.settingsUtils.toggleAdvanced(this)},toggleFeedMomentum:function(t){t.stopPropagation(),this.manager.toggleFeedMomentum()},toggleFeedCustom:function(t){t.stopPropagation(),this.manager.toggleFeedCustom()},updateForFreeUser:function(){this.$feedMomentumSlider.addClass("fixed")},handleClickAdd:function(t){this.plusUser||(t.preventDefault(),this.manager.showPlusUpsellNotif())},fileInputChanged:function(t){var e=t.target.files;e.length&&("custom"!==this.subnav&&this.renderCustom(),this.manager.uploadFiles(e,(function(){m.Analytics.capture("photo add",{drag_and_drop:!1})})))},detailGotoDetail:function(t,e,i){var s=t?"custom":"stock";m.commandManager.execute("settings.display",null,{backgroundModel:this.detailGetModel(t,e,i),main:this,nav:"background-settings",section:"background-settings-detail-"+s})},detailGetModel:function(t,e,i){var s;return t?s=this.manager.CustomBackgrounds().get(i):"favorites"===this.subnav?s=this.manager.Favorites().get(i):"history"===this.subnav&&this.manager.History().each((function(t){t.get("_id")===i&&(s=t)})),s.active=e,s},detailShowUploadedImage:function(t){this.$(".img-uploaded").attr("src",t).css("display","inline-block")},detailHandleClickBack:function(t){t.stopPropagation(),this.detailGotoMain()},detailGotoMain:function(){m.commandManager.execute("settings.display",null,{section:"background-settings",subnav:this.subnav})},detailSetActive:function(t){this.plusUser?(t.model.setActive(),this.analytics.capture("photo set active",{is_paid_event:!0,custom:t.model.get("is_custom"),location:"detail"})):this.manager.showPlusUpsellNotif()},detailUpdateSetActiveButton:function(t){var e=t.model.id||t.model.get("_id"),i=m.models.activeBackground.activeBackgroundUuid()===e;t.$(".button-set-active").attr("title",i?this.labelDeselect:"").toggleClass("u--not-clickable",i)},onSeePhotoGuidelinesClick:function(){this.analytics.capture("photo guidelines click")}})},"./views/tile.js":t=>{t.views.Tile=Backbone.View.extend({attributes:{class:"tile-list-item","data-test":"tile-list-item"},tagName:"div",template:t.templates.tile,events:{"click .control-edit":"handleClickEdit","click .control-select":"handleClickSetActive","click .control-select-error":"handleClickSetActive",click:"handleClickTile"},initialize:function(t){this.main=t.main,this.parent=t.parent,this.manager=this.main.manager,this.backgroundId=this.model.get("_id")||this.model.id,this.listenTo(this.model,"change:upload_completed",this.uploadComplete),this.listenTo(this.model,"change:fileprogress",this.updateFileProgress),this.listenTo(m,"background:loadSuccessful",this.onBackgroundLoadSuccessful),this.listenTo(m,"background:error",this.onBackgroundError);var e=document.createElement("img"),i=this;e.addEventListener("error",(function(){i.$el.addClass("hidden")}));var s=this.model.get("thumbnail_url");s&&e.setAttribute("src",s)},render:function(){this.active=this.model.get("active"),this.is_custom=this.model.get("is_custom");var t=this,e={editIconClass:this.is_custom?"icon-edit":"icon-help",editIconTitle:this.is_custom?"Edit":"Info",labelSelectError:this.main.labelSelectError,labelSelect:this.main.labelSelect,showSetActive:!0===this.active||this.model.has("upload_completed")};return this.$el.html(this.template(e)),this.setViewVars(),this.model.has("upload_completed")&&!this.model.get("upload_completed")&&this.$editControl.hide(),this.setBackgroundIdAttribute(),this.setTitleAttribute(),this.model.getThumbnailUrl((function(e){t.$el.find(".tile-list-image").css("background-image",'url("'+e+'")'),!1===t.active&&t.$el.find(".tile-list-image").addClass("tile-not-active")})),this},setViewVars:function(){this.$editControl=this.$(".control-edit")},uploadComplete:function(){this.backgroundId=this.model.get("_id")||this.model.id,this.setBackgroundIdAttribute(),this.$el.removeClass("uploading").css("clip-path","none"),this.main.syncActiveItem(),this.model.get("upload_completed")&&this.$editControl.css("display","inline-block")},updateFileProgress:function(){var t=this.model.get("fileprogress"),e=100-t;this.$el.css("clip-path","inset(0 "+e+"% 0 0)"),100===t&&this.uploadComplete()},onBackgroundLoadSuccessful:function(){this.removeActivatingState()},onBackgroundError:function(){this.removeActivatingState()},removeActivatingState:function(){this.setActiveInProgress&&(this.setActiveInProgress=!1,this.parent.setActiveInProgress=!1,this.$el.removeClass("activating"))},setBackgroundIdAttribute:function(){this.$el.attr("data-background-id",this.model.id||this.model.get("_id"))},setTitleAttribute:function(){var t=this.model.get("title"),e=m.utils.getFriendlyDate(this.model.get("display_date"));this.$el.attr("title",t?t+" ("+e+")":e)},handleClickTile:function(t){t.stopPropagation(),this.main.plusUser?this.setBackgroundActive():this.gotoDetail()},setBackgroundActive:function(){if(!1!==this.active&&!this.backgroundAlreadyActive()&&!this.parent.setActiveInProgress){this.$el.removeClass("set-active-failed").addClass("activating"),this.setActiveInProgress=!0,this.parent.setActiveInProgress=!0;var t=this;this.model.setActive((function(){t.removeActivatingState(),t.$el.addClass("set-active-failed")}),(function(){m.Analytics.capture("photo set active",{feature:"photos",is_paid_event:!0,custom:t.is_custom,location:"list"})}))}},backgroundAlreadyActive:function(){var t=m.collect.backgrounds.getActiveItem();return!(!t||this.backgroundId!==t.get("_id"))&&(m.utils.toggleClassTwice(this.$el,"already-active"),!0)},handleClickSetActive:function(t){t.stopImmediatePropagation(),this.main.plusUser?this.setBackgroundActive():this.manager.showPlusUpsellNotif()},handleClickEdit:function(t){t.stopImmediatePropagation(),this.gotoDetail()},gotoDetail:function(){this.main.detailGotoDetail(this.is_custom,this.active,this.backgroundId)},destroy:function(){this.remove(),this.unbind()}})}}),Object.assign({"./templates/custom.hbs":{compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){return'<div class="settings-empty loading">\n\t<p class="settings-empty-loading"><i class="loading-icon"></i>Loading...</p>\n\t<p class="settings-empty-title">Personalize your dashboard with your own photos</p>\n\t<p class="settings-empty-description">Drag and drop a photo or click + Add Photo</p>\n</div>\n\n<div class="tile-list backgrounds-list hidden" data-test="custom-photos-list"></div>\n'},useData:!0},"./templates/detailCustom.hbs":e,"./templates/detailStock.hbs":i,"./templates/favorites.hbs":{compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){return'<div class="settings-empty loading">\n\t<p class="settings-empty-loading"><i class="loading-icon"></i>Loading...</p>\n\t<p class="settings-empty-title">No favorite photos yet</p>\n\t<p class="settings-empty-description">Click the heart icon under a photo caption to start your collection</p>\n</div>\n\n<div class="tile-list backgrounds-list hidden"></div>\n'},useData:!0},"./templates/history.hbs":{compiler:[8,">= 4.3.0"],main:function(t,e,i,s,n){return'<div class="settings-empty loading">\n\t<p class="settings-empty-loading"><i class="loading-icon"></i>Loading...</p>\n\t<p class="settings-empty-title">No photo history yet</p>\n\t<p class="settings-empty-description">Your past photos will appear here</p>\n</div>\n\n<div class="tile-list backgrounds-list hidden"></div>\n<div class="load-more">\n\t<span class="button load-more-button">Load More</span>\n</div>\n'},useData:!0},"./templates/main.hbs":s,"./templates/tile.hbs":n}),(t=>{m.commandManager&&(m.commandManager.registerCommand("settings.panels.backgrounds",(function(e){return new t.views.Main(e)})),m.commandManager.registerCommand("settings.panels.backgrounds.detailCustom",(function(e){if(e)return new t.views.DetailCustom(e)})),m.commandManager.registerCommand("settings.panels.backgrounds.detailStock",(function(e){if(e)return new t.views.DetailStock(e)})),m.commandManager.registerCommand("background.custom.uploadfiles",(function(e){e.length&&(m.backgroundSettingsManager||(m.backgroundSettingsManager=new t.models.BackgroundSettingsManager),m.commandManager.executeAsync("settings.display",null,{section:"background-settings",cmd:"settings.panels.backgrounds"}),1==e.length?m.backgroundSettingsManager.uploadFile(e[0],(function(t){t.getThumbnailUrl((function(e){var i=new m.models.BackgroundBase({_id:t.id,title:"",attribution:" ",source:"",filename:e});m.models.activeBackground.setActiveBackground(i),t.get("upload_verified")?t.setActive((function(){})):t.listenToOnce(t,"change:upload_verified",(function(){t.setActive((function(){}))})),m.Analytics.capture("photo add",{drag_and_drop:!0})}))})):m.backgroundSettingsManager.uploadFiles(e,(function(){m.Analytics.capture("photo add",{drag_and_drop:!0})})))}))),t.styles.style(),m.trigger("settings:register:nav",{id:"background-settings",title:"Backgrounds",cmd:"settings.panels.backgrounds",position:36}),m.trigger("settings:register:panel",{id:"background-settings-detail-custom",section:"background-settings-detail-custom",cmd:"settings.panels.backgrounds.detailCustom"}),m.trigger("settings:register:panel",{id:"background-settings-detail-stock",section:"background-settings-detail-stock",cmd:"settings.panels.backgrounds.detailStock"})}));