import{B as e,a as t}from"./BaseDropdownContent-BSCj37As.js";import{w as o}from"./portal-vue.esm-SV1wohGy.js";import{_ as n}from"./icon-ellipsis-D3jS4u3x.js";import{n as s}from"./icon-alert--q0yLTMi.js";import{u as a}from"./preload-helper-DmNsytk6.js";const i=s({name:"PortalToggle",props:{tag:{type:String,default:"div"},id:{type:String,required:!0},portalTargetName:{type:String,required:!0},disableClickOutside:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},hoverContent:{type:Boolean,default:!0},hoverShowContentDelay:{type:Number,default:0},hoverHideContentDelay:{type:Number,default:200},disableClickOnHover:{type:Boolean,default:!1},mobileToggleHidden:{type:Boolean,default:!1}},emits:["toggle"],data:()=>({contentOpen:!1}),computed:{clickHandler(){return this.disableClickOnHover?()=>{}:e=>{e.stopPropagation(),this.toggleContent()}},clickOutsideHandler(){return this.disableClickOutside?()=>{}:this.closeContent},mouseEnterHandler(){return this.hover?this.createMouseEnterTimeout:()=>{}},mouseLeaveHandler(){return this.hover?this.hoverContent?this.createMouseLeaveTimeout:this.closeContent:()=>{}},contentMouseLeaveHandler(){return this.hover?this.closeUnlessMouseInToggle:()=>{}},toggleActive(){return!this.$touch||!this.mobileToggleHidden}},watch:{disabled(){this.clearToggleMouseEnterTimeout(),this.clearToggleAndContentMouseLeaveTimeout()}},destroyed(){this.clearToggleMouseEnterTimeout(),this.clearToggleAndContentMouseLeaveTimeout(),this.closeContentInPortalTarget(),this.$emit("toggle",!1)},updated(){this.contentOpen?this.openContentInPortalTarget():this.closeContentInPortalTarget()},methods:{toggleContent(){this.disabled||(this.contentOpen=!this.contentOpen,this.$emit("toggle",this.contentOpen))},closeContent(){this.clearToggleMouseEnterTimeout(),this.contentOpen=!1,this.$emit("toggle",!1)},openContent(){this.disabled||(this.clearToggleAndContentMouseLeaveTimeout(),this.contentOpen=!0,this.$emit("toggle",!0))},openContentInPortalTarget(){var e,t;this.$refs.toggle.children.length>1&&console.warn(`[PORTAL-TOGGLE: ${this.portalTargetName}] There is more than one toggle child! Only the first will be used.`);const n=null==(t=(e=this.$scopedSlots).content)?void 0:t.call(e,{close:this.closeContent,mouseLeave:this.contentMouseLeaveHandler,mouseEnter:this.clearToggleAndContentMouseLeaveTimeout,target:this.$refs.toggle.children[0]});if(n.length<=0)throw new Error(`[PORTAL-TOGGLE: ${this.portalTargetName}] Slot "content" does not exist!`);if(!o.hasTarget(this.portalTargetName))throw new Error(`[PORTAL-TOGGLE: ${this.portalTargetName}] Portal "${this.portalTargetName}" does not exist!`);o.open({to:this.portalTargetName,from:`${this.portalTargetName}-${this.id}`,passengers:n})},closeContentInPortalTarget(){o.close({to:this.portalTargetName,from:`${this.portalTargetName}-${this.id}`})},closeUnlessMouseInToggle(e){this.$refs.toggle.contains(e.relatedTarget)||this.createContentMouseLeaveTimeout()},createMouseEnterTimeout(){this.mouseInToggleTimeout=setTimeout(this.openContent,this.hoverShowContentDelay)},createMouseLeaveTimeout(){this.mouseInContentTimeout=setTimeout(this.closeContent,this.hoverHideContentDelay)},createContentMouseLeaveTimeout(){this.mouseOutContentTimeout=setTimeout(this.closeContent,this.hoverHideContentDelay)},clearToggleMouseEnterTimeout(){clearTimeout(this.mouseInToggleTimeout)},clearToggleAndContentMouseLeaveTimeout(){clearTimeout(this.mouseOutContentTimeout),clearTimeout(this.mouseInContentTimeout)}}},(function(){var e=this,t=e._self._c;return t(e.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutsideHandler,expression:"clickOutsideHandler"}],ref:"toggle",tag:"component",staticClass:"portal-toggle",class:[{open:e.contentOpen}],on:{click:e.clickHandler,mouseenter:function(t){return t.stopPropagation(),e.mouseEnterHandler.apply(null,arguments)},mouseleave:function(t){return t.stopPropagation(),e.mouseLeaveHandler.apply(null,arguments)}}},[e.toggleActive?e._t("toggle",(function(){return[t("div",{staticClass:"icon-wrapper more-toggle"},[t("inline-svg",{staticClass:"icon icon-ellipsis",attrs:{src:n}})],1)]})):e._e()],2)}),[],!1,null,"8e6127f1").exports;const r=s({name:"BaseDropdown",components:{BaseDropdownContent:e,ToastMenuContainer:s({name:"ToastMenuContainer",props:{dataOb:{type:String,default:""},sectionTitle:{type:String,default:""},closeToast:{type:Function,required:!0}},methods:{hasHeader(){return!!this.$slots.header}}},(function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"toast-menu",duration:"200",appear:""}},[t("div",{staticClass:"toast-menu-container reset-app-styles",on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}},[t("div",{staticClass:"toast-menu-overlay",on:{click:e.closeToast}}),t("div",{staticClass:"toast-menu-content",attrs:{"data-test":"toast"}},[e.hasHeader()?[t("div",{staticClass:"toast-header"},[e._t("header")],2),t("div",{staticClass:"line header-line"})]:e._e(),e.sectionTitle?t("div",{staticClass:"section-title"},[e._v(e._s(e.sectionTitle))]):e._e(),t("ul",{staticClass:"toast-list",attrs:{"data-test":"toast-options"}},[e._t("default")],2),t("div",{staticClass:"button button-close",on:{click:e.closeToast}},[t("span",{staticClass:"button-label"},[e._v("Close")])])],2)])])}),[],!1,null,"abe4c359").exports,BaseDropdownContainer:t,PortalToggle:i},props:{tag:i.props.tag,disabled:i.props.disabled,disableClickOutside:i.props.disableClickOutside,hover:i.props.hover,hoverContent:i.props.hoverContent,hoverShowContentDelay:i.props.hoverShowContentDelay,hoverHideContentDelay:i.props.hoverHideContentDelay,disableClickOnHover:i.props.disableClickOnHover,mobileToggleHidden:i.props.mobileToggleHidden,containerClass:{type:String,default:"app"},useToastMobile:{type:Boolean,default:!0},containerDataTest:{type:String,default:""},position:t.props.position,positionOffset:t.props.positionOffset,alignment:t.props.alignment,alignmentOffset:t.props.alignmentOffset,nipple:t.props.nipple,nippleAlignmentOffset:t.props.nippleAlignmentOffset,minWidth:t.props.minWidth,width:t.props.width,maxWidth:t.props.maxWidth,disableCloseEvent:t.props.disableCloseEvent,disablePointerEvents:t.props.disablePointerEvents,windowEdgePadding:t.props.windowEdgePadding,scrollTarget:t.props.scrollTarget,boundScrollX:t.props.boundScrollX,boundScrollY:t.props.boundScrollY},emits:["toggle"],setup:()=>({uuid:a()}),computed:{useDropdownContainer(){return!this.$touch||!this.useToastMobile}},methods:{closeDropdown(){this.$refs["portal-toggle"].closeContent()},openDropdown(){this.$refs["portal-toggle"].openContent()},forceUpdateDropdownPosition(){var e;null==(e=this.$refs["dropdown-container"])||e.onResize()}}},(function(){var e=this,t=e._self._c;return t("portal-toggle",{ref:"portal-toggle",staticClass:"base-dropdown",attrs:{id:e.uuid,tag:e.tag,"portal-target-name":e.useDropdownContainer?"dropdown-portal":"toast-menu-portal","disable-click-outside":e.disableClickOutside,disabled:e.disabled,hover:e.hover,"hover-content":e.hoverContent,"disable-click-on-hover":e.disableClickOnHover,"hover-show-content-delay":e.hoverShowContentDelay,"hover-hide-content-delay":e.hoverHideContentDelay,"mobile-toggle-hidden":e.mobileToggleHidden},on:{toggle:function(t){return e.$emit("toggle",t)}},scopedSlots:e._u([{key:"toggle",fn:function(){return[e._t("toggle")]},proxy:!0},{key:"content",fn:function({target:o,close:n,mouseLeave:s,mouseEnter:a}){return[e.useDropdownContainer?t("transition",{attrs:{name:"base-dropdown-transition-fade",appear:""}},[t("base-dropdown-container",e._b({key:e.uuid,ref:"dropdown-container",class:e.containerClass,attrs:{"close-dropdown":n,target:o},on:{mouseleave:s,mouseenter:a}},"base-dropdown-container",e.$props,!1),[e._t("contentOverride",(function(){return[t("base-dropdown-content",{attrs:{"data-test":e.containerDataTest||void 0}},[e._t("default")],2)]}))],2)],1):t("toast-menu-container",{class:e.containerClass,attrs:{"close-toast":n},scopedSlots:e._u([{key:"header",fn:function(){return[e._t("toastHeader")]},proxy:!0}],null,!0)},[e._t("contentOverride",(function(){return[e._t("default")]}))],2)]}}],null,!0)})}),[],!1,null,null).exports;export{r as B};