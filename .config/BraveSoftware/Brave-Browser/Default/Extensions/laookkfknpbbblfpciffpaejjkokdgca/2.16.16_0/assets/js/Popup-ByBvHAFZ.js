import{e as t,n as e}from"./icon-alert--q0yLTMi.js";import{B as a}from"./BaseIcon-B5UifJH3.js";import{B as i,a as n}from"./BaseDropdownContent-BSCj37As.js";import{N as o}from"./constants-CALDQiUE.js";const s=e({name:"Popup",components:{BaseDropdownContent:i,BaseDropdownContainer:n,BaseIcon:a},props:{id:{type:String,required:!0},targetElementSelector:{type:String,required:!0},elementReadyEvent:{type:String,default:""},position:n.props.position,targetDistance:{type:Number,default:-o/2},alignment:n.props.alignment,alignmentOffset:n.props.alignmentOffset,nippleAlignmentOffset:n.props.nippleAlignmentOffset,headerText:{type:String,default:""},bodyText:{type:String,default:""},ctaText:{type:String,default:"Learn moreâ€¦"},ctaCallback:{type:Function,default:null},ctaClasses:{type:String,default:""},ctaIcon:{type:String,default:""},ctaTriggersComplete:{type:Boolean,default:!1},secondaryText:{type:String,default:""},secondaryCallback:{type:Function,default:null},secondaryClasses:{type:String,default:""},secondaryIcon:{type:String,default:""},secondaryTriggersComplete:{type:Boolean,default:!1},hideCallback:{type:Function,default:null},pulseAnimation:{type:Boolean,default:!0},imageUrl:{type:String,default:""},visualIsVideo:{type:Boolean,default:!1},notificationStyling:{type:Object,default:()=>{}},onboardingStyling:{type:Boolean,default:!1},width:{type:Number,default:390},nippleVisible:{type:Boolean,default:!0},onPopupClicked:{type:Function,default:null},hidden:{type:Boolean,default:!0},subStep:{type:Boolean,default:!1},clickOutsideTriggersDismiss:{type:Boolean,default:!1}},data:()=>({popupStyles:{},popupVisible:!1,eventReady:!1}),watch:{hidden:{async handler(){var t;this.hidden||null==(t=this.$refs.popupDropdown)||t.onResize()},immediate:!0}},async mounted(){var e;t.$on("popup:hide",this.hidePopup);const a=async()=>{var e,i;this.popupVisible=!0,this.elementReadyEvent&&(t.$off(this.elementReadyEvent,a),null==(e=window.m)||e.off(this.elementReadyEvent,a),this.eventReady=!0),await this.$nextTick(),null==(i=this.$refs.popupDropdown)||i.onResize()};this.getTargetElement()?await a():this.elementReadyEvent?(t.$on(this.elementReadyEvent,a),null==(e=window.m)||e.on(this.elementReadyEvent,a)):(console.error('Popup error: targetElement not found and no "elementReadyEvent" specified'),this.$emit("error"))},destroyed(){t.$off("popup:hide",this.hidePopup)},methods:{async clickCta(){this.ctaCallback&&await this.ctaCallback(),this.ctaTriggersComplete&&this.completeStep()},async clickSecondary(){this.secondaryCallback&&await this.secondaryCallback(),this.secondaryTriggersComplete&&this.completeStep()},completeStep(){if(this.subStep)return this.$emit("subStepComplete");this.$emit("stepComplete")},async close(){this.hideCallback&&await this.hideCallback(),this.$emit("dismiss")},getTargetElement(){return document.querySelector(this.targetElementSelector)},hidePopup(t){this.popupVisible=!t},async closeIfClickOutside(){this.clickOutsideTriggersDismiss&&await this.close()}}},(function(){var t=this,e=t._self._c;return!t.elementReadyEvent||t.eventReady?e("div",{staticClass:"popup-base"},[e("transition",{attrs:{name:"fade-blurred-app",duration:200,appear:""}},[e("base-dropdown-container",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"},{name:"click-outside",rawName:"v-click-outside",value:t.closeIfClickOutside,expression:"closeIfClickOutside"}],ref:"popupDropdown",staticClass:"popup-dropdown app",class:[{"popup-pulse":t.pulseAnimation,"notification-popup":t.notificationStyling,"onboarding-popup":t.onboardingStyling,"brand-full-override":t.notificationStyling,"inverted-system-theme-override":!t.notificationStyling}],attrs:{target:t.getTargetElement(),width:`${t.width}px`,"position-offset":t.targetDistance,alignment:t.alignment,"alignment-offset":t.alignmentOffset,position:t.position,nipple:t.nippleVisible,"close-dropdown":t.hidePopup,"disable-close-event":!0,"nipple-alignment-offset":t.nippleAlignmentOffset,"data-test":"popup","data-test-id":t.id}},[e("base-dropdown-content",{staticClass:"popup-dropdown-content",class:{clickable:!!t.onPopupClicked},on:{click:function(e){var a;null==(a=t.onPopupClicked)||a.call(t)}}},[t.notificationStyling?e("div",{staticClass:"popup-highlight-bar"}):t._e(),t._t("image-content",(function(){return[t.imageUrl?e("div",{staticClass:"popup-image"},[t.visualIsVideo?e("video",{attrs:{src:t.imageUrl,autoplay:!t.$touch,muted:"",loop:""},domProps:{muted:!0}}):e("img",{attrs:{src:t.imageUrl,alt:`${t.headerText} demonstration`}})]):t._e()]})),e("div",{staticClass:"icon-wrapper icon-wrapper-close popup-close",class:[{dark:t.notificationStyling&&t.imageUrl&&!t.notificationStyling.image_has_white_background,light:t.notificationStyling&&t.imageUrl&&t.notificationStyling.image_has_white_background}],attrs:{"data-test":"close"},on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[e("base-icon",{attrs:{src:"icon/close",size:t.notificationStyling||t.onboardingStyling?"13px":"11px"}})],1),e("div",{staticClass:"popup-content"},[t.headerText?e("header",{staticClass:"popup-header"},[e("h3",{staticClass:"popup-title",attrs:{"data-test":"header-text"}},[t._v(t._s(t.headerText))])]):t._e(),e("div",{staticClass:"popup-body",attrs:{"data-test":"body-text"}},[t._v(t._s(t.bodyText))]),t._t("body-content"),t.ctaCallback||t.secondaryCallback||t.ctaTriggersComplete?e("div",{staticClass:"popup-footer"},[e("div",{staticClass:"footer-button-row"},[t.ctaCallback||t.ctaTriggersComplete?e("span",{staticClass:"button button-primary",class:[t.ctaClasses],attrs:{"data-test":"cta"},on:{click:function(e){return e.stopPropagation(),t.clickCta.apply(null,arguments)}}},[t.ctaIcon?e("base-icon",{attrs:{src:t.ctaIcon,size:"11px"}}):t._e(),t._v(" "+t._s(t.ctaText)+" "),t.notificationStyling?e("base-icon",{staticClass:"notification-button-chevron",attrs:{src:"icon/chevron-down",size:"11px"}}):t._e()],1):t._e(),t.secondaryCallback||t.secondaryTriggersComplete?e("span",{staticClass:"button button-neutral",class:[t.secondaryClasses],attrs:{"data-test":"secondary"},on:{click:function(e){return e.stopPropagation(),t.clickSecondary.apply(null,arguments)}}},[t.secondaryIcon?e("base-icon",{attrs:{src:t.secondaryIcon,size:"11px"}}):t._e(),t._v(" "+t._s(t.secondaryText)+" ")],1):t._e()]),t._t("footer")],2):t._e()],2)],2)],1)],1)],1):t._e()}),[],!1,null,"71b46745").exports;export{s as P};