import{u as e,p as o}from"./icon-alert--q0yLTMi.js";let s=null;const r="bookmarks:permissions:favicon:dismissed",t={favicon(o,s=16){var r,t;if(!(null==(t=null==(r=window.chrome)?void 0:r.runtime)?void 0:t.getURL)||!e.isChrome())return e.getFavIcon(o);const a=new URL(chrome.runtime.getURL("/_favicon/"));return a.searchParams.set("pageUrl",o),a.searchParams.set("size",s),a.toString()},open(o){m.models.bookmarksSettings.get("openInNewTab")&&e.getBrowser().tabs?e.getBrowser().tabs.create({url:o,active:!1}):e.getBrowser().tabs.update({url:o}),e.getBrowser().tabs||(m.models.bookmarksSettings.get("openInNewTab")?window.open(o,"_blank"):window.open(o,"_self"))},openInNewTab(o){e.getBrowser().tabs?e.getBrowser().tabs.create({url:o,active:!1}):window.open(o,"_blank")},async requestFaviconPermissionIfNeeded(t){if(!e.isChrome())return!0;if(s)return s;if(!(await o.permissions.contains({permissions:["favicon"]}))){s=new Promise((e=>{m.cmd("modal.open","FAVICON_PERMISSION",{resolve:e,hasDismissedPreviously:"true"===localStorage.getItem(r),source:t})}));const e=await s;return e?location.reload():localStorage.setItem(r,!0),s=null,e}}};export{t as b};