import{S as t}from"./SmoothReflow-Du5fECCq.js";import{_ as s}from"./icon-next-B4hjdiAA.js";import{n as a,u as e,E as i,q as o}from"./icon-alert--q0yLTMi.js";const n=a({name:"LoginLayout",components:{SmoothReflow:t},props:{loading:{type:Boolean,default:!1}},methods:{hasMessage(){var t,s,a;const e=null==(s=(t=this.$scopedSlots).message)?void 0:s.call(t)[0];return!!e&&(!!e.context||!!(null==(a=e.text)?void 0:a.replaceAll("\t","").replaceAll("\n","")))}}},(function(){var t=this,a=t._self._c;return a("div",{staticClass:"login-layout dark-full"},[a("div",{staticClass:"login-top"},[a("div",{staticClass:"actions-top-left"},[t._t("actions-top-left")],2),a("img",{staticClass:"logo",attrs:{src:"/img/logo-white.svg"}}),a("div",{staticClass:"actions-top-right"},[t._t("actions-top-right")],2)]),a("div",{staticClass:"login-middle u--scrim"},[a("div",{staticClass:"login-middle-wrapper"},[a("div",{staticClass:"above"},[a("div",{staticClass:"title"},[t._t("title")],2)]),a("div",{staticClass:"prompt"},[a("span",{staticClass:"question",attrs:{"data-test":"question"}},[t._t("question")],2),t._t("input")],2),a("div",{staticClass:"below"},[a("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.loading?a("div",{key:"1",staticClass:"below-input-msg loading",attrs:{"data-test":"loading-state"}},[a("span",{staticClass:"loading-icon"}),t._v(" Loading... ")]):a("div",{key:"2",staticClass:"below-input"},[a("smooth-reflow",{attrs:{duration:500}},[t.hasMessage()?a("div",{staticClass:"below-input-msg tip",attrs:{"data-test":"message"}},[t._t("message")],2):t._e()]),t._t("below-message"),a("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[a("div",{staticClass:"continue-button-wrapper"},[a("button",{staticClass:"dash-button",attrs:{"data-test":"continue-button"},on:{click:function(s){return s.stopPropagation(),t.$emit("submit")}}},[t._t("continue-message",(function(){return[t._v(" Continue "),a("inline-svg",{staticClass:"icon icon-next",attrs:{src:s}})]}))],2)])]),t._t("below-continue")],2)])],1)])]),a("div",{staticClass:"login-bottom"},[a("div",{staticClass:"login-bottom-wrapper"},[t._t("bottom")],2),a("div",{staticClass:"scrim"})])])}),[],!1,null,"fef65cd9").exports,l={props:{loading:{type:Boolean,required:!0},name:{type:String,required:!0},email:{type:String,required:!0}},data:()=>({message:""}),computed:{computedMessage(){return this.message.replace("{email}",e.removeTags(this.email))}},mounted(){window.addEventListener("keyup",this.onKeyUp)},destroyed(){window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyUp(t){var s,a;"Enter"===t.key&&(null==(s=this.onEnter)||s.call(this)),"Escape"===t.key&&(null==(a=this.onEscape)||a.call(this))},async setLoadingWithErrorHandling(t,s={focusOnError:!0}){var a;const e=()=>this.$emit("update:loading",!1);if(!this.loading){this.resetMessage();try{this.$emit("update:loading",!0),await t(e)}catch(n){this.message=n instanceof i?n.message:o.SERVER_ERROR_GENERAL,e(),(null==s?void 0:s.focusOnError)&&(null==(a=this.$refs["login-input"])||a.focus())}}},resetMessage(){this.message=""}}};export{n as L,l};