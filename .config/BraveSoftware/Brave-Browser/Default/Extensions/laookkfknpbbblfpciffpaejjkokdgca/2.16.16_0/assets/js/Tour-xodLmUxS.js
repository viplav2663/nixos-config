import{M as e}from"./MaskedOverlay-Cpu3vAWW.js";import{n as t,A as s}from"./icon-alert--q0yLTMi.js";import{S as a}from"./onboardingStepCollection-BKBgZU5n.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./VueBase-W7f1OYgs.js";import"./index-DQvfDEB6.js";import"./migrateLegacyUserMessageHandler-DMvEmYM4.js";import"./main-FH8FpKq2.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-SV1wohGy.js";import"./itemModelMixin-B7XBtNZL.js";import"./reactiveCustomization-DqGARD3C.js";import"./namesMixin-DfNb5KMg.js";import"./itemDataServiceMixins-DPsPiv13.js";import"./icon-asana-Csd73e1k.js";import"./focusModeHelpers-CiIJnkuY.js";import"./scenes-D8jpYIdj.js";import"./ocean-bubbles-GcKjBI5B.js";import"./PomodoroTimers-BWkB-14p.js";import"./SubscriptionSummary-eTeXKiGw.js";import"./constants-CALDQiUE.js";import"./authService-CGVTYYkM.js";import"./loginHelpers-BZASe8UD.js";import"./icon-confetti-Dz2LojDe.js";import"./siteBlockerGroups-E8GFJ9Dm.js";import"./constants-BT5o8PmI.js";import"./compareObjects-BF7sSNEf.js";const r=t({name:"Tour",components:{MaskedOverlay:e},props:{id:{type:String,required:!0},name:{type:String,default:""},subSteps:{type:Array,default:null},activeSubStepIndex:{type:Number,default:0},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},plansError:{type:Boolean,default:!1},onCreated:{type:Function,default:()=>{}},onDestroyed:{type:Function,default:()=>{}},progressVisible:{type:Boolean,default:!0}},setup:()=>({StepState:a}),data:()=>({maskDimensions:[],maskKey:0,maskActive:!1}),computed:{activeSubStepProgressText(){return Object.prototype.hasOwnProperty.call(this.activeSubStep,"progressBarText")?this.activeSubStep.progressBarText:this.activeSubStep.subStepProps.heading},activeSubStepClass(){var e;return this.activeSubStep.class||"sub-step-"+(null==(e=this.activeSubStep.name)?void 0:e.toLowerCase().replaceAll(" ","-"))},activeSubStep(){var e;return(null==(e=this.subSteps)?void 0:e[this.activeSubStepIndex])||null},activeSubComponent(){var e;return(null==(e=this.activeSubStep)?void 0:e.component)||""}},created(){s.disableCaptureExceptFeatures(["onboarding","paywall","upgrade","notifications"]),m.tourActive=!0,this.onCreated()},destroyed(){m.tourActive=!1,this.onDestroyed(),s.enableCaptureForAllFeatures()},methods:{updateMaskDimensions(e){this.maskDimensions=e,this.maskKey+=1}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tour dark dark-full",attrs:{"data-test":"tour"},on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[e.progressVisible?t("div",{staticClass:"progress"},e._l(e.subSteps,(function(s,a){return t("div",{key:a,staticClass:"progress-item-wrapper",class:{active:e.activeSubStepIndex===a,disabled:e.activeSubStep.lockProgressBar||s.lockProgressBar},attrs:{"data-test":"progress-btn"},on:{click:function(t){return e.$emit("goToSubStep",a)}}},[t("div",{staticClass:"progress-item"},[e._v(e._s(e.activeSubStepIndex===a?e.activeSubStepProgressText:""))])])})),0):e._e(),t("transition",{attrs:{appear:"",name:"fade",mode:"out-in"},on:{"before-enter":function(t){return e.$emit("beforeSubStepEnter")},leave:function(t){e.maskActive=!1},"after-leave":function(t){return e.$emit("afterSubStepLeave")}}},[t(e.activeSubComponent,e._b({key:e.activeSubStepIndex,tag:"component",class:e.activeSubStepClass,attrs:{plans:e.plans,sales:e.sales,"plans-error":e.plansError,"parent-modal-name":e.name,name:e.activeSubStep.name},on:{dismiss:function(t){return e.$emit("stepComplete",{state:e.StepState.Dismissed})},next:function(t){return e.$emit("subStepComplete")},updateMaskDimensions:e.updateMaskDimensions,maskReady:function(t){e.maskActive=!0}}},"component",e.activeSubStep.subStepProps,!1))],1),t("masked-overlay",{key:e.maskKey,staticClass:"overlay tour-overlay",attrs:{"mask-dimensions":e.maskDimensions,"mask-active":e.maskActive}})],1)}),[],!1,null,"919b76af").exports;export{r as default};