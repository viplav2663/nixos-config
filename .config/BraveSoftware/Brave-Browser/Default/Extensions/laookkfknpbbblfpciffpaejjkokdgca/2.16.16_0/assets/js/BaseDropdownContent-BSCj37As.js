import{a as t,c as i,D as e,d as o,e as n,f as s,g as d,N as a,h as p,i as l}from"./constants-CALDQiUE.js";import{r,e as h,a3 as g,n as c,K as w}from"./icon-alert--q0yLTMi.js";import{u}from"./preload-helper-DmNsytk6.js";import{a as f}from"./index-D7SyL4qE.js";const m={name:"BaseDropdownContainer",provide(){return{closeDropdown:this.closeDropdown}},props:{target:{type:Element,default:void 0},scrollTarget:{type:Element,default:void 0},boundScrollX:{type:Boolean,default:!1},boundScrollY:{type:Boolean,default:!0},position:{type:String,default:t.Bottom},positionOffset:{type:Number,default:i},alignment:{type:String,default:e.Left},alignmentOffset:{type:Number,default:o},closeDropdown:{type:Function,required:!0},nipple:{type:Boolean,default:!0},nippleAlignmentOffset:{type:Number,default:n},minWidth:{type:String,default:"160px"},width:{type:String,default:""},maxWidth:{type:String,default:"100vw"},windowEdgePadding:{type:Number,default:s},disableCloseEvent:{type:Boolean,default:!1},disablePointerEvents:{type:Boolean,default:!1}},setup(){const t=`clip-${u()}`;return{clipId:t,clipPathUrl:`url(#${t})`,resizeObserver:void 0}},data(){return{dropdownX:0,dropdownY:0,dropdownWidth:0,dropdownHeight:0,dropdownPositionState:d.Original,nippleDisplacement:0,nipplePosition:this.position,nippleVisible:this.nipple,nippleSize:a,maxWindowWidth:"100vw"}},computed:{windowDimensions:()=>r.windowDimensions,positionIsXBased(){return this.position===t.Top||this.position===t.Bottom||this.position===t.OverlayTop||this.position===t.OverlayBottom},positionIsYBased(){return this.position===t.Left||this.position===t.Right}},watch:{windowDimensions:{async handler(){await this.$nextTick(),await this.$nextTick(),this.onResize()},deep:!0,immediate:!0}},mounted(){this.setupScrollTarget(this.scrollTarget),this.disableCloseEvent||h.$on("dropdown:close",this.closeDropdown),this.resizeObserver=f(this.$refs.resizeElementRef,this.onResize)},destroyed(){this.resizeObserver.stop(),this.destroyScrollTarget(this.scrollTarget),this.disableCloseEvent||h.$off("dropdown:close")},methods:{onResize(){var t;if(!this.target||!this.$refs.dropdownContainer)return void this.closeDropdown();const i=this.target.getBoundingClientRect(),e=this.$refs.dropdownContainer.getBoundingClientRect(),o=null==(t=this.scrollTarget)?void 0:t.getBoundingClientRect(),[n,s,d,a,l,r,h]=this.getUpdatedCoordinatesPositionAlignment(i,e,o),g=this.getUpdatedNippleDisplacement(i,n,s,l);this.dropdownX=n,this.dropdownY=s,this.dropdownWidth=d,this.dropdownHeight=a,this.dropdownPositionState=h,this.nippleDisplacement=g,this.nipplePosition=p[l],this.nippleVisible=r,this.maxWindowWidth=o?o.width+"px":"100vw"},calculateBoundingRect(i,o,n,s){let d=0,p=0,l=o.width,r=o.height;const h=this.nipple&&this.nippleVisible&&this.position!==t.OverlayTop&&this.position!==t.OverlayBottom,g=(h?this.nippleAlignmentOffset:0)-this.alignmentOffset;return h&&(n!==t.Top&&n!==t.Bottom||(r-=a),n!==t.Right&&n!==t.Left||(l-=a)),n===t.Top?(d=i.x-g,p=i.y-o.height-this.positionOffset):n===t.Right?(d=i.x+i.width+(this.positionOffset+a),p=i.y-g):n===t.Bottom?(d=i.x-g,p=i.y+i.height+(this.positionOffset+a)):n===t.Left?(d=i.x-o.width-this.positionOffset,p=i.y-g):n===t.OverlayTop?(d=i.x-g,p=i.y-this.positionOffset):n===t.OverlayBottom&&(d=i.x-g,p=i.y-o.height+i.height-this.positionOffset),s===e.Right?this.positionIsXBased?d-=l-i.width-2*g:this.positionIsYBased&&(p-=r-i.height-2*g):s===e.Center&&(this.positionIsXBased?d-=l/2-i.width/2-g:this.positionIsYBased&&(p-=r/2-i.height/2-g)),[d,p,l,r]},getWindowMinMax(t){let i=this.windowEdgePadding,e=this.windowEdgePadding,o=this.windowDimensions.width-this.windowEdgePadding,n=this.windowDimensions.height-this.windowEdgePadding;return this.scrollTarget&&(this.boundScrollX||this.boundScrollY)&&(this.boundScrollX&&(i=t.left+this.windowEdgePadding,o=t.right-this.windowEdgePadding),this.boundScrollY&&(e=t.top+this.windowEdgePadding,n=t.bottom-this.windowEdgePadding)),this.dropdownPositionState===d.Floating&&this.nipple&&(this.positionIsXBased?(e+=a,n-=a):this.positionIsYBased&&(i+=a,o-=a)),[i,e,o,n]},getBoundedCoordinatesWithinWindowMinMax(i,e,o,n,s,d){let a=this.nipple;const[p,l,r,h]=this.getWindowMinMax(s),g=(this.boundScrollX||!this.scrollTarget)&&(d===t.Left||d===t.Right),c=(this.boundScrollY||!this.scrollTarget)&&(d===t.Top||d===t.Bottom);return i<p?(i=p,g&&(a=!1)):i+o>r&&(i=r-o,g&&(a=!1)),e<l?(e=l,c&&(a=!1)):e+n>h&&(e=h-n,c&&(a=!1)),[i,e,a]},getOppositePositionAndAlignment(i,e,o,n,s){let d=this.position,a=this.alignment;const[r,h,g,c]=this.getWindowMinMax(s);return(e<h||e+n>c)&&(this.position===t.Top||this.position===t.Bottom?d=p[this.position]:a=l[this.alignment]),(i<r||i+o>g)&&(this.position===t.Left||this.position===t.Right?d=p[this.position]:a=l[this.alignment]),[d,a]},boundingRectInWindowMinMax(t,i,e,o,n){const[s,d,a,p]=this.getWindowMinMax(n);return g(t,i,e,o,s,d,a,p)},getUpdatedCoordinatesPositionAlignment(t,i,e){const[o,n,s,a]=this.calculateBoundingRect(t,i,this.position,this.alignment),[p,l,r]=this.getBoundedCoordinatesWithinWindowMinMax(o,n,s,a,e,this.position),[h,g]=this.getOppositePositionAndAlignment(o,n,s,a,e),[c,w,u,f]=this.calculateBoundingRect(t,i,h,g),[m,b,v]=this.getBoundedCoordinatesWithinWindowMinMax(c,w,u,f,e,h),B=this.boundingRectInWindowMinMax(o,n,s,a,e),y=this.boundingRectInWindowMinMax(this.positionIsYBased?c:m,this.positionIsXBased?w:b,u,f,e);return B?[o,n,s,a,this.position,this.nipple,d.Original]:y||this.dropdownPositionState===d.Opposite?[m,b,u,f,h,v,v||!this.nipple?d.Opposite:d.Floating]:[p,l,s,a,this.position,r,d.Floating]},getUpdatedNippleDisplacement(i,e,o,n){let s=0;const d=i.width/2-a,p=i.height/2-a;return n===t.Top||n===t.Bottom?s=i.left-e+d+this.alignmentOffset:n!==t.Right&&n!==t.Left||(s=i.top-o+p+this.alignmentOffset),s},setupScrollTarget(t){null==t||t.addEventListener("scroll",this.onResize)},destroyScrollTarget(t){null==t||t.removeEventListener("scroll",this.onResize)}}},b=()=>{w(((t,i)=>({"080c347e":t.dropdownX,"080c347f":t.dropdownY,"05e4eecc":t.dropdownWidth,c62c1e3e:t.dropdownHeight,"11b066ca":t.windowEdgePadding,"71b513fb":t.maxWindowWidth,bd1d0898:t.nippleDisplacement,"7a490ac4":t.nippleSize,57747146:t.width,"64e9259d":t.minWidth,"62707c6a":t.maxWidth,"338ba1f1":t.clipPathUrl})))},v=m.setup;m.setup=v?(t,i)=>(b(),v(t,i)):b;const B=c(m,(function(){var t=this,i=t._self._c;return i("div",t._g({ref:"dropdownContainer",staticClass:"base-dropdown-container reset-app-styles",on:{mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()},wheel:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}},t.$listeners),[i("div",{staticClass:"base-dropdown-container-shadow"}),i("div",{staticClass:"base-dropdown-container-content"},[i("svg",{staticClass:"base-dropdown-container-content-mask-svg"},[i("clipPath",{attrs:{id:t.clipId}},[t.nippleVisible?i("path",{class:[`mask-nipple-${t.nipplePosition}`],attrs:{d:"M5.58579 1.41421L0 7H14L8.41421 1.41421C7.63316 0.633165 6.36684 0.633164 5.58579 1.41421Z",fill:"black"}}):t._e(),i("rect",{staticClass:"mask-rectangle",attrs:{x:"0",y:"0"}})])]),i("div",{ref:"resizeElementRef",class:{"disable-pointer-events":t.disablePointerEvents}},[t._t("default")],2)])])}),[],!1,null,"fcbd9d9b").exports;const y=c({name:"BaseDropdownContent"},(function(){var t=this;return(0,t._self._c)("div",t._g({staticClass:"base-dropdown-content"},t.$listeners),[t._t("default")],2)}),[],!1,null,"5d20c578").exports;export{y as B,B as a};