import{g as e}from"./FlashMessage-DPJrdJ6u.js";import"./icon-alert--q0yLTMi.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./globalKeyEventManager-Bi-yHy9P.js";import"./icon-close-BUGl_M7j.js";class t{constructor(e,t){this._handleMotionChange=e=>{const t=this._container,r=t.actualOptions.motion;r&&(e.matches?r.disable?t.retina.reduceFactor=0:t.retina.reduceFactor=r.reduce.value?1/r.reduce.factor:1:t.retina.reduceFactor=1)},this._container=e,this._engine=t}async init(){const t=this._container,r=t.actualOptions.motion;if(!r||!r.disable&&!r.reduce.value)return void(t.retina.reduceFactor=1);const a=e("(prefers-reduced-motion: reduce)");if(!a)return void(t.retina.reduceFactor=1);this._handleMotionChange(a);const i=()=>{(async()=>{this._handleMotionChange(a);try{await t.refresh()}catch{}})()};void 0!==a.addEventListener?a.addEventListener("change",i):void 0!==a.addListener&&a.addListener(i),await Promise.resolve()}}export{t as MotionInstance};