const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/pomodoroCompleted-DWEcdQPX.js","assets/js/icon-alert--q0yLTMi.js","assets/js/localStorage-4iHdj-SC.js","assets/js/preload-helper-DmNsytk6.js","assets/js/string-GDe0WbEj.js","assets/js/index-DQvfDEB6.js","assets/js/migrateLegacyUserMessageHandler-DMvEmYM4.js","assets/js/main-FH8FpKq2.js","assets/css/index-C0DDMXTO.css","assets/js/PomodoroTimers-BWkB-14p.js","assets/js/reactiveCustomization-DqGARD3C.js","assets/js/VueBase-W7f1OYgs.js","assets/js/index-CJJH83pl.js","assets/js/portal-vue.esm-SV1wohGy.js","assets/js/loginHelpers-BZASe8UD.js","assets/js/authService-CGVTYYkM.js","assets/js/customization-fX3KDebH.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./preload-helper-DmNsytk6.js";import{d as t,e as s}from"./focusModeHelpers-CiIJnkuY.js";import{a as o,p as i}from"./reactiveCustomization-DqGARD3C.js";import{m as n}from"./customization-fX3KDebH.js";import{k as a,e as d}from"./icon-alert--q0yLTMi.js";import{h as l}from"./handlebarLoader-xbtIzd6B.js";import"./index-DQvfDEB6.js";import"./localStorage-4iHdj-SC.js";import"./migrateLegacyUserMessageHandler-DMvEmYM4.js";import"./main-FH8FpKq2.js";import"./scenes-D8jpYIdj.js";import"./ocean-bubbles-GcKjBI5B.js";import"./PomodoroTimers-BWkB-14p.js";import"./VueBase-W7f1OYgs.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-SV1wohGy.js";import"./string-GDe0WbEj.js";l({addin:"9c684606-8b84-49ed-bff3-6bb71bb3593b",dependencies:["settings"],commands:["settings.panels.focusmode"],id:"settings_focus_mode"},Object.assign({"./commands/panel.js":e=>{e.commands.SettingsPanelFocusMode=m.models.Command.extend({defaults:{id:"settings.panels.focusmode"},execute:function(){return e.styleLoaded||(e.styleLoaded=!0,e.styles.style()),new e.views.FocusMode}})},"./views/focusmode.js":l=>{var r=l.dependencies.settings;l.views.FocusMode=r.views.SettingsPanel.extend({attributes:{id:"settings-focus-mode",class:"settings-view settings-focus-mode","data-test":"settings-focus-mode"},template:l.templates.focusmode,panelid:"focus-mode",events:{"click .toggle-option":"toggleOption","click .slide-toggle":"toggleSlider","dblclick .slide-toggle":"eatDblClick",webkitAnimationEnd:"onAnimationEnd","click .button-start-focus-mode":"startFocusMode"},initialize:function(){this.model=m.models.customization,this.initializeCustomizeItems(),this.listenTo(this.model,"change",this.customizationModelChanged),m.Analytics.capture("settings panel show",{feature:"settings",name:"focus mode"})},initializeCustomizeItems:function(){this.customizeItems=[{name:"Tab Stash",message:"Stash open tabs for later ",dataId:"settings-focus-mode-tab-stash",field:{name:"apps.tabStash.enabled",get:function(){var e,s;return(null==(s=null==(e=t().focusModeSettings.apps)?void 0:e.tabStash)?void 0:s.enabled)??!0},set:function(e){s("tabStash","enabled",e)}},section:"avoid-distractions",unsupported:m.utils.isSafari()||m.utils.isPwa()},{name:"Site Blocker",message:"Block distracting websites",dataId:"settings-focus-mode-site-blocker",field:{name:"apps.siteBlocker.enabled",get:function(){var e,s;return(null==(s=null==(e=t().focusModeSettings.apps)?void 0:e.siteBlocker)?void 0:s.enabled)??!0},set:function(e){s("siteBlocker","enabled",e)}},section:"avoid-distractions"},{name:"Blur background",message:"Blur the background photo for a focused atmosphere",dataId:"settings-focus-mode-blur-background",field:"blurBackground",section:"avoid-distractions"},{name:"Focus Stats",dataId:"settings-focus-mode-insight",field:"focusInsightVisible",section:"focus-habit",message:"See how many minutes you've focused"},{name:"Soundscapes",message:"Sounds to help you focus and relax",dataId:"settings-focus-mode-soundscapes",field:{name:"apps.soundscapes.enabled",get:function(){var e,s;return(null==(s=null==(e=t().focusModeSettings.apps)?void 0:e.soundscapes)?void 0:s.enabled)??!0},set:function(e){s("soundscapes","enabled",e)}},section:"focus-habit"},{name:"Focus mantras",dataId:"settings-focus-mode-mantras",field:"mantrasVisible",section:"focus-habit",message:"Affirmations at the bottom that help you stay focused"},{name:"Show Tasks",dataId:"settings-focus-mode-todo",field:"todoVisible",section:"focus-task",message:"Keep your tasks at hand & sort by priority"},{name:"Top task in center",message:"Sync your first task with your focus task",dataId:"settings-focus-mode-autofocus",plusOnly:!0,requiredFeature:"plus",field:{name:"autofocus",get:function(){return o.autoFocus},set:function(e){o.autoFocus=e}},section:"focus-task"},{name:"Time",message:"Show focus/break timers or simply count up",dataId:"settings-focus-mode-pomodoro-mode",field:{name:"pomodoroSettings",get:function(){return i.focusModeSettings.pomodoroTimerMode||"timer"},set:function(t){(async()=>{const s=(await e((()=>import("./pomodoroCompleted-DWEcdQPX.js").then((e=>e.b))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))).default();await a((()=>s.loaded)).toBe(!0),s.totalProgress&&s.complete({completedManually:!0,switchToTimer:"focus"}),n("focusModeSettings",(e=>{e.pomodoroTimerMode=t}))})()}},options:[{label:"Pomodoro",value:"timer"},{label:"Countup",value:"countUp"}],section:"focus-task"},{name:"Links",dataId:"settings-focus-mode-links",field:"linksVisible",section:"widgets",message:"Access your favorite and most used websites"},{name:"Metrics",dataId:"settings-focus-mode-metrics",field:"metricsVisible",section:"widgets",plusOnly:!0,requiredFeature:"plus",message:"Keep your important metrics at a glance"},{name:"Countdowns",dataId:"settings-focus-mode-countdowns",field:"countdownsVisible",section:"widgets",plusOnly:!0,requiredFeature:"plus",message:"Countdown to important dates and deadlines"},{name:"World Clocks",dataId:"settings-focus-mode-world-clocks",field:"worldClocksVisible",section:"widgets",plusOnly:!0,requiredFeature:"plus",message:"Keep track of time anywhere on Earth"},{name:"Ask AI",dataId:"settings-focus-mode-ask-ai",field:"askAiVisible",section:"widgets",plusOnly:!0,requiredFeature:"plus",message:"Create, learn and problem-solve directly from your dashboard"},{name:"Notes",dataId:"settings-focus-mode-notes",field:"notesVisible",section:"widgets",plusOnly:!0,requiredFeature:"plus",message:"Take quick notes and store wisdom to review"}]},render:function(){var e=m.isLoggedIn();this.$el.html(this.template({loggedIn:e})),this.$popBody=this.$(".pop-body");var t={customize:this.$el.find("#customize-list"),widgets:this.$el.find("#apps-list"),"avoid-distractions":this.$el.find("#avoid-distractions-list"),"focus-habit":this.$el.find("#focus-habit-list"),"focus-task":this.$el.find("#focus-task-list"),misc:this.$el.find("#misc-list"),labs:this.$el.find("#labs-list")};_.each(t,(function(e){e.empty()}));var s=this;return _.each(this.customizeItems,(function(e){var o=Object.assign({},e);s.fieldHasOwnControl(e.field)&&(o.field=e.field.name),o.options?t[o.section].append(r.templates["general-toggle-options"](o)):t[o.section].append(r.templates["general-toggle-slider"](o))})),this.updateControlStates(),m.trigger("settings:focusMode:rendered"),this},onAnimationEnd:function(e){m.utils.removePulseClass(e)},customizationModelChanged:function(e){e&&this.updateControlStates()},fieldHasOwnControl:function(e){return!("object"!=typeof e||null===e||!e.get||!e.set)},updateControlStates:function(){var e=_.pluck(this.customizeItems,"field"),t=this;_.each(e,(function(e){var s=t.findMatchingItem(e);if(s){var o=t.fieldHasOwnControl(e)?e.get():JSON.parse(t.model.get("focusModeSettingsStr"))[e];void 0===o&&(o=JSON.parse(m.models.customization.persistentSettings.defaultIfNotSet.focusModeSettingsStr)[e]);var i=t.getFieldName(e);if(s.options){t.$el.find("."+i).removeClass("active"),t.$el.find("."+i+"[data-option-value='"+o+"']").first().addClass("active")}else{o=!(s.plusOnly&&!t.featureAvailable(s.requiredFeature))&&!!o;var n=t.$el.find("[data-related-widget='"+i+"']");if(n&&1===n.length)n.first().toggleClass("on",o)}}}))},findMatchingItem:function(e){var t=this;return"object"==typeof e&&(e=e.name),this.customizeItems.find((function(s){return(t.fieldHasOwnControl(s.field)?s.field.name:s.field)===e}))},getFieldName:function(e){return this.fieldHasOwnControl(e)?e.name:e},scrollIntoView:function(e){var t=$(e),s=t.closest(".settings-view-container"),o=t.offset().top,i=s.offset().top;o-i-12<0&&s.animate({scrollTop:s[0].scrollTop+o-i-12})},featureAvailable:function(e){return m.conditionalFeatures.featureEnabled(e)||m.conditionalFeatures.featureEnabled(e+"-degraded")},toggleOption:function(e){var t=$(e.delegatedTarget),s=t.attr("data-related-widget"),o=t.attr("data-option-value");this.findMatchingItem(s).field.set(o,e),m.trigger("globalEvent:settingsclick",e)},setOption:function(e){var t=e.attr("data-related-widget"),s=e.attr("data-option-value"),o=this.findMatchingItem(t);if(!o)return null;this.$el.find("."+t).removeClass("active"),e.addClass("active");var i=JSON.parse(this.model.get("focusModeSettingsStr"));return i[t]=s,this.model.save({focusModeSettingsStr:JSON.stringify(i)}),m.Analytics.capture(o.name.toLowerCase()+" select",{new_value:s,location:"settings focus mode",feature:"focus mode"}),o},toggleSlider:function(e){if(!this.eatClicks){this.eatClicks=!0;var t=this;setTimeout((function(){t.eatClicks=!1}),250);var s=$(e.delegatedTarget).attr("data-related-widget"),o=this.findMatchingItem(s);if(!o.plusOnly||this.featureAvailable(o.requiredFeature)){if(!(o.unsupported||o.disabled||o.options)){if(this.fieldHasOwnControl(o.field))return i=!o.field.get(),o.field.set(i,e),$(e.delegatedTarget).toggleClass("on",i),void l(o);if(s){var i,n=JSON.parse(this.model.get("focusModeSettingsStr")),a=n[s],d=JSON.parse(m.models.customization.persistentSettings.defaultIfNotSet.focusModeSettingsStr);void 0===a&&(a=d[s]),i=!a,n[s]=i,this.model.save({focusModeSettingsStr:JSON.stringify(n)}),l(o)}m.trigger("globalEvent:settingsclick",e)}}else"Ask AI"===o.name?m.cmd("modal.open","UPSELL_AI_CHAT",{eventSource:"settings"}):"Countdowns"===o.name?m.cmd("modal.open","UPSELL_COUNTDOWNS",{eventSource:"settings"}):"Metrics"===o.name?m.cmd("modal.open","UPSELL_METRICS",{eventSource:"settings"}):"Notes"===o.name?m.cmd("modal.open","UPSELL_NOTES",{eventSource:"settings"}):"World Clocks"===o.name?m.cmd("modal.open","UPSELL_WORLD_CLOCKS",{eventSource:"settings"}):"Sync tasks with Focus Task"===o.name?m.cmd("modal.open","UPSELL_AUTOFOCUS",{eventSource:"settings"}):m.cmd("modal.open","PLUS_GATE",{eventSource:"settings"})}function l(e){e.skipAnalyticsOnChange||m.Analytics.capture("feature "+(i?"enable":"disable"),{is_paid_event:!!e.plusOnly,feature:e.eventFeatureName||e.name.toLowerCase(),location:"settings focus mode"})}},isPlus:function(){return m.conditionalFeatures.featureEnabled("plus")},ensurePermissions:function(e,t,s,o){m.promisifiedChrome.permissions.contains(e).then((function(i){i?t(!0):m.cmd("modal.open","PERMISSION_REQUEST",{resolve:t,permissions:e,source:s,reason:o})}))},startFocusMode(){m.cmd("settings.toggle");const e=()=>m.trigger("focusMode:start"),t=!o.focusModeVisible;t&&d.$once("focusMode:ready",e),o.focusModeVisible=!0,t||e()}})}}),Object.assign({"./templates/focusmode.hbs":{compiler:[8,">= 4.3.0"],main:function(e,t,s,o,i){return'<header class="settings-header">\n\t<span class="button-advanced button button-start-focus-mode">Start Focus Mode</span>\n\t<h3 data-test="general-header">Focus Mode</h3>\n\t<p class="description">Eliminate distractions with timers and sounds</p>\n</header>\n\n<h4>Avoid distractions</h4>\n<ul id="avoid-distractions-list" class="settings-list options-list"></ul>\n\n<h4>Make focusing a habit</h4>\n<ul id="focus-habit-list" class="settings-list options-list"></ul>\n\n<h4>Focus on one task at a time</h4>\n<ul id="focus-task-list" class="settings-list options-list"></ul>\n\n<details class="settings-hidden-section">\n\t<summary>\n\t\t<h4>Show during focus</h4>\n\t\t<svg class="arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 64 64"><path d="M52.465 16.465a5 5 0 1 1 7.07 7.07l-24 24a5.002 5.002 0 0 1-7.071 0l-24-24a5 5 0 1 1 7.072-7.07l19.05 19.05a2 2 0 0 0 2.828 0l19.05-19.05Z"/></svg>\n\t</summary>\n\t<ul id="apps-list" class="settings-list options-list"></ul>\n</details>\n\n<style>\ndetails summary {\n  list-style: none;\n  position: relative;\n}\n\ndetails[open] summary .arrow {\n\ttransform: rotate(180deg);\n}\n\ndetails summary ::after {\n\tcontent: \'\';\n\tposition: absolute;\n\tinset: calc(-1 * var(--spacing-5));\n\tborder-radius: var(--border-radius);\n\tborder: solid 1px transparent;\n}\n\ndetails:not([open]) summary ::after {\n\tborder-color: var(--color-stop-2);\n}\n\n.arrow {\n\twidth: 16px;\n\tposition: absolute;\n\tinset: 0 0 0 auto;\n\tmargin: auto;\n}\n\n.button-start-focus-mode {\n\tmargin-top: -1px;\n\tpadding: var(--spacing-2) var(--spacing-4) !important;\n\ttext-transform: none;\n\tfont: var(--font-s-bold);\n\topacity: 1;\n}\n</style>'},useData:!0}}),(()=>{}));