import{B as t}from"./BaseDropdownText-CrjTnGhF.js";import{B as i}from"./BaseDropdownOption-umPWLVqy.js";import{L as s}from"./index-DQvfDEB6.js";import{a as n}from"./allComponentsMounted-C3UsG_cA.js";import{B as e}from"./BaseDropdown-DBvV1Fy2.js";import{F as a}from"./FavIcon-Ba-H42pn.js";import{n as o,ah as r,ai as l,p,u as c,c as k}from"./icon-alert--q0yLTMi.js";import{L as d}from"./links-hR2TwzXn.js";import{_ as u}from"./icon-weather-reset-C06kxk3l.js";import{_ as h}from"./icon-pin-BHeOuzvO.js";import{_ as L}from"./icon-edit-CixeXNYx.js";import{_ as f}from"./icon-trash-BQ1O-AfY.js";const w=o({name:"LinksListItemIcon",components:{FavIcon:a},props:{linkGroup:{type:Object,default:null},iconSrc:{type:String,default:""}},computed:{topFourLinks(){return this.linkGroup.links.slice(0,4)}}},(function(){var t=this,i=t._self._c;return t.iconSrc?i("div",{staticClass:"link-favicon"},[i("inline-svg",{staticClass:"icon-favicon",attrs:{src:t.iconSrc}})],1):t.linkGroup.hasManyLinks?i("div",{staticClass:"link-favicon-grid"},t._l(t.topFourLinks,(function(t){return i("fav-icon",{key:t.id,staticClass:"link-favicon",attrs:{url:t.url}})})),1):i("fav-icon",{staticClass:"link-favicon",attrs:{url:t.linkGroup.links[0].url}})}),[],!1,null,"5878a8b9").exports;const v=o({name:"LinksListItem",components:{LinksListItemToastHeader:o({name:"LinksListItemToastHeader",components:{LinksListItemIcon:w},props:{linkGroup:{type:Object,required:!0}}},(function(){var t=this,i=t._self._c;return i("div",{staticClass:"links-list-item-toast-header"},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))])],1)}),[],!1,null,"2412573f").exports,LinksListItemIcon:w,BaseDropdown:e,BaseDropdownOption:i,BaseDropdownText:t},mixins:[n],inject:["viewStateStore","itemStore","capture","batchCapture"],props:{linkGroup:{type:Object,required:!0},isTile:{type:Boolean,default:!1},isOnDash:{type:Boolean,default:!1},isTeamLink:{type:Boolean,default:!1}},computed:{linkGroupTitle(){const t=new Set(this.linkGroup.links.map((t=>new URL(t.url).hostname)));return Array.from(t).join("\n")},isLegacyLink(){return this.linkGroup instanceof d}},methods:{openLinks(t){this.batchCapture((this.linkGroup.hasManyLinks?"tab group":"link")+" click",{is_paid_event:this.linkGroup.hasManyLinks});let i=r()||m.models.bookmarksSettings.get("openInNewTab")||t.metaKey||"auxclick"===t.type;this.linkGroup.links.forEach((({url:t},s)=>{l()?window.open(t,i?"_blank":"_self"):p.tabs.openUrl(t,i).then((t=>{t&&0===s&&c.isSafari()&&p.tabs.update(t.id,{active:!0})})),i=!0}))},async toggleLinkPinned(){this.closeLinkDropdown(),await this.itemStore.update(this.linkGroup.id,{pinned:!this.linkGroup.pinned})},async editLink(){if(this.closeLinkDropdown(),this.$admin&&this.isTeamLink){const t=await k.sendMessage({handler:"getSid",args:[this.linkGroup.id]});m.cmd("window.account.open.login","team/links?id="+t.substring(1))}else await this.viewStateStore.togglePopup(!0),this.itemStore.editItem(this.linkGroup.id),await this.viewStateStore.setActiveView(s.Form)},async deleteLink(){this.closeLinkDropdown(),await this.viewStateStore.togglePopup(!0),await this.viewStateStore.setConfirmation({title:"Are you sure you want to delete this link?"})&&(this.capture((this.linkGroup.hasManyLinks?"tab group":"link")+" delete",{is_paid_event:this.linkGroup.hasManyLinks}),await this.itemStore.deleteLinkGroup(this.linkGroup.id))},closeLinkDropdown(){var t;null==(t=this.$refs["link-dropdown"])||t.closeDropdown()}}},(function(){var t=this,i=t._self._c;return i("li",{class:["link-list-item",{tile:t.isTile,dash:t.isOnDash}],attrs:{"data-test":"list-item",title:t.linkGroupTitle},on:{click:t.openLinks,auxclick:t.openLinks}},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))]),t.isTeamLink&&!t.$admin?i("div",{staticClass:"link-dropdown lock-wrapper",attrs:{title:"Managed by Team","data-test":"list-item-lock"}},[i("inline-svg",{staticClass:"icon icon-lock",attrs:{src:u}})],1):i("base-dropdown",{ref:"link-dropdown",staticClass:"link-dropdown",attrs:{"container-class":t.isOnDash?"dash":"app","data-test":"list-item-dropdown",title:""},scopedSlots:t._u([{key:"toastHeader",fn:function(){return[i("links-list-item-toast-header",{attrs:{"link-group":t.linkGroup}})]},proxy:!0}])},[t.isTeamLink?i("base-dropdown-text",{attrs:{"is-title":!0,"data-test":"team-link-title"}},[t._v("Team Link")]):t._e(),t.isTeamLink||t.isLegacyLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"pin-item"},on:{click:t.toggleLinkPinned}},[i("inline-svg",{staticClass:"icon icon-pin",attrs:{src:h}}),i("span",{staticClass:"text"},[t._v(" "+t._s(t.linkGroup.pinned?"Unpin":"Pin")+" ")])],1),!t.isLegacyLink||t.isTeamLink?i("base-dropdown-option",{attrs:{"data-test":"edit-item"},on:{click:t.editLink}},[i("inline-svg",{staticClass:"icon icon-edit",attrs:{src:L}}),i("span",{staticClass:"text"},[t._v("Edit")])],1):t._e(),t.isTeamLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"delete-item"},on:{click:t.deleteLink}},[i("inline-svg",{staticClass:"icon icon-trash",attrs:{src:f}}),i("span",{staticClass:"text"},[t._v("Delete")])],1)],1)],1)}),[],!1,null,"528f81a7").exports,_=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));export{w as L,v as a,_ as b};