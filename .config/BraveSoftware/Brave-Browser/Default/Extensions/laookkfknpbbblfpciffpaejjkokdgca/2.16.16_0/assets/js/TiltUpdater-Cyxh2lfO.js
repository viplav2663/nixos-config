import{s as t,A as i,k as e,l as s,J as o,m as n}from"./FlashMessage-DPJrdJ6u.js";import{V as a}from"./ValueWithRandom-DLbdL1Ci.js";import"./icon-alert--q0yLTMi.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./globalKeyEventManager-Bi-yHy9P.js";import"./icon-close-BUGl_M7j.js";import"./AnimationOptions-Bi5HrRx1.js";class l{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(i){i&&(void 0!==i.enable&&(this.enable=i.enable),void 0!==i.speed&&(this.speed=t(i.speed)),void 0!==i.decay&&(this.decay=t(i.decay)),void 0!==i.sync&&(this.sync=i.sync))}}class c extends a{constructor(){super(),this.animation=new l,this.direction="clockwise",this.enable=!1,this.value=0}load(t){super.load(t),t&&(this.animation.load(t.animation),void 0!==t.direction&&(this.direction=t.direction),void 0!==t.enable&&(this.enable=t.enable))}}const r=2*Math.PI;class d{constructor(t){this.container=t}getTransformValues(t){var i;const e=(null==(i=t.tilt)?void 0:i.enable)&&t.tilt;return{b:e?Math.cos(e.value)*e.cosDirection:void 0,c:e?Math.sin(e.value)*e.sinDirection:void 0}}init(t){var n;const a=t.options.tilt;if(!a)return;t.tilt={enable:a.enable,value:i(e(a.value)),sinDirection:s()>=o?1:-1,cosDirection:s()>=o?1:-1,min:0,max:r};let l=a.direction;if("random"===l){l=Math.floor(2*s())>0?"counter-clockwise":"clockwise"}switch(l){case"counter-clockwise":case"counterClockwise":t.tilt.status="decreasing";break;case"clockwise":t.tilt.status="increasing"}const c=null==(n=t.options.tilt)?void 0:n.animation;(null==c?void 0:c.enable)&&(t.tilt.decay=1-e(c.decay),t.tilt.velocity=e(c.speed)/360*this.container.retina.reduceFactor,c.sync||(t.tilt.velocity*=s()))}isEnabled(t){var i;const e=null==(i=t.options.tilt)?void 0:i.animation;return!t.destroyed&&!t.spawning&&!!(null==e?void 0:e.enable)}loadOptions(t,...i){t.tilt||(t.tilt=new c);for(const e of i)t.tilt.load(null==e?void 0:e.tilt)}async update(t,i){this.isEnabled(t)&&t.tilt&&(n(t,t.tilt,!1,"none",i),await Promise.resolve())}}export{d as TiltUpdater};