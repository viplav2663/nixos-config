import{E as e,l as i,G as t,H as n,k as o,D as a}from"./FlashMessage-DPJrdJ6u.js";import"./icon-alert--q0yLTMi.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./globalKeyEventManager-Bi-yHy9P.js";import"./icon-close-BUGl_M7j.js";const s=1;function c(e,i,n,o,a,c){!function(e,i){var n;const o=e.options,a=o.move.path;if(!a.enable)return;if(e.lastPathTime<=e.pathDelay)return void(e.lastPathTime+=i.value);const c=null==(n=e.pathGenerator)?void 0:n.generate(e,i);c&&e.velocity.addTo(c);a.clamp&&(e.velocity.x=t(e.velocity.x,-s,s),e.velocity.y=t(e.velocity.y,-s,s));e.lastPathTime-=e.pathDelay}(e,c);const r=e.gravity,l=(null==r?void 0:r.enable)&&r.inverse?-s:s;a&&n&&(e.velocity.x+=a*c.factor/(60*n)),(null==r?void 0:r.enable)&&n&&(e.velocity.y+=l*(r.acceleration*c.factor)/(60*n));const p=e.moveDecay;e.velocity.multTo(p);const v=e.velocity.mult(n);(null==r?void 0:r.enable)&&o>0&&(!r.inverse&&v.y>=0&&v.y>=o||r.inverse&&v.y<=0&&v.y<=-o)&&(v.y=l*o,n&&(e.velocity.y=v.y/n));const y=e.options.zIndex,d=(s-e.zIndexFactor)**y.velocityRate;v.multTo(d);const{position:m}=e;m.addTo(v),i.vibrate&&(m.x+=Math.sin(m.x*Math.cos(m.y)),m.y+=Math.cos(m.y*Math.sin(m.x)))}class r{init(e){const i=e.options.move.gravity;e.gravity={enable:i.enable,acceleration:o(i.acceleration),inverse:i.inverse},function(e){const i=e.container,t=e.options.move.spin;if(!t.enable)return;const a=t.position??{x:50,y:50},s={x:.01*a.x*i.canvas.size.width,y:.01*a.y*i.canvas.size.height},c=e.getPosition(),r=n(c,s),l=o(t.acceleration);e.retina.spinAcceleration=l*i.retina.pixelRatio,e.spin={center:s,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:r,acceleration:e.retina.spinAcceleration}}(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(t,n){var r,l;const p=t.options,v=p.move;if(!v.enable)return;const y=t.container,d=y.retina.pixelRatio;(r=t.retina).moveSpeed??(r.moveSpeed=o(v.speed)*d),(l=t.retina).moveDrift??(l.moveDrift=o(t.options.move.drift)*d);const m=function(e){return e.slow.inRange?e.slow.factor:s}(t),u=t.retina.moveSpeed*y.retina.reduceFactor,x=t.retina.moveDrift,h=a(p.size.value)*d,f=u*(v.size?t.getRadius()/h:1)*m*(n.factor||1)/2,g=t.retina.maxSpeed??y.retina.maxSpeed;v.spin.enable?function(e,i){const t=e.container;if(!e.spin)return;const n={x:"clockwise"===e.spin.direction?Math.cos:Math.sin,y:"clockwise"===e.spin.direction?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*n.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*n.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const o=Math.max(t.canvas.size.width,t.canvas.size.height),a=.5*o;e.spin.radius>a?(e.spin.radius=a,e.spin.acceleration*=-s):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-s),e.spin.angle+=.01*i*(s-e.spin.radius/o)}(t,f):c(t,v,f,g,x,n),function(t){const n=t.initialPosition,{dx:o,dy:a}=e(n,t.position),s=Math.abs(o),c=Math.abs(a),{maxDistance:r}=t.retina,l=r.horizontal,p=r.vertical;if(!l&&!p)return;if((l&&s>=l||p&&c>=p)&&!t.misplaced)t.misplaced=!!l&&s>l||!!p&&c>p,l&&(t.velocity.x=.5*t.velocity.y-t.velocity.x),p&&(t.velocity.y=.5*t.velocity.x-t.velocity.y);else if((!l||s<l)&&(!p||c<p)&&t.misplaced)t.misplaced=!1;else if(t.misplaced){const e=t.position,o=t.velocity;l&&(e.x<n.x&&o.x<0||e.x>n.x&&o.x>0)&&(o.x*=-i()),p&&(e.y<n.y&&o.y<0||e.y>n.y&&o.y>0)&&(o.y*=-i())}}(t)}}export{r as BaseMover};