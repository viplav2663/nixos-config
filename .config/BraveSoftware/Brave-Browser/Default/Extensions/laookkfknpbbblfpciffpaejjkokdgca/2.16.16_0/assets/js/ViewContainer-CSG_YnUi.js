import{g as e}from"./globalKeyEventManager-Bi-yHy9P.js";import{n as t}from"./icon-alert--q0yLTMi.js";import{S as i}from"./SmoothReflow-Du5fECCq.js";import{T as s}from"./ToggleSwitch-DUGISQcW.js";import{_ as a}from"./icon-ellipsis-D3jS4u3x.js";import{_ as n}from"./icon-back-D_TFrgyJ.js";import{_ as o}from"./icon-hide-NFfBhfBx.js";import"./localStorage-4iHdj-SC.js";import"./preload-helper-DmNsytk6.js";import"./string-GDe0WbEj.js";import"./allComponentsMounted-C3UsG_cA.js";const r=t({name:"ConfirmationOverlay",props:{viewManager:{type:Object,required:!0},heading:{type:String,default:""},subheading:{type:String,default:""},confClass:{type:String,default:""},onProceed:{type:Function,required:!0},onDismiss:{type:Function,default:()=>({})}},created(){this.viewId=this.viewManager.activeViewId,e.registerEventListener(`${this.viewId}:confProceed`,"keyup",13,this.proceed),e.registerEventListener(`${this.viewId}:confDismiss`,"keyup",27,this.dismiss)},destroyed(){e.removeEventListener(`${this.viewId}:confProceed`,"keyup",13),e.removeEventListener(`${this.viewId}:confDismiss`,"keyup",27)},methods:{proceed(){this.onProceed(),this.dismiss()},dismiss(){this.onDismiss(),this.viewManager.clearConfirmationOverlay()}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"confirmation",class:e.confClass,attrs:{"data-test":"conf"}},[t("div",{staticClass:"messages"},[t("h3",[e._v(e._s(e.heading))]),t("div",{staticClass:"subheading"},[e._v(e._s(e.subheading))])]),t("div",{staticClass:"button-row"},[t("button",{staticClass:"button button-confirm",attrs:{"data-test":"conf-yes"},on:{click:e.proceed}},[e._v("Yes")]),t("button",{staticClass:"button button-neutral",attrs:{"data-test":"conf-no"},on:{click:e.dismiss}},[e._v("No")])]),t("div",{staticClass:"overlay"})])}),[],!1,null,"2de951fb").exports;const c=t({name:"DefaultHeader",components:{HeaderButtons:t({name:"HeaderButtons",components:{InAppDropdown:t({name:"InAppDropdown",components:{ToggleSwitch:s},props:{options:{type:[Array,Function],required:!0},viewManager:{type:Object,required:!0}},data:()=>({active:!1}),watch:{active(e){e?this.$nextTick((()=>{const e=this.$refs.dropdown,t=e.closest(".app-overflow"),i=function e(t,i,s=0){return t===i?s:e(t.offsetParent,i,s+t.offsetTop)}(e,e.closest(".app-overflow"))+e.clientHeight+21,s=t.clientHeight-i;s<0&&this.viewManager.setForcedAppBodyHeight(t.querySelector(".app-body").clientHeight-s)})):this.viewManager.resetForcedAppBodyHeight()}},destroyed(){this.viewManager.resetForcedAppBodyHeight()},methods:{onOptionClick(e){var t;this.active=!1,e.action(),null==(t=e.capture)||t.call(e)},onToggleInput(e,t){var i;e.object[e.property]=t,null==(i=e.capture)||i.call(e,t)},access:m.utils.access}},(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>e.active=!1,expression:"() => active = false"}],staticClass:"dropdown-wrapper"},[t("div",{staticClass:"icon-wrapper more-toggle",attrs:{"data-test":"more-toggle"},on:{click:function(t){e.active=!e.active}}},[t("inline-svg",{staticClass:"icon icon-ellipsis more-icon",attrs:{src:a}})],1),e.active?t("ul",{ref:"dropdown",staticClass:"dropdown dropdown-list"},e._l(e.access(e.options),(function(i,s){return t("li",{key:s},[i.toggle?t("div",{staticClass:"dropdown-list-item has-toggle",attrs:{"data-test":e.access(i.dataTest)},on:{click:function(t){return e.onToggleInput(i,!i.object[i.property])}}},[t("span",[e._v(e._s(e.access(i.label)))]),t("toggle-switch",{attrs:{value:i.object[i.property]}})],1):t("div",{staticClass:"dropdown-list-item",attrs:{"data-test":e.access(i.dataTest)},on:{click:function(t){return e.onOptionClick(i,t)}}},[e.access(i.icon)?t("inline-svg",{staticClass:"icon dropdown-list-icon",class:e.access(i.iconClass),attrs:{src:e.access(i.icon)}}):e._e(),t("span",[e._v(e._s(e.access(i.label)))])],1)])})),0):e._e()])}),[],!1,null,"a432420c").exports},props:{buttons:{type:Object,required:!0},viewManager:{type:Object,required:!0}},methods:{showViewOrRunCallback(e){"string"==typeof e?this.viewManager.showView(e):"function"==typeof e&&e()}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"buttons"},e._l(e.buttons,(function(i,s){return t("div",{key:s},["back"===s&&["string","function"].includes(typeof i)?t("div",{staticClass:"icon-wrapper go-back",attrs:{"data-test":"back"},on:{click:function(t){return e.showViewOrRunCallback(i)}}},[t("inline-svg",{staticClass:"icon icon-back",attrs:{src:n}})],1):"more"!==s||"function"!=typeof i&&!Array.isArray(i)?t("div",{staticClass:"icon-wrapper",class:i.class,attrs:{"data-test":i.dataTest},on:{click:function(t){return e.showViewOrRunCallback(i.action)}}},[t("inline-svg",{staticClass:"icon",class:i.iconClass,attrs:{src:i.icon}})],1):t("in-app-dropdown",{attrs:{"data-test":i.dataTest,options:i,"view-manager":e.viewManager}})],1)})),0)}),[],!1,null,"fe7147fc").exports},props:{title:{type:[String,Function],default:""},centerTitle:{type:Boolean,default:!1},icon:{type:[String,Function],default:""},iconClass:{type:[String,Function],default:""},viewManager:{type:Object,required:!0},buttonsRight:{type:[Object,Function],default:null},buttonsLeft:{type:[Object,Function],default:null}},computed:{iconIsSvg(){return this.access(this.icon).includes("data:image/svg+xml")},computedButtonsLeft(){return this.access(this.buttonsLeft)},computedButtonsRight(){return this.access(this.buttonsRight)},computedTitle(){return this.access(this.title)}},methods:{access:m.utils.access}},(function(){var e=this,t=e._self._c;return t("header",{staticClass:"header",class:{"center-title":e.centerTitle}},[e.computedButtonsLeft?t("header-buttons",{staticClass:"header-left",attrs:{buttons:e.computedButtonsLeft,"view-manager":e.viewManager}}):e.centerTitle?t("div",{staticClass:"centering-placeholder"}):e._e(),t("div",{staticClass:"header-center"},[t("transition",{attrs:{name:"fade",duration:"100",mode:"out-in"}},[t("div",{key:e.computedTitle+e.icon,staticClass:"title-wrapper"},[e.access(e.icon)&&e.iconIsSvg?t("inline-svg",{staticClass:"icon app-icon",class:e.access(e.iconClass),attrs:{src:e.access(e.icon)}}):e.access(e.icon)?t("img",{staticClass:"icon app-icon",class:e.iconClass,attrs:{src:e.access(e.icon)}}):e._e(),e.computedTitle?t("div",{staticClass:"title"},[e._v(e._s(e.computedTitle))]):e._e()],1)])],1),e.computedButtonsRight||e.$touch?t("div",{staticClass:"header-right"},[e.computedButtonsRight?t("header-buttons",{attrs:{buttons:e.computedButtonsRight,"view-manager":e.viewManager}}):e._e(),e.$touch?t("span",{staticClass:"mobile-close",on:{click:e.viewManager.closeApp}},[t("span",{staticClass:"icon-wrapper u--mobile-show-bg hide"},[t("inline-svg",{staticClass:"icon icon-hide",attrs:{src:o}})],1)]):e._e()],1):e.centerTitle?t("div",{staticClass:"centering-placeholder"}):e._e()],1)}),[],!1,null,"5dcdad32").exports;const l=t({name:"ViewContainer",components:{ConfirmationOverlay:r,SmoothReflow:i,DefaultHeader:c},props:{viewManager:{type:Object,required:!0},loaded:{type:Boolean,default:!0},transition:{type:[String,Array],default:()=>["smooth-height-slide-left","smooth-height-slide-right"]},smoothReflow:{type:Boolean,default:!0}},data:()=>({lastActiveViewId:"",reverseTransition:!1,disableSmoothReflow:!0,fadeTransition:!0}),computed:{activeViewId(){return this.viewManager.activeViewId},activeView(){return this.viewManager.activeView},transitionType(){let e,t;return Array.isArray(this.transition)?[e,t]=this.transition:"string"==typeof this.transition&&(e=t=this.transition),this.fadeTransition?"smooth-height-fade":this.reverseTransition?t:e},appBodyHeight(){const e=this.viewManager.forcedAppBodyHeight;return e||0===e?e+"px":"auto"}},watch:{loaded:{handler(e){e&&this.$nextTick((()=>this.fadeTransition=!1))},immediate:!0},activeViewId(e,t){if(!t)return;this.lastActiveViewId=t;const i=this.viewManager.views[this.lastActiveViewId],s=this.viewManager.activeView;Object.prototype.hasOwnProperty.call(i,"order")&&Object.prototype.hasOwnProperty.call(s,"order")&&(this.reverseTransition=i.order>s.order),this.viewManager.$emit("viewClosing:"+this.lastActiveViewId)}},created(){this.viewManager&&this.viewManager.$emit("container:created"),i&&setTimeout((()=>this.disableSmoothReflow=!1),200)},destroyed(){this.afterViewLeave(),this.viewManager.resetView()},methods:{afterViewLeave(){this.viewManager&&(this.viewManager.$emit("resolveShowView:"+this.lastActiveViewId),this.$nextTick().then((()=>{this.viewManager.$emit("viewClosed:"+this.lastActiveViewId)})))},beforeViewEnter(){this.viewManager&&this.viewManager.$emit("viewOpening:"+this.activeViewId)},afterViewEnter(){this.viewManager&&this.viewManager.$emit("viewOpened:"+this.activeViewId)}}},(function(){var e=this,t=e._self._c;return t("smooth-reflow",{staticClass:"view-container",attrs:{transition:e.transitionType,disabled:e.disableSmoothReflow,duration:300},on:{beforeEnter:e.beforeViewEnter,afterEnter:e.afterViewEnter,afterLeave:e.afterViewLeave}},[e.loaded?t("div",{key:e.activeViewId,ref:"view",staticClass:"app-overflow",attrs:{"data-test":"view","data-test-view-id":e.activeViewId}},[e._t("header",(function(){return[e.activeView&&e.activeView.header?t(e.activeView.header.component||"DefaultHeader",e._b({tag:"component",staticClass:"app-header",attrs:{"view-manager":e.viewManager,"data-test":"header"}},"component",e.activeView.header,!1)):e._e()]})),t("div",{staticClass:"app-body",style:{height:e.appBodyHeight}},[e._t("body",(function(){return[e.activeView&&e.activeView.header?t(e.activeView.body.component,e._b({tag:"component",staticClass:"view",attrs:{"view-manager":e.viewManager}},"component",e.activeView.body,!1)):e._e()]}))],2),t("transition",{attrs:{duration:200,name:"fade"}},[e.viewManager.confirmationOverlayActive?t("confirmation-overlay",e._b({attrs:{"view-manager":e.viewManager}},"confirmation-overlay",e.viewManager.confirmationOverlayProps,!1)):e._e()],1)],2):t("div",{key:"1",ref:"loading",staticClass:"loading-wrapper"},[t("i",{staticClass:"loading-icon"})])])}),[],!1,null,"36b470e2").exports;export{l as default};