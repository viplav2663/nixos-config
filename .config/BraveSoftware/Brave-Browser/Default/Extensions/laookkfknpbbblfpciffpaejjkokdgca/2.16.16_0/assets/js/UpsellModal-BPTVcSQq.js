import{_ as t}from"./icon-back-D_TFrgyJ.js";import{_ as e}from"./icon-close-BUGl_M7j.js";import{n as s,z as a,m as i,u as l,aa as n,b as r,A as o}from"./icon-alert--q0yLTMi.js";import{s as c}from"./index-DQvfDEB6.js";import{u,b as d}from"./index-D7SyL4qE.js";import{_ as p}from"./icon-clean-rFsPxTtp.js";const h=s({name:"Upsell",components:{ModalBanner:s({name:"ModalBanner",props:{sales:{type:Object,default:()=>({})},showClose:{type:Boolean,default:!0},showBack:{type:Boolean,default:!1}},computed:{date:()=>m.models.date,time(){return new Date(this.date.get("seconds"))},saleInfo(){return this.sales&&this.sales.yearly},saleTimeLeft(){return new Date(this.sales.yearly.endDate)-this.time},stringCountdown(){if(!this.sales||!this.sales.yearly.endDate)return"";if(this.saleTimeLeft<=0)return"Sale Has Ended";const t=Math.floor(this.saleTimeLeft/1e3),e=m.utils.twoDigit(t%60),s=Math.floor(t/60),a=m.utils.twoDigit(s%60),i=Math.floor(s/60),l=m.utils.twoDigit(i%24);return"Ends in "+Math.floor(i/24)+"d "+l+"h "+a+"m "+e+"s"}}},(function(){var s=this,a=s._self._c;return a("div",{staticClass:"sale"},[s.showBack?a("div",{staticClass:"back-container"},[a("div",{staticClass:"back icon-wrapper",attrs:{"data-test":"back"},on:{click:function(t){return s.$emit("goBack")}}},[a("inline-svg",{staticClass:"icon icon-back",attrs:{src:t}})],1)]):s._e(),a("span",{staticClass:"text"},[a("div",{staticClass:"description"},[s._v(s._s(s.saleInfo.title)),a("span",{staticClass:"divider"},[s._v("â€“")]),s._v(s._s(s.saleInfo.percentOff)+"% Off")]),a("div",{staticClass:"countdown"},[s._v(s._s(s.stringCountdown))])]),s.showClose?a("div",{staticClass:"close-container"},[a("div",{staticClass:"icon-wrapper close",attrs:{"data-test":"close"},on:{click:function(t){return s.$emit("close")}}},[a("inline-svg",{staticClass:"icon icon-close",attrs:{src:e}})],1)]):s._e()])}),[],!1,null,"7fcae1e4").exports,UpgradeButton:s({name:"UpgradeButton",props:{followMouse:{type:Boolean,default:!0},variant:{type:String,default:"control"}},setup(){const t=a();return{circle:a(),upgradeButton:a(),shimmerMask:t,buttonBoundingBox:u(t),mouse:d({touch:!1}),cleanup:[],isSafari:i()}},computed:{transformShimmerMask(){return`translate(${this.mouse.x.value-this.buttonBoundingBox.x.value}px, ${this.mouse.y.value-this.buttonBoundingBox.y.value}px)`},transformButtonPosition(){return this.shouldMoveButton?`translate(${.1*this.deltaXToCenter}px, ${.1*this.deltaYToCenter}px)`:"translate(0px, 0px)"},deltaXToCenter(){return this.mouse.x.value-(this.buttonBoundingBox.x.value+.5*this.buttonBoundingBox.width.value)},deltaYToCenter(){return this.mouse.y.value-(this.buttonBoundingBox.y.value+.5*this.buttonBoundingBox.height.value)},shouldMoveButton(){return!!this.followMouse&&(Math.abs(this.deltaYToCenter)<=.5*this.buttonBoundingBox.height.value+20&&Math.abs(this.deltaXToCenter)<=.5*this.buttonBoundingBox.width.value+30)}},watch:{transformShimmerMask:{handler(t){var e;null==(e=this.circle)||e.animate({transform:t},{duration:800,fill:"forwards",easing:"ease-in-out"})},immediate:!0},transformButtonPosition:{handler(t){var e;null==(e=this.upgradeButton)||e.animate({transform:t},{duration:400,fill:"forwards",easing:this.shouldMoveButton?"linear":"cubic-bezier(0.2, 0, 0.3, 1)"})},immediate:!0}}},(function(){var t=this,e=t._self._c;return e("a",{ref:"upgradeButton",staticClass:"upgrade-button",class:[`${t.variant.replaceAll("_","-")}`]},[t._m(0),t._m(1),e("div",{staticClass:"background"}),t.isSafari?t._e():e("div",{staticClass:"chroma-bg shimmer"},[t._m(2)]),e("div",{staticClass:"content"},[t._t("default")],2),e("svg",{ref:"shimmerMask",attrs:{id:"shimmer-mask-svg"}},[e("mask",{attrs:{id:"shimmer-mask"}},[e("circle",{ref:"circle",staticClass:"circle",attrs:{r:"50",cx:"0",cy:"0",fill:"white"}})])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg border"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg glow"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])}],!1,null,"ef8ec13a").exports},props:{type:{type:String,default:"General"},eventSource:{type:String,default:""},eventFeature:{type:String,default:""},eventType:{type:String,default:""},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},headerTitle:{type:String,default:"Available on Momentum Plus"}},setup(){var t;return{isSafari:l.isSafari(),stepsEnum:c,upsellButtonExperiment:null==(t=n("upsell_button"))?void 0:t.variantName,userIsLegacyUnregistered:r}},computed:{saleActive(){return this.sales&&Object.keys(this.sales).length},sale(){return this.sales&&this.sales.yearly}},created(){m.on("globalEvent:esc",this.close);let t={feature:this.eventFeature||this.type};this.eventType&&(t.type=this.eventType),this.analytics=new o(t)},mounted(){m.upsellModalActive=!0,this.analytics.capture("upsell show",{location:this.eventSource}),m.commandManager.beforeExecute("upsell.upgrade")},destroyed(){m.upsellModalActive=!1,m.off("globalEvent:esc",this.close)},methods:{close(){m.trigger("modal:close")},upgrade(){this.analytics.capture("upsell click"),m.trigger("modal:showUpgrade")}}},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"upsell-modal",attrs:{"data-test":"upsell"}},[s("transition",{attrs:{name:"slide-fade",appear:""}},[s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"app onboarding new-upsell light light-full",class:`${t.type}-upsell`,attrs:{"data-test":`${t.type}-upsell`}},[t.saleActive?s("modal-banner",{attrs:{sales:t.sales},on:{close:t.close}}):t._e(),s("header",{staticClass:"header"},[s("div",{staticClass:"header-left"}),s("div",{staticClass:"header-title"},[t._v(t._s(t.headerTitle))]),s("div",{staticClass:"header-right"},[t.saleActive?t._e():s("span",{staticClass:"icon-wrapper hide",attrs:{"data-test":"close"},on:{click:t.close}},[s("inline-svg",{staticClass:"icon icon-hide",attrs:{src:e}})],1)])]),s("main",{staticClass:"body"},[s("div",{staticClass:"body-header"},[s("div",{staticClass:"title",attrs:{"data-test":"upsell-title"}},[t._t("title")],2),s("div",{staticClass:"description",attrs:{"data-test":"upsell-description"}},[t._t("description")],2)]),t._t("body"),t._t("default")],2),s("footer",{staticClass:"footer"},["control"!==t.upsellButtonExperiment?s("upgrade-button",{attrs:{"follow-mouse":"rainbow_follow"===t.upsellButtonExperiment,variant:t.upsellButtonExperiment,"data-test":"upsell-cta"},nativeOn:{click:function(e){return t.upgrade.apply(null,arguments)}}},[s("inline-svg",{staticClass:"icon",attrs:{src:p}}),t._v("Upgrade to Plus ")],1):s("a",{staticClass:"button",attrs:{"data-test":"upsell-cta"},on:{click:t.upgrade}},[s("inline-svg",{staticClass:"icon",attrs:{src:p}}),t._v("Upgrade to Plus")],1),s("div",{staticClass:"button-desc"},[t.isSafari||t.userIsLegacyUnregistered()?t._e():[t._v(" Only "),t.saleActive?[s("strong",[s("s",{staticClass:"strike"},[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice))]),t._v(" $"+t._s(t.sale.friendlyMonthlyPrice))]),t._v("/month.")]:t.plans.yearly?[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice)+"/month.")]:t._e()],t._v(" 30-day money-back guarantee. "),t.isSafari?t._e():s("a",{staticClass:"learn-more",attrs:{href:"https://momentumdash.com/plus",target:"_blank"}},[s("strong",[t._v("Learn more")])])],2)],1)],1)])],1)}),[],!1,null,"53a5e75b").exports;export{h as U};