import{S as t}from"./Slider-CrF6GS0V.js";import{a as i}from"./main-CYmRensV.js";import o from"./soundscapesState-BbS4i45E.js";import{n as e,A as s}from"./icon-alert--q0yLTMi.js";import"./VueBase-W7f1OYgs.js";import"./index-DQvfDEB6.js";import"./preload-helper-DmNsytk6.js";import"./localStorage-4iHdj-SC.js";import"./migrateLegacyUserMessageHandler-DMvEmYM4.js";import"./main-FH8FpKq2.js";import"./index-CJJH83pl.js";import"./portal-vue.esm-SV1wohGy.js";import"./add-COIuonao.js";import"./google-DKPAcOmk.js";import"./BaseIcon-B5UifJH3.js";import"./arrow-Be8MuPJi.js";import"./icon-weather-reset-C06kxk3l.js";import"./icon-settings-Bycjf8-G.js";import"./icon-back-arrow-CiRQJ6G-.js";import"./icon-back-D_TFrgyJ.js";import"./icon-trash-BQ1O-AfY.js";import"./icon-close-BUGl_M7j.js";import"./icon-cog-BFr_Pva7.js";import"./icon-skip-BOkC5L0N.js";import"./icon-down-BiHbKN-t.js";import"./icon-edit-CixeXNYx.js";import"./icon-ellipsis-D3jS4u3x.js";import"./icon-error-state-BKQhfBCj.js";import"./icon-heart-v5O7C6eS.js";import"./icon-hide-NFfBhfBx.js";import"./icon-key-BPNRipb3.js";import"./icon-next-B4hjdiAA.js";import"./icon-photo-BrwqV1T0.js";import"./icon-pin-BHeOuzvO.js";import"./icon-plus-D4YOesIc.js";import"./icon-profile-B_XWyuTb.js";import"./icon-x-qUCmf2CW.js";import"./icon-skip-intro-BUi8b3Ak.js";import"./icon-tooltip-CN09iXOB.js";import"./icon-visible-on-CM3kpcFN.js";import"./icon-x-caret-half-CZtcH_PM.js";import"./tasks-completed-Dg2z75km.js";import"./arrow-up-1QPpu78M.js";import"./square-check-DwLT60gj.js";import"./clocks-DjzskNOU.js";import"./close-Bj_A2br_.js";import"./search-DCqlmJx6.js";import"./folder-CwWTWsnJ.js";import"./switch-EuBTQVVE.js";import"./focus-mode-09pIyYAW.js";import"./storage-YYEO5TB5.js";import"./icon-confetti-Dz2LojDe.js";import"./ocean-bubbles-GcKjBI5B.js";import"./sparks-CAw9b6ob.js";import"./secure-B8YP-AML.js";import"./icon-asana-Csd73e1k.js";import"./icon-percent-schedule-CA5EI9b7.js";import"./icon-trello-DhCq-Fsi.js";import"./icon-clean-rFsPxTtp.js";import"./icon-more-lists-Cl9oRGK2.js";import"./icon-more-fonts-CcfOY0t4.js";import"./icon-focus-stats-keERwXFt.js";import"./icon-top-of-mind-B6EhbCcK.js";import"./icon-flow-5QqmGIWX.js";import"./icon-integrations-D9o58ob4.js";import"./icon-weather-extra-ufLpT_SX.js";import"./icon-spiral-gh4hwZDD.js";import"./icon-happy-place-D1z6CJgM.js";import"./icon-time-sensitive-CP2L3maw.js";import"./icon-hourly-CdMmiQZT.js";import"./icon-infinity-D4yMRoAd.js";import"./icon-personalize-photos-D2M4lLlt.js";import"./icon-skip-2bGCAGKt.js";import"./icon-photo-match-C2EChNEK.js";import"./icon-random-375DbcwF.js";import"./icon-timezones-DGZoTtaT.js";import"./icon-simplify-BRUtLJYp.js";import"./icon-sync-DIH26Y9h.js";import"./AppDash-CAm0VyUo.js";import"./AppContainer-DnRychOY.js";import"./showAnyway-d_ZUKj8O.js";import"./reactiveCustomization-DqGARD3C.js";import"./allComponentsMounted-C3UsG_cA.js";import"./string-GDe0WbEj.js";import"./SmoothReflow-Du5fECCq.js";import"./appToggleMixin-IV4cErk-.js";import"./ViewState-_YxhE_TX.js";const r=new s({feature:"soundscapes",is_paid_event:!0});const a=e({name:"Tracks",components:{AudioTrack:e({name:"AudioTrack",components:{Slider:t},props:{track:{type:Object,required:!0},singleTrackActive:{type:Boolean,default:!1}},computed:{finalVolume(){return this.track.active?this.track.volume*o.globalVolume*.01:0},iconName(){return"icon-"+this.track.name.replace(/\s+/g,"-").toLowerCase()},trackTitle(){return`Turn ${this.track.active?"off":"on"} ${this.track.name}`},trackVolumeTitle(){return`${this.track.name} volume: ${this.track.volume}`}},watch:{track(){o.tracks[this.track.name]||this.captureVolumeInState()},"track.volume"(){o.tracks[this.track.name].volume=this.track.volume},finalVolume:{handler(){o.globalPlaying&&(clearTimeout(this.finalVolumeTimeout),this.finalVolumeTimeout=setTimeout((()=>{i.fadeTrack(this.finalVolume,this.track)}),50))},immediate:!0}},created(){this.captureVolumeInState(),m.on("soundscapes:tracks:toggle:others",this.toggleOffIfNotTrackName)},destroyed(){m.off("soundscapes:tracks:toggle:others",this.toggleOffIfNotTrackName)},methods:{toggleActive(t,i=!0){this.track.volume||this.$set(this.track,"volume",m.utils.getRandomIntBetween(15,85)),this.track.active="boolean"==typeof t?t:!this.track.active,i&&r.capture("track "+(this.track.active?"enable":"disable"),{track:this.track.name.toLowerCase(),singleTrackActive:this.singleTrackActive}),this.track.active&&(o.globalPlaying=!0,this.singleTrackActive&&m.trigger("soundscapes:tracks:toggle:others",this.track.name))},toggleOffIfNotTrackName(t){this.track.name!==t&&this.toggleActive(!1,!1)},captureVolumeInState(){const t=this.track.volume;o.tracks[this.track.name]={volume:t,originalVolume:t}},sendVolumeChangeEventOnInput(){clearTimeout(this.trackVolumeInstrumentationTimeout),this.trackVolumeInstrumentationTimeout=setTimeout((()=>{r.capture("track volume change",{track:this.track.name.toLowerCase()})}),1e3)}}},(function(){var t=this,i=t._self._c;return i("div",{attrs:{title:t.trackTitle}},[i("div",{staticClass:"tile",class:{on:t.track.active},on:{click:t.toggleActive}},[i("div",{staticClass:"tile-icon-wrapper"},[i("inline-svg",{staticClass:"tile-icon feed-icon",class:t.iconName,attrs:{src:t.track.icon}})],1)]),i("div",{staticClass:"tile-slider",class:{on:t.track.active},attrs:{title:t.trackVolumeTitle}},[i("slider",{on:{input:t.sendVolumeChangeEventOnInput},model:{value:t.track.volume,callback:function(i){t.$set(t.track,"volume",i)},expression:"track.volume"}})],1)])}),[],!1,null,"5b300d4b").exports},props:{tracks:{type:Array,required:!0},singleTrackActive:{type:Boolean,default:!1}}},(function(){var t=this,i=t._self._c;return i("section",{staticClass:"tracks"},[i("div",{staticClass:"tile-list"},t._l(t.tracks,(function(o,e){return i("audio-track",{key:e,attrs:{track:o,"single-track-active":t.singleTrackActive}})})),1)])}),[],!1,null,"a217f321").exports;export{a as default};